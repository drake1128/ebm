<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCT è©•è®€ | EBM æ•™å­¸å¹³å°</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --pri:#2EC4B6;
            --pri2:#06D6A0;
            --pri-dark:#1A936F;
            --acc:#FF6B35;
            --suc:#38A169;
            --warn:#FFBE0B;
            --err:#EF476F;
            --blue:#0077B6;
            --pur:#7209B7;
            --bg:#FAFBFC;
            --txt:#1A1A2E;
            --txt2:#6B7280
        }
        body{font-family:'Noto Sans TC',sans-serif;background:var(--bg);color:var(--txt);line-height:1.7}
        .card{background:#fff;border-radius:16px;padding:20px;margin-bottom:16px;box-shadow:0 2px 12px rgba(46,196,182,0.1)}
        .btn{padding:14px 24px;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all 0.3s}
        .btn-pri{background:linear-gradient(135deg,var(--pri),var(--pri2));color:#fff}
        .btn-pri:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(46,196,182,0.4)}
        .btn-acc{background:linear-gradient(135deg,var(--acc),#F7931E);color:#fff}
        table{width:100%;border-collapse:collapse;font-size:13px;margin:12px 0}
        th,td{padding:10px;text-align:left;border-bottom:1px solid #eee}
        th{background:linear-gradient(135deg,#E6FAF8,#D4F5F2);font-weight:600;color:var(--pri-dark)}
        .formula{background:linear-gradient(135deg,#E6FAF8,#D4F5F2);border:2px solid var(--pri);border-radius:12px;padding:16px;margin:12px 0;text-align:center;font-size:16px;color:var(--pri-dark);font-weight:600}
        .tip{background:#FFF9F0;border-left:4px solid var(--acc);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .good{background:#F0FFF4;border-left:4px solid var(--suc);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .info{background:#E6FAF8;border-left:4px solid var(--pri);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .warn{background:#FFFBEB;border-left:4px solid var(--warn);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .err{background:#FFF5F5;border-left:4px solid var(--err);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .badge{display:inline-block;padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600}
        .flow-step{display:flex;align-items:center;gap:12px;padding:12px;background:#fff;border-radius:12px;margin-bottom:8px;border:1px solid #eee}
        .flow-num{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;flex-shrink:0}
        .checklist-item{display:flex;align-items:flex-start;gap:10px;padding:10px 0;border-bottom:1px solid #f0f0f0}
        .checklist-item:last-child{border-bottom:none}
        .icon-check{color:var(--suc);font-size:18px}
        .icon-warn{color:var(--warn);font-size:18px}
        .icon-err{color:var(--err);font-size:18px}
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect}=React;

const MODULE_ID='rct-appraisal';

const ProgressTracker={
    STORAGE_KEY:'ebm-progress',
    getProgress:()=>{try{const d=localStorage.getItem(ProgressTracker.STORAGE_KEY);return d?JSON.parse(d):{version:1,modules:{},badges:[],totalTimeSpent:0}}catch{return{version:1,modules:{},badges:[],totalTimeSpent:0}}},
    saveQuizResult:(moduleId,score,total,timeSpent)=>{
        const progress=ProgressTracker.getProgress();
        const mod=progress.modules[moduleId]||{bestScore:0,totalAttempts:0,allAttempts:[],lessonsViewed:[],completed:false,firstCompleted:null};
        const attempt={date:new Date().toISOString(),score,timeSpent};
        mod.allAttempts.push(attempt);mod.totalAttempts++;
        if(score>mod.bestScore)mod.bestScore=score;
        const passingScore=Math.ceil(total*0.7);
        if(score>=passingScore&&!mod.completed){mod.completed=true;mod.firstCompleted=attempt.date}
        progress.modules[moduleId]=mod;progress.totalTimeSpent+=timeSpent;progress.lastUpdated=new Date().toISOString();
        ProgressTracker.checkBadges(progress,score,total,timeSpent);
        localStorage.setItem(ProgressTracker.STORAGE_KEY,JSON.stringify(progress));return progress;
    },
    checkBadges:(progress,score,total,timeSpent)=>{
        const badges=progress.badges||[];const ids=badges.map(b=>b.id);const now=new Date().toISOString();
        if(!ids.includes('first-quiz'))badges.push({id:'first-quiz',earnedAt:now});
        if(score===total&&!ids.includes('perfect-score'))badges.push({id:'perfect-score',earnedAt:now});
        if(timeSpent<120&&!ids.includes('speed-demon'))badges.push({id:'speed-demon',earnedAt:now});
        const completed=Object.values(progress.modules).filter(m=>m.completed).length;
        if(completed>=5&&!ids.includes('five-complete'))badges.push({id:'five-complete',earnedAt:now});
        if(completed>=10&&!ids.includes('ten-complete'))badges.push({id:'ten-complete',earnedAt:now});
        if(completed>=18&&!ids.includes('master'))badges.push({id:'master',earnedAt:now});
        const mod=progress.modules[MODULE_ID];
        if(mod&&mod.totalAttempts>=3&&!ids.includes('persistent'))badges.push({id:'persistent',earnedAt:now});
        progress.badges=badges;
    }
};

const lessons=[
    {id:1,title:'RCT åŸºæœ¬æ¦‚å¿µ',sub:'Study Design Basics',color:'#2EC4B6'},
    {id:2,title:'éš¨æ©ŸåŒ–èˆ‡ç›²åŒ–',sub:'Randomization & Blinding',color:'#0077B6'},
    {id:3,title:'åå·®é¢¨éšªè©•ä¼°',sub:'Risk of Bias Assessment',color:'#7209B7'},
    {id:4,title:'æ•ˆæœé‡èˆ‡NNT',sub:'Effect Measures & NNT',color:'#FF6B35'},
    {id:5,title:'è©•è®€å¯¦å‹™æ‡‰ç”¨',sub:'Clinical Application',color:'#38A169'}
];

const quiz=[
    {q:'RCT è¢«è¦–ç‚ºæ²»ç™‚æ•ˆæœè©•ä¼°çš„é»ƒé‡‘æ¨™æº–ï¼Œä¸»è¦åŸå› ç‚ºä½•ï¼Ÿ',
     o:['æ¨£æœ¬æ•¸æœ€å¤§','å¯ä»¥é€²è¡Œé•·æœŸè¿½è¹¤','éš¨æ©Ÿåˆ†æ´¾å¯å¹³è¡¡å·²çŸ¥èˆ‡æœªçŸ¥å¹²æ“¾å› å­','è²»ç”¨æœ€ä½'],
     c:2,
     e:'éš¨æ©Ÿå°ç…§è©¦é©—(RCT)é€ééš¨æ©Ÿåˆ†æ´¾ï¼Œå¯ä»¥å¹³è¡¡å…©çµ„é–“å·²çŸ¥èˆ‡æœªçŸ¥çš„å¹²æ“¾å› å­(confounders)ï¼Œä½¿å…©çµ„åœ¨åŸºç·šç‰¹æ€§ä¸Šå…·æœ‰å¯æ¯”æ€§ï¼Œå› æ­¤èƒ½è¼ƒæº–ç¢ºè©•ä¼°ä»‹å…¥æªæ–½çš„å› æœæ•ˆæ‡‰ã€‚'},
    {q:'ä¸‹åˆ—é—œæ–¼ã€Œåˆ†é…éš±åŒ¿(Allocation Concealment)ã€çš„æ•˜è¿°ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
     o:['èˆ‡ç›²åŒ–(blinding)æ˜¯ç›¸åŒæ¦‚å¿µ','ç›®çš„æ˜¯é˜²æ­¢ç ”ç©¶è€…é æ¸¬ä¸‹ä¸€å€‹å—è©¦è€…çš„åˆ†çµ„','åªåœ¨é›™ç›²è©¦é©—ä¸­éœ€è¦','åˆ†é…éš±åŒ¿å¤±æ•—æœƒå°è‡´è³‡è¨Šåå·®'],
     c:1,
     e:'åˆ†é…éš±åŒ¿æ˜¯åœ¨éš¨æ©Ÿåˆ†æ´¾æ™‚ï¼Œç¢ºä¿ç ”ç©¶äººå“¡ç„¡æ³•é æ¸¬ä¸‹ä¸€ä½å—è©¦è€…æœƒè¢«åˆ†åˆ°å“ªä¸€çµ„ã€‚é€™èˆ‡ç›²åŒ–ä¸åŒï¼šåˆ†é…éš±åŒ¿æ˜¯åœ¨åˆ†æ´¾æ™‚é˜²æ­¢é¸æ“‡åå·®ï¼Œç›²åŒ–æ˜¯åœ¨åˆ†æ´¾å¾Œé˜²æ­¢è³‡è¨Šåå·®ã€‚'},
    {q:'åœ¨è©•ä¼°RCTçš„åå·®é¢¨éšªæ™‚ï¼Œã€ŒIntention-to-Treat (ITT)ã€åˆ†æçš„ä¸»è¦å„ªé»ç‚ºä½•ï¼Ÿ',
     o:['å¯ä»¥å¢åŠ çµ±è¨ˆæª¢å®šåŠ›','ç¶­æŒéš¨æ©ŸåŒ–å¸¶ä¾†çš„çµ„é–“å¯æ¯”æ€§','å¯ä»¥æ’é™¤ä¸éµå¾æ²»ç™‚çš„å—è©¦è€…','æ¸›å°‘æ¨£æœ¬æ•¸éœ€æ±‚'],
     c:1,
     e:'ITTåˆ†æå°‡æ‰€æœ‰éš¨æ©Ÿåˆ†æ´¾çš„å—è©¦è€…ä¾å…¶åŸå§‹åˆ†çµ„é€²è¡Œåˆ†æï¼Œä¸è«–å¯¦éš›æ¥å—ä½•ç¨®æ²»ç™‚ã€‚é€™æ¨£å¯ä»¥ä¿æŒéš¨æ©ŸåŒ–ç”¢ç”Ÿçš„çµ„é–“å¯æ¯”æ€§ï¼Œåæ˜ çœŸå¯¦ä¸–ç•Œçš„æ²»ç™‚æ•ˆæœã€‚'},
    {q:'ä¸€é …RCTé¡¯ç¤ºæ–°è—¥çµ„äº‹ä»¶ç™¼ç”Ÿç‡15%ï¼Œå°ç…§çµ„25%ã€‚è«‹å•çµ•å°é¢¨éšªé™ä½(ARR)ç‚ºå¤šå°‘ï¼Ÿ',
     o:['10%','40%','60%','0.6'],
     c:0,
     e:'ARR = å°ç…§çµ„äº‹ä»¶ç‡ - æ²»ç™‚çµ„äº‹ä»¶ç‡ = 25% - 15% = 10%ã€‚ARRè¡¨ç¤ºçµ•å°é¢¨éšªé™ä½å¹…åº¦ï¼Œæ˜¯è¨ˆç®—NNTçš„åŸºç¤ã€‚'},
    {q:'æ‰¿ä¸Šé¡Œï¼ŒNNT (Number Needed to Treat) ç‚ºå¤šå°‘ï¼Ÿ',
     o:['0.1','4','10','25'],
     c:2,
     e:'NNT = 1/ARR = 1/0.10 = 10ã€‚é€™è¡¨ç¤ºéœ€è¦æ²»ç™‚10ä½ç—…äººï¼Œæ‰èƒ½å¤šé é˜²1ä½ç™¼ç”Ÿä¸è‰¯äº‹ä»¶ã€‚NNTè¶Šå°ä»£è¡¨æ²»ç™‚æ•ˆæœè¶Šå¥½ã€‚'},
    {q:'ä¸‹åˆ—ä½•è€…æ˜¯è©•ä¼°RCTå…§åœ¨æ•ˆåº¦(Internal Validity)çš„é‡è¦é …ç›®ï¼Ÿ',
     o:['ç ”ç©¶æ˜¯å¦ç‚ºå¤šä¸­å¿ƒåŸ·è¡Œ','æ˜¯å¦æœ‰é€²è¡Œæ¬¡æ—ç¾¤åˆ†æ','éš¨æ©Ÿåˆ†æ´¾åºåˆ—çš„ç”¢ç”Ÿæ–¹å¼','ç ”ç©¶ç¶“è²»ä¾†æº'],
     c:2,
     e:'å…§åœ¨æ•ˆåº¦è©•ä¼°ç ”ç©¶æœ¬èº«æ–¹æ³•å­¸çš„å“è³ªï¼ŒåŒ…æ‹¬ï¼šéš¨æ©Ÿåºåˆ—ç”¢ç”Ÿã€åˆ†é…éš±åŒ¿ã€ç›²åŒ–ã€çµæœè³‡æ–™å®Œæ•´æ€§ã€é¸æ“‡æ€§å ±å‘Šç­‰ã€‚é€™äº›éƒ½æ˜¯Cochrane Risk of Biaså·¥å…·çš„è©•ä¼°é …ç›®ã€‚'},
    {q:'ã€ŒPer-Protocol (PP)ã€åˆ†æç›¸è¼ƒæ–¼ITTåˆ†æï¼Œå…¶ä¸»è¦å•é¡Œç‚ºä½•ï¼Ÿ',
     o:['çµ±è¨ˆæª¢å®šåŠ›é™ä½','æœƒé«˜ä¼°æ²»ç™‚æ•ˆæœ','ç„¡æ³•è™•ç†ç¼ºå¤±è³‡æ–™','é•åç ”ç©¶å€«ç†'],
     c:1,
     e:'PPåˆ†æåªç´å…¥å®Œå…¨éµå¾æ²»ç™‚æ–¹æ¡ˆçš„å—è©¦è€…ï¼Œé€™æœƒç ´å£éš¨æ©ŸåŒ–å¸¶ä¾†çš„å¯æ¯”æ€§ã€‚é€šå¸¸é€€å‡ºæˆ–ä¸éµå¾çš„åŸå› èˆ‡é å¾Œç›¸é—œï¼Œå› æ­¤PPåˆ†æå‚¾å‘é«˜ä¼°æ²»ç™‚æ•ˆæœã€‚'},
    {q:'è©•ä¼°RCTæ™‚ï¼Œè‹¥å°ç…§çµ„ä½¿ç”¨ã€Œæ´»æ€§å°ç…§(Active Control)ã€è€Œéå®‰æ…°åŠ‘ï¼Œæ‡‰æ³¨æ„ä»€éº¼ï¼Ÿ',
     o:['åªèƒ½ä½¿ç”¨non-inferiorityè¨­è¨ˆ','éœ€è¦æ›´å¤§çš„æ¨£æœ¬æ•¸','ç ”ç©¶çµæœç„¡æ³•æ¨å»£','éœ€è€ƒæ…®å°ç…§è—¥ç‰©çš„å·²çŸ¥æ•ˆæœå¤§å°'],
     c:3,
     e:'ä½¿ç”¨æ´»æ€§å°ç…§æ™‚ï¼Œéœ€è¦äº†è§£å°ç…§è—¥ç‰©ç›¸è¼ƒæ–¼å®‰æ…°åŠ‘çš„å·²çŸ¥æ•ˆæœå¤§å°ï¼Œæ‰èƒ½æ­£ç¢ºè§£è®€ç ”ç©¶çµæœã€‚è‹¥å°ç…§è—¥ç‰©æ•ˆæœæœ¬èº«ä¸ç¢ºå®šï¼Œå¯èƒ½é›£ä»¥åˆ¤æ–·æ–°è—¥çš„çœŸå¯¦æ•ˆç›Šã€‚'},
    {q:'ä¸‹åˆ—é—œæ–¼95%ä¿¡è³´å€é–“(95% CI)çš„è§£è®€ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
     o:['æœ‰95%æ©Ÿç‡çœŸå€¼è½åœ¨æ­¤å€é–“å…§','è‹¥é‡è¤‡æŠ½æ¨£100æ¬¡ï¼Œç´„95æ¬¡çš„CIæœƒåŒ…å«çœŸå€¼','æ­¤å€é–“åŒ…å«95%çš„æ¨£æœ¬å€¼','På€¼å°æ–¼0.05æ™‚CIæ‰æœ‰æ„ç¾©'],
     c:1,
     e:'95% CIçš„æ­£ç¢ºè§£è®€ï¼šè‹¥ä»¥ç›¸åŒæ–¹æ³•é‡è¤‡æŠ½æ¨£ç„¡é™å¤šæ¬¡ï¼Œç´„æœ‰95%çš„ä¿¡è³´å€é–“æœƒåŒ…å«çœŸæ­£çš„æ¯ç¾¤é«”åƒæ•¸å€¼ã€‚å–®ä¸€CIä¸èƒ½èªªã€Œæœ‰95%æ©Ÿç‡åŒ…å«çœŸå€¼ã€ã€‚'},
    {q:'è©•è®€RCTæ™‚ï¼Œä¸‹åˆ—ä½•è€…æœ€èƒ½åæ˜ ç ”ç©¶çµæœçš„è‡¨åºŠé‡è¦æ€§ï¼Ÿ',
     o:['På€¼å¤§å°','95%ä¿¡è³´å€é–“å¯¬åº¦','æ•ˆæœé‡(Effect Size)èˆ‡NNT','æ¨£æœ¬æ•¸å¤§å°'],
     c:2,
     e:'På€¼åªèªªæ˜çµ±è¨ˆé¡¯è‘—æ€§ï¼Œä¸ä»£è¡¨è‡¨åºŠé‡è¦æ€§ã€‚æ•ˆæœé‡(å¦‚RRã€ARR)å’ŒNNTèƒ½ç›´æ¥åæ˜ æ²»ç™‚æ•ˆæœçš„å¤§å°å’Œè‡¨åºŠæ„ç¾©ã€‚å¤§æ¨£æœ¬ç ”ç©¶å¯èƒ½ç™¼ç¾çµ±è¨ˆé¡¯è‘—ä½†è‡¨åºŠæ„ç¾©ä¸å¤§çš„å·®ç•°ã€‚'}
];

const App=()=>{
    const[page,setPage]=useState('home');
    const[lessonId,setLessonId]=useState(1);
    const[qIdx,setQIdx]=useState(0);
    const[score,setScore]=useState(0);
    const[sel,setSel]=useState(null);
    const[show,setShow]=useState(false);
    const[done,setDone]=useState(false);
    const[quizStartTime,setQuizStartTime]=useState(null);

    useEffect(()=>{if(page==='quiz'&&!done&&!quizStartTime)setQuizStartTime(Date.now())},[page,done]);
    useEffect(()=>{if(done&&quizStartTime){const t=Math.round((Date.now()-quizStartTime)/1000);ProgressTracker.saveQuizResult(MODULE_ID,score,quiz.length,t)}},[done]);

    const Header=({title})=>(
        <header style={{background:'#fff',borderBottom:'1px solid #eee',padding:'12px 16px',position:'sticky',top:0,zIndex:10}}>
            <div style={{maxWidth:480,margin:'0 auto',display:'flex',alignItems:'center',gap:12}}>
                <button onClick={()=>page==='home'?window.location.href='index.html':setPage('home')} style={{background:'linear-gradient(135deg,#E6FAF8,#D4F5F2)',border:'none',borderRadius:10,width:40,height:40,cursor:'pointer',color:'var(--pri-dark)',display:'flex',alignItems:'center',justifyContent:'center'}}>
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                </button>
                <span style={{fontWeight:700,color:'var(--pri-dark)'}}>{title}</span>
            </div>
        </header>
    );

    const Home=()=>(
        <div>
            <Header title="RCT è©•è®€"/>
            <div style={{background:'linear-gradient(135deg,#2EC4B6,#06D6A0)',padding:'32px 20px',color:'#fff'}}>
                <div style={{maxWidth:480,margin:'0 auto'}}>
                    <div style={{background:'rgba(255,255,255,0.2)',display:'inline-block',padding:'6px 14px',borderRadius:50,fontSize:12,fontWeight:600,marginBottom:16}}>ğŸ”¬ Randomized Controlled Trial</div>
                    <h1 style={{fontSize:26,fontWeight:700,marginBottom:12}}>éš¨æ©Ÿå°ç…§è©¦é©—è©•è®€</h1>
                    <p style={{opacity:0.9,fontSize:14}}>æŒæ¡RCTè©•è®€è¦é»ï¼Œå­¸ç¿’è©•ä¼°æ²»ç™‚æ•ˆæœçš„é»ƒé‡‘æ¨™æº–</p>
                </div>
            </div>
            <div style={{padding:'0 16px',marginTop:-20}}>
                <div style={{maxWidth:480,margin:'0 auto'}}>
                    <div className="card">
                        <h3 style={{fontSize:16,fontWeight:700,color:'var(--pri-dark)',marginBottom:12}}>ğŸ¯ å­¸ç¿’ç›®æ¨™</h3>
                        {['ç†è§£RCTè¨­è¨ˆåŸç†èˆ‡å„ªå‹¢','æŒæ¡éš¨æ©ŸåŒ–èˆ‡ç›²åŒ–çš„é‡è¦æ€§','å­¸æœƒè©•ä¼°åå·®é¢¨éšª(Risk of Bias)','è¨ˆç®—ä¸¦è§£è®€æ•ˆæœé‡èˆ‡NNT','æ‡‰ç”¨CONSORTè²æ˜è©•è®€RCT'].map((t,i)=>(
                            <div key={i} style={{display:'flex',gap:10,marginBottom:8,fontSize:14}}>
                                <span style={{background:'var(--pri)',color:'#fff',borderRadius:6,width:22,height:22,display:'flex',alignItems:'center',justifyContent:'center',fontSize:12,flexShrink:0}}>{i+1}</span>
                                <span style={{color:'var(--txt2)'}}>{t}</span>
                            </div>
                        ))}
                    </div>

                    <div className="info">
                        <strong style={{color:'var(--pri-dark)'}}>ğŸ’¡ ç‚ºä»€éº¼è¦å­¸ç¿’RCTè©•è®€ï¼Ÿ</strong><br/>
                        <span style={{fontSize:14,color:'var(--txt2)'}}>
                        RCTæ˜¯è©•ä¼°æ²»ç™‚æ•ˆæœæœ€åš´è¬¹çš„ç ”ç©¶è¨­è¨ˆï¼Œæ­£ç¢ºè©•è®€RCTèƒ½å¹«åŠ©æ‚¨ï¼š<br/>
                        â€¢ åˆ¤æ–·æ–°ç™‚æ³•æ˜¯å¦çœŸçš„æœ‰æ•ˆ<br/>
                        â€¢ é¿å…è¢«çµ±è¨ˆé¡¯è‘—æ€§èª¤å°<br/>
                        â€¢ åšå‡ºä»¥è­‰æ“šç‚ºåŸºç¤çš„è‡¨åºŠæ±ºç­–
                        </span>
                    </div>

                    <h3 style={{fontSize:18,fontWeight:700,marginBottom:16}}>ğŸ“– èª²ç¨‹å…§å®¹</h3>
                    {lessons.map(l=>(
                        <div key={l.id} className="card" onClick={()=>{setLessonId(l.id);setPage('lesson')}} style={{cursor:'pointer',transition:'all 0.3s'}}>
                            <div style={{display:'flex',alignItems:'center',gap:16}}>
                                <div style={{width:48,height:48,borderRadius:12,background:`linear-gradient(135deg,${l.color},${l.color}88)`,display:'flex',alignItems:'center',justifyContent:'center',color:'#fff',fontWeight:700}}>{l.id}</div>
                                <div style={{flex:1}}>
                                    <div style={{fontSize:11,color:l.color,fontWeight:600}}>Lesson {l.id}</div>
                                    <div style={{fontSize:16,fontWeight:700}}>{l.title}</div>
                                    <div style={{fontSize:13,color:'var(--txt2)'}}>{l.sub}</div>
                                </div>
                                <svg viewBox="0 0 24 24" fill={l.color} width="20" height="20"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/></svg>
                            </div>
                        </div>
                    ))}
                    <button className="btn btn-acc" onClick={()=>{setQIdx(0);setScore(0);setSel(null);setShow(false);setDone(false);setPage('quiz')}} style={{width:'100%',justifyContent:'center',marginTop:20,marginBottom:32}}>
                        ğŸ“ é–‹å§‹æ¸¬é©— (10é¡Œ)
                    </button>
                </div>
            </div>
            <footer style={{background:'linear-gradient(135deg,#E6FAF8,#D4F5F2)',padding:'24px 16px',textAlign:'center'}}>
                <p style={{fontSize:13,color:'var(--txt2)'}}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨</p>
                <p style={{fontSize:12,color:'var(--txt2)'}}>è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
            </footer>
        </div>
    );

    const L1=()=>(
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pri-dark)',marginBottom:16}}>ğŸ”¬ ä»€éº¼æ˜¯ RCTï¼Ÿ</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:16}}>
                    <strong>éš¨æ©Ÿå°ç…§è©¦é©— (Randomized Controlled Trial)</strong> æ˜¯è©•ä¼°æ²»ç™‚æ•ˆæœæœ€åš´è¬¹çš„ç ”ç©¶è¨­è¨ˆï¼Œè¢«ç¨±ç‚ºã€Œæ²»ç™‚ç ”ç©¶çš„é»ƒé‡‘æ¨™æº–ã€ã€‚
                </p>
                <div className="formula">
                    éš¨æ©Ÿåˆ†æ´¾ + å°ç…§çµ„ + å‰ç»æ€§è¿½è¹¤ = RCT
                </div>
            </div>

            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--blue)',marginBottom:12}}>ğŸ“Š RCT è¨­è¨ˆæµç¨‹</h3>
                {[
                    {num:'1',title:'æ‹›å‹Ÿç¬¦åˆæ¢ä»¶çš„å—è©¦è€…',desc:'è¨­å®šç´å…¥/æ’é™¤æ¢ä»¶',color:'#2EC4B6'},
                    {num:'2',title:'éš¨æ©Ÿåˆ†æ´¾ (Randomization)',desc:'éš¨æ©Ÿåˆ†é…è‡³æ²»ç™‚çµ„æˆ–å°ç…§çµ„',color:'#0077B6'},
                    {num:'3',title:'ä»‹å…¥æªæ–½ (Intervention)',desc:'æ²»ç™‚çµ„æ¥å—æ–°æ²»ç™‚ï¼Œå°ç…§çµ„æ¥å—å°ç…§è™•ç½®',color:'#7209B7'},
                    {num:'4',title:'è¿½è¹¤è§€å¯Ÿ (Follow-up)',desc:'å‰ç»æ€§è¿½è¹¤é å®šçµæœæŒ‡æ¨™',color:'#FF6B35'},
                    {num:'5',title:'çµæœåˆ†æ (Analysis)',desc:'æ¯”è¼ƒå…©çµ„çµæœå·®ç•°',color:'#38A169'}
                ].map((step,i)=>(
                    <div key={i} className="flow-step">
                        <div className="flow-num" style={{background:step.color,color:'#fff'}}>{step.num}</div>
                        <div>
                            <div style={{fontWeight:600,fontSize:14}}>{step.title}</div>
                            <div style={{fontSize:13,color:'var(--txt2)'}}>{step.desc}</div>
                        </div>
                    </div>
                ))}
            </div>

            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--suc)',marginBottom:12}}>âœ… RCT çš„å„ªå‹¢</h3>
                <table>
                    <thead><tr><th>ç‰¹é»</th><th>èªªæ˜</th></tr></thead>
                    <tbody>
                        <tr><td style={{fontWeight:600}}>æ¸›å°‘é¸æ“‡åå·®</td><td>éš¨æ©Ÿåˆ†æ´¾ä½¿å…©çµ„åŸºç·šç‰¹æ€§ç›¸ä¼¼</td></tr>
                        <tr><td style={{fontWeight:600}}>æ§åˆ¶å¹²æ“¾å› å­</td><td>å¹³è¡¡å·²çŸ¥èˆ‡æœªçŸ¥çš„å¹²æ“¾å› å­</td></tr>
                        <tr><td style={{fontWeight:600}}>å› æœæ¨è«–</td><td>å¯å»ºç«‹ä»‹å…¥èˆ‡çµæœçš„å› æœé—œä¿‚</td></tr>
                        <tr><td style={{fontWeight:600}}>å‰ç»æ€§è¨­è¨ˆ</td><td>è³‡æ–™æ”¶é›†æ¨™æº–åŒ–ï¼Œæ¸›å°‘å›æ†¶åå·®</td></tr>
                    </tbody>
                </table>
            </div>

            <div className="warn">
                <strong style={{color:'#B7791F'}}>âš ï¸ RCT çš„é™åˆ¶</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                â€¢ è€—æ™‚è²»ç”¨é«˜<br/>
                â€¢ å¯èƒ½æœ‰å¤–æ¨æ€§(External Validity)é™åˆ¶<br/>
                â€¢ éƒ¨åˆ†ç ”ç©¶å•é¡Œç„¡æ³•é€²è¡Œéš¨æ©Ÿåˆ†æ´¾ï¼ˆå¦‚ï¼šå¸è¸è‡´ç™Œï¼‰<br/>
                â€¢ å€«ç†è€ƒé‡å¯èƒ½é™åˆ¶ç ”ç©¶è¨­è¨ˆ
                </span>
            </div>

            <div className="good">
                <strong style={{color:'var(--suc)'}}>ğŸ’¡ è¨˜æ†¶è¦é»</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                RCT = <strong>R</strong>andomization (éš¨æ©Ÿ) + <strong>C</strong>ontrol (å°ç…§) + <strong>T</strong>rial (è©¦é©—)<br/>
                ä¸‰å¤§è¦ç´ ç¼ºä¸€ä¸å¯ï¼
                </span>
            </div>
        </div>
    );

    const L2=()=>(
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--blue)',marginBottom:16}}>ğŸ² éš¨æ©ŸåŒ– Randomization</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:12}}>
                    éš¨æ©ŸåŒ–æ˜¯RCTçš„æ ¸å¿ƒï¼Œç¢ºä¿æ¯ä½å—è©¦è€…è¢«åˆ†åˆ°å„çµ„çš„æ©Ÿæœƒç›¸ç­‰ä¸”ä¸å¯é æ¸¬ã€‚
                </p>
                
                <h4 style={{fontSize:15,fontWeight:600,color:'var(--blue)',marginTop:16,marginBottom:8}}>éš¨æ©ŸåŒ–çš„é¡å‹</h4>
                <table>
                    <thead><tr><th>é¡å‹</th><th>èªªæ˜</th><th>å„ªé»</th></tr></thead>
                    <tbody>
                        <tr><td style={{fontWeight:600}}>ç°¡å–®éš¨æ©Ÿ</td><td>å¦‚æ“²ç¡¬å¹£</td><td>æœ€ç°¡å–®</td></tr>
                        <tr><td style={{fontWeight:600}}>å€å¡Šéš¨æ©Ÿ</td><td>å›ºå®šå€å¡Šå…§å¹³è¡¡åˆ†çµ„</td><td>ç¢ºä¿çµ„åˆ¥äººæ•¸å¹³è¡¡</td></tr>
                        <tr><td style={{fontWeight:600}}>åˆ†å±¤éš¨æ©Ÿ</td><td>ä¾é‡è¦è®Šé …åˆ†å±¤å¾Œéš¨æ©Ÿ</td><td>æ§åˆ¶é‡è¦é å¾Œå› å­</td></tr>
                        <tr><td style={{fontWeight:600}}>é©æ‡‰æ€§éš¨æ©Ÿ</td><td>å‹•æ…‹èª¿æ•´åˆ†æ´¾æ©Ÿç‡</td><td>å³æ™‚å¹³è¡¡åŸºç·šç‰¹æ€§</td></tr>
                    </tbody>
                </table>
            </div>

            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pur)',marginBottom:12}}>ğŸ” åˆ†é…éš±åŒ¿ Allocation Concealment</h3>
                <div className="formula" style={{background:'linear-gradient(135deg,#F3E5F5,#E1BEE7)',borderColor:'var(--pur)'}}>
                    åˆ†é…éš±åŒ¿ â‰  ç›²åŒ–
                </div>
                <div style={{fontSize:14,color:'var(--txt2)',marginTop:12}}>
                    <strong>åˆ†é…éš±åŒ¿ï¼š</strong>ç¢ºä¿åœ¨åˆ†æ´¾<strong>ä¹‹å‰</strong>ï¼Œç ”ç©¶äººå“¡ç„¡æ³•é æ¸¬ä¸‹ä¸€ä½å—è©¦è€…æœƒè¢«åˆ†åˆ°å“ªä¸€çµ„ã€‚
                </div>
                
                <div className="info" style={{marginTop:12}}>
                    <strong style={{color:'var(--pri-dark)'}}>å¸¸è¦‹çš„åˆ†é…éš±åŒ¿æ–¹æ³•</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ ä¸­å¤®éš¨æ©Ÿç³»çµ±ï¼ˆé›»è©±/ç¶²è·¯ï¼‰<br/>
                    â€¢ ä¸é€æ˜å¯†å°ä¿¡å°<br/>
                    â€¢ è—¥å±€é…è—¥ç³»çµ±
                    </span>
                </div>
            </div>

            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'#E53E3E',marginBottom:12}}>ğŸ‘ï¸ ç›²åŒ– Blinding</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:12}}>
                    ç›²åŒ–æ˜¯åœ¨åˆ†æ´¾<strong>ä¹‹å¾Œ</strong>ï¼Œéš±è—åˆ†çµ„è¨Šæ¯ä»¥æ¸›å°‘è³‡è¨Šåå·®ã€‚
                </p>
                <table>
                    <thead><tr><th>ç›²åŒ–å±¤ç´š</th><th>ä¸çŸ¥é“åˆ†çµ„çš„äºº</th></tr></thead>
                    <tbody>
                        <tr><td style={{fontWeight:600,color:'var(--pri)'}}>å–®ç›²</td><td>å—è©¦è€…</td></tr>
                        <tr><td style={{fontWeight:600,color:'var(--blue)'}}>é›™ç›²</td><td>å—è©¦è€… + ç ”ç©¶äººå“¡</td></tr>
                        <tr><td style={{fontWeight:600,color:'var(--pur)'}}>ä¸‰ç›²</td><td>å—è©¦è€… + ç ”ç©¶äººå“¡ + è³‡æ–™åˆ†æè€…</td></tr>
                    </tbody>
                </table>

                <div className="err" style={{marginTop:12}}>
                    <strong style={{color:'var(--err)'}}>âš ï¸ ç„¡æ³•ç›²åŒ–çš„æƒ…æ³</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ æ‰‹è¡“ vs è—¥ç‰©æ²»ç™‚<br/>
                    â€¢ æ˜é¡¯å¯è¾¨è­˜çš„ä»‹å…¥ï¼ˆå¦‚é‡ç¸ã€ç‰©ç†æ²»ç™‚ï¼‰<br/>
                    â†’ æ­¤æ™‚æ‡‰ç¢ºä¿ã€Œçµæœè©•ä¼°è€…ã€ç›²åŒ–
                    </span>
                </div>
            </div>

            <div className="good">
                <strong style={{color:'var(--suc)'}}>ğŸ’¡ é—œéµæ¯”è¼ƒ</strong><br/>
                <table style={{marginTop:8}}>
                    <thead><tr><th></th><th>åˆ†é…éš±åŒ¿</th><th>ç›²åŒ–</th></tr></thead>
                    <tbody>
                        <tr><td style={{fontWeight:600}}>æ™‚æ©Ÿ</td><td>åˆ†æ´¾å‰</td><td>åˆ†æ´¾å¾Œ</td></tr>
                        <tr><td style={{fontWeight:600}}>ç›®çš„</td><td>é˜²æ­¢é¸æ“‡åå·®</td><td>é˜²æ­¢è³‡è¨Šåå·®</td></tr>
                        <tr><td style={{fontWeight:600}}>é©ç”¨æ€§</td><td>æ‰€æœ‰RCTéƒ½éœ€è¦</td><td>è¦–æƒ…æ³è€Œå®š</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    );

    const L3=()=>(
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pur)',marginBottom:16}}>âš–ï¸ åå·®é¢¨éšªè©•ä¼°</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:12}}>
                    <strong>Cochrane Risk of Bias (RoB 2.0)</strong> æ˜¯è©•ä¼°RCTåå·®é¢¨éšªçš„æ¨™æº–å·¥å…·ã€‚
                </p>
            </div>

            <div className="card">
                <h3 style={{fontSize:16,fontWeight:700,color:'var(--blue)',marginBottom:12}}>ğŸ“‹ RoB 2.0 äº”å¤§è©•ä¼°é ˜åŸŸ</h3>
                
                {[
                    {domain:'D1: éš¨æ©ŸåŒ–éç¨‹',items:['éš¨æ©Ÿåºåˆ—ç”¢ç”Ÿæ–¹æ³•','åˆ†é…éš±åŒ¿æ˜¯å¦é©ç•¶','åŸºç·šç‰¹æ€§æ˜¯å¦å¹³è¡¡'],color:'#2EC4B6'},
                    {domain:'D2: åé›¢é å®šä»‹å…¥',items:['å—è©¦è€…æ˜¯å¦çŸ¥é“åˆ†çµ„','ç…§è­·è€…æ˜¯å¦çŸ¥é“åˆ†çµ„','æ˜¯å¦å› æ­¤å½±éŸ¿ä»‹å…¥'],color:'#0077B6'},
                    {domain:'D3: çµæœè³‡æ–™ç¼ºå¤±',items:['çµæœè³‡æ–™æ˜¯å¦å®Œæ•´','ç¼ºå¤±åŸå› æ˜¯å¦èˆ‡çµæœç›¸é—œ','æ˜¯å¦æœ‰é©ç•¶è™•ç†æ–¹æ³•'],color:'#7209B7'},
                    {domain:'D4: çµæœæ¸¬é‡',items:['æ¸¬é‡æ–¹æ³•æ˜¯å¦é©ç•¶','è©•ä¼°è€…æ˜¯å¦çŸ¥é“åˆ†çµ„','æ¸¬é‡æ˜¯å¦å¯èƒ½å—å½±éŸ¿'],color:'#FF6B35'},
                    {domain:'D5: é¸æ“‡æ€§å ±å‘Š',items:['æ˜¯å¦ä¾é å®šè¨ˆç•«åˆ†æ','æ˜¯å¦å ±å‘Šæ‰€æœ‰çµæœ','æ˜¯å¦æœ‰é¸æ“‡æ€§å‘ˆç¾'],color:'#38A169'}
                ].map((d,i)=>(
                    <div key={i} style={{marginBottom:16,padding:12,background:'#f8f9fa',borderRadius:12,borderLeft:`4px solid ${d.color}`}}>
                        <div style={{fontWeight:700,color:d.color,marginBottom:8}}>{d.domain}</div>
                        {d.items.map((item,j)=>(
                            <div key={j} style={{fontSize:13,color:'var(--txt2)',marginLeft:8,marginBottom:4}}>â€¢ {item}</div>
                        ))}
                    </div>
                ))}
            </div>

            <div className="card">
                <h3 style={{fontSize:16,fontWeight:700,color:'var(--suc)',marginBottom:12}}>ğŸš¦ åå·®é¢¨éšªåˆ¤å®š</h3>
                <table>
                    <thead><tr><th>åˆ¤å®š</th><th style={{textAlign:'center'}}>é¡è‰²</th><th>èªªæ˜</th></tr></thead>
                    <tbody>
                        <tr>
                            <td style={{fontWeight:600}}>Low risk</td>
                            <td style={{textAlign:'center'}}><span style={{display:'inline-block',width:20,height:20,borderRadius:'50%',background:'#38A169'}}></span></td>
                            <td>ä½åå·®é¢¨éšª</td>
                        </tr>
                        <tr>
                            <td style={{fontWeight:600}}>Some concerns</td>
                            <td style={{textAlign:'center'}}><span style={{display:'inline-block',width:20,height:20,borderRadius:'50%',background:'#FFBE0B'}}></span></td>
                            <td>æœ‰ä¸€äº›ç–‘æ…®</td>
                        </tr>
                        <tr>
                            <td style={{fontWeight:600}}>High risk</td>
                            <td style={{textAlign:'center'}}><span style={{display:'inline-block',width:20,height:20,borderRadius:'50%',background:'#EF476F'}}></span></td>
                            <td>é«˜åå·®é¢¨éšª</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div className="tip">
                <strong style={{color:'var(--acc)'}}>ğŸ“Œ è©•è®€é‡é»æª¢æ ¸</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                é–±è®€RCTæ™‚ï¼Œä¾åºç¢ºèªï¼š<br/>
                âœ“ éš¨æ©Ÿæ–¹æ³•æ˜¯å¦é©ç•¶ï¼Ÿ<br/>
                âœ“ åˆ†é…éš±åŒ¿æ˜¯å¦åŸ·è¡Œï¼Ÿ<br/>
                âœ“ ç›²åŒ–æ˜¯å¦æˆåŠŸï¼Ÿ<br/>
                âœ“ è¿½è¹¤æ˜¯å¦å®Œæ•´ï¼Ÿ<br/>
                âœ“ æ˜¯å¦ä½¿ç”¨ITTåˆ†æï¼Ÿ
                </span>
            </div>
        </div>
    );

    const L4=()=>(
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--acc)',marginBottom:16}}>ğŸ“Š æ•ˆæœé‡æŒ‡æ¨™</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:12}}>
                    è©•ä¼°æ²»ç™‚æ•ˆæœä¸èƒ½åªçœ‹På€¼ï¼Œæ›´è¦çœ‹æ•ˆæœé‡çš„å¤§å°å’Œè‡¨åºŠæ„ç¾©ã€‚
                </p>
            </div>

            <div className="card">
                <h3 style={{fontSize:16,fontWeight:700,color:'var(--pri-dark)',marginBottom:12}}>ğŸ“ˆ å¸¸ç”¨æ•ˆæœé‡æŒ‡æ¨™</h3>
                <table>
                    <thead><tr><th>æŒ‡æ¨™</th><th>å…¬å¼</th><th>ç”¨é€”</th></tr></thead>
                    <tbody>
                        <tr><td style={{fontWeight:600}}>RR ç›¸å°é¢¨éšª</td><td>æ²»ç™‚çµ„äº‹ä»¶ç‡/å°ç…§çµ„äº‹ä»¶ç‡</td><td>é¢¨éšªæ¯”è¼ƒ</td></tr>
                        <tr><td style={{fontWeight:600}}>RRR ç›¸å°é¢¨éšªé™ä½</td><td>1 - RR</td><td>ç›¸å°æ•ˆç›Š</td></tr>
                        <tr><td style={{fontWeight:600}}>ARR çµ•å°é¢¨éšªé™ä½</td><td>å°ç…§çµ„ç‡ - æ²»ç™‚çµ„ç‡</td><td>çµ•å°æ•ˆç›Š</td></tr>
                        <tr><td style={{fontWeight:600}}>OR å‹ç®—æ¯”</td><td>(aÃ—d)/(bÃ—c)</td><td>ç½•è¦‹äº‹ä»¶</td></tr>
                    </tbody>
                </table>
            </div>

            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--suc)',marginBottom:12}}>ğŸ¯ NNT æ²»ç™‚æ‰€éœ€äººæ•¸</h3>
                <div className="formula">
                    NNT = 1 / ARR = 1 / (CER - EER)
                </div>
                <p style={{fontSize:14,color:'var(--txt2)',marginTop:12}}>
                    <strong>NNT çš„æ„ç¾©ï¼š</strong>éœ€è¦æ²»ç™‚å¤šå°‘äººï¼Œæ‰èƒ½é¡å¤–é é˜²1äººç™¼ç”Ÿä¸è‰¯äº‹ä»¶ã€‚
                </p>
                
                <div className="good" style={{marginTop:12}}>
                    <strong style={{color:'var(--suc)'}}>NNT è§£è®€ç¯„ä¾‹</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ NNT = 10ï¼šæ²»ç™‚10äººå¯å¤šé é˜²1äººç™¼ç”Ÿäº‹ä»¶<br/>
                    â€¢ NNT = 100ï¼šæ²»ç™‚100äººæ‰èƒ½å¤šé é˜²1äºº<br/>
                    â€¢ <strong>NNT è¶Šå° = æ²»ç™‚æ•ˆæœè¶Šå¥½</strong>
                    </span>
                </div>
            </div>

            <div className="card" style={{background:'linear-gradient(135deg,#FFF9F0,#FFF)'}}>
                <h3 style={{fontSize:16,fontWeight:700,color:'var(--acc)',marginBottom:12}}>ğŸ“ è¨ˆç®—ç¯„ä¾‹</h3>
                <div style={{background:'#fff',padding:16,borderRadius:12,border:'1px solid #eee'}}>
                    <p style={{fontWeight:600,marginBottom:12}}>æŸå¿ƒè¡€ç®¡ç ”ç©¶çµæœï¼š</p>
                    <table style={{marginBottom:12}}>
                        <tbody>
                            <tr><td>æ²»ç™‚çµ„äº‹ä»¶ç‡ (EER)</td><td style={{fontWeight:600}}>12%</td></tr>
                            <tr><td>å°ç…§çµ„äº‹ä»¶ç‡ (CER)</td><td style={{fontWeight:600}}>20%</td></tr>
                        </tbody>
                    </table>
                    
                    <div style={{background:'#E6FAF8',padding:12,borderRadius:8,fontSize:14}}>
                        <strong>è¨ˆç®—ï¼š</strong><br/>
                        â€¢ RR = 12% / 20% = <strong>0.60</strong><br/>
                        â€¢ RRR = 1 - 0.60 = <strong>40%</strong> (ç›¸å°é¢¨éšªé™ä½40%)<br/>
                        â€¢ ARR = 20% - 12% = <strong>8%</strong> (çµ•å°é¢¨éšªé™ä½8%)<br/>
                        â€¢ NNT = 1 / 0.08 = <strong>12.5 â‰ˆ 13</strong>
                    </div>
                    
                    <div className="info" style={{marginTop:12}}>
                        <strong>è‡¨åºŠè§£è®€ï¼š</strong>æ²»ç™‚13ä½ç—…äººï¼Œå¯é¡å¤–é é˜²1ä½ç™¼ç”Ÿå¿ƒè¡€ç®¡äº‹ä»¶ã€‚
                    </div>
                </div>
            </div>

            <div className="err">
                <strong style={{color:'var(--err)'}}>âš ï¸ NNH å‚·å®³æ‰€éœ€äººæ•¸</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                NNH = 1 / ARI (çµ•å°é¢¨éšªå¢åŠ )<br/>
                ç”¨æ–¼è©•ä¼°å‰¯ä½œç”¨ï¼šæ²»ç™‚å¤šå°‘äººæœƒå¤šé€ æˆ1äººå—å®³<br/>
                <strong>NNT vs NNH çš„æ¬Šè¡¡æ˜¯è‡¨åºŠæ±ºç­–çš„é—œéµï¼</strong>
                </span>
            </div>
        </div>
    );

    const L5=()=>(
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--suc)',marginBottom:16}}>ğŸ“‹ CONSORT è²æ˜</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:12}}>
                    <strong>CONSORT (Consolidated Standards of Reporting Trials)</strong> æ˜¯RCTå ±å‘Šçš„åœ‹éš›æ¨™æº–ï¼ŒåŒ…å«25é …æª¢æ ¸é …ç›®ã€‚
                </p>
            </div>

            <div className="card">
                <h3 style={{fontSize:16,fontWeight:700,color:'var(--blue)',marginBottom:12}}>âœ… è©•è®€RCTå¿«é€Ÿæª¢æ ¸è¡¨</h3>
                
                {[
                    {cat:'æ–¹æ³•å­¸å“è³ª',items:[
                        {q:'éš¨æ©Ÿæ–¹æ³•æ˜¯å¦æ˜ç¢ºæè¿°ï¼Ÿ',good:'é›»è…¦äº‚æ•¸ç”¢ç”Ÿ',bad:'æœªèªªæ˜æˆ–ä¾¿åˆ©æŠ½æ¨£'},
                        {q:'åˆ†é…éš±åŒ¿æ˜¯å¦é©ç•¶ï¼Ÿ',good:'ä¸­å¤®éš¨æ©Ÿç³»çµ±',bad:'æœªéš±åŒ¿æˆ–å¯é æ¸¬'},
                        {q:'ç›²åŒ–æ˜¯å¦åŸ·è¡Œï¼Ÿ',good:'é›™ç›²æˆ–çµæœè©•ä¼°è€…ç›²åŒ–',bad:'é–‹æ”¾æ¨™ç±¤ä¸”çµæœä¸»è§€'}
                    ]},
                    {cat:'çµæœåˆ†æ',items:[
                        {q:'æ˜¯å¦ä½¿ç”¨ITTåˆ†æï¼Ÿ',good:'æ‰€æœ‰éš¨æ©Ÿè€…éƒ½ç´å…¥åˆ†æ',bad:'åªåˆ†æå®Œæˆè€…(PP)'},
                        {q:'è¿½è¹¤å®Œæ•´æ€§å¦‚ä½•ï¼Ÿ',good:'å¤±è¨ªç‡<20%ä¸”çµ„é–“ç›¸è¿‘',bad:'å¤§é‡å¤±è¨ªæˆ–çµ„é–“ä¸å¹³è¡¡'},
                        {q:'æ˜¯å¦æœ‰é¸æ“‡æ€§å ±å‘Šï¼Ÿ',good:'ä¾é è¨»å†Šæ–¹æ¡ˆå ±å‘Š',bad:'åªå ±å‘Šæœ‰åˆ©çµæœ'}
                    ]},
                    {cat:'è‡¨åºŠé©ç”¨æ€§',items:[
                        {q:'ç ”ç©¶æ—ç¾¤æ˜¯å¦é©ç”¨ï¼Ÿ',good:'èˆ‡æ‚¨çš„ç—…äººç›¸ä¼¼',bad:'åš´æ ¼æ’é™¤æ¢ä»¶'},
                        {q:'ä»‹å…¥æªæ–½æ˜¯å¦å¯è¡Œï¼Ÿ',good:'æ‚¨çš„ç’°å¢ƒå¯åŸ·è¡Œ',bad:'éœ€ç‰¹æ®Šè¨­å‚™æˆ–å°ˆæ¥­'},
                        {q:'çµæœæ˜¯å¦æœ‰è‡¨åºŠæ„ç¾©ï¼Ÿ',good:'NNTåˆç†ã€æ•ˆæœé‡å¤§',bad:'çµ±è¨ˆé¡¯è‘—ä½†æ•ˆæœå¾®å°'}
                    ]}
                ].map((section,i)=>(
                    <div key={i} style={{marginBottom:16}}>
                        <div style={{fontWeight:700,color:'var(--pri-dark)',marginBottom:8,fontSize:15}}>{section.cat}</div>
                        {section.items.map((item,j)=>(
                            <div key={j} className="checklist-item">
                                <div style={{flex:1}}>
                                    <div style={{fontWeight:600,fontSize:14,marginBottom:4}}>{item.q}</div>
                                    <div style={{fontSize:12}}>
                                        <span style={{color:'var(--suc)'}}>âœ“ {item.good}</span><br/>
                                        <span style={{color:'var(--err)'}}>âœ— {item.bad}</span>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                ))}
            </div>

            <div className="card" style={{background:'linear-gradient(135deg,#F0FFF4,#FFF)'}}>
                <h3 style={{fontSize:16,fontWeight:700,color:'var(--suc)',marginBottom:12}}>ğŸ¯ å¯¦å‹™è©•è®€ç¯„ä¾‹</h3>
                <div style={{background:'#fff',padding:16,borderRadius:12,border:'1px solid #ddd'}}>
                    <p style={{fontWeight:600,marginBottom:8}}>ç ”ç©¶æ‘˜è¦ï¼š</p>
                    <p style={{fontSize:14,color:'var(--txt2)',marginBottom:12}}>
                        ã€Œä¸€é …é›™ç›²RCTæ¯”è¼ƒæ–°è—¥Aèˆ‡å®‰æ…°åŠ‘å°å¿ƒè¡°ç«­ç—…äººä½é™¢ç‡çš„å½±éŸ¿ã€‚500äººéš¨æ©Ÿåˆ†æ´¾ï¼Œè¿½è¹¤1å¹´ã€‚ITTåˆ†æé¡¯ç¤ºï¼Œæ–°è—¥çµ„ä½é™¢ç‡18% vs å°ç…§çµ„28%ï¼ŒRR 0.64 (95% CI 0.48-0.85)ï¼ŒP=0.002ã€‚ã€
                    </p>
                    
                    <div style={{background:'#E6FAF8',padding:12,borderRadius:8}}>
                        <strong style={{color:'var(--pri-dark)'}}>è©•è®€è¦é»ï¼š</strong><br/>
                        <span style={{fontSize:14}}>
                        âœ“ é›™ç›²è¨­è¨ˆè‰¯å¥½<br/>
                        âœ“ ä½¿ç”¨ITTåˆ†æ<br/>
                        âœ“ 95% CIä¸åŒ…å«1ï¼Œçµ±è¨ˆé¡¯è‘—<br/>
                        âœ“ ARR = 10%ï¼ŒNNT = 10<br/>
                        â†’ è‡¨åºŠæ„ç¾©æ˜ç¢ºï¼Œæ²»ç™‚æ•ˆæœä½³
                        </span>
                    </div>
                </div>
            </div>

            <div className="tip">
                <strong style={{color:'var(--acc)'}}>ğŸ“Œ è©•è®€ä¸‰å•</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                1. <strong>ç ”ç©¶çµæœå¯ä¿¡å—ï¼Ÿ</strong>ï¼ˆå…§åœ¨æ•ˆåº¦ï¼‰<br/>
                2. <strong>çµæœæ˜¯ä»€éº¼ï¼Ÿ</strong>ï¼ˆæ•ˆæœé‡èˆ‡ç²¾ç¢ºåº¦ï¼‰<br/>
                3. <strong>çµæœå°æˆ‘çš„ç—…äººæœ‰å¹«åŠ©å—ï¼Ÿ</strong>ï¼ˆå¤–åœ¨æ•ˆåº¦ï¼‰
                </span>
            </div>
        </div>
    );

    const Lesson=()=>{
        const l=lessons.find(x=>x.id===lessonId);
        return(
            <div>
                <Header title={l.title}/>
                <div style={{background:`linear-gradient(135deg,${l.color},${l.color}88)`,padding:'20px',color:'#fff'}}>
                    <div style={{maxWidth:480,margin:'0 auto'}}>
                        <div style={{fontSize:12,opacity:0.9}}>Lesson {l.id} â€¢ {l.sub}</div>
                        <h1 style={{fontSize:24,fontWeight:700}}>{l.title}</h1>
                    </div>
                </div>
                <div style={{padding:'20px 16px'}}>
                    <div style={{maxWidth:480,margin:'0 auto'}}>
                        {lessonId===1&&<L1/>}
                        {lessonId===2&&<L2/>}
                        {lessonId===3&&<L3/>}
                        {lessonId===4&&<L4/>}
                        {lessonId===5&&<L5/>}
                        <div style={{display:'flex',gap:12,marginTop:24}}>
                            {lessonId>1&&<button className="btn" style={{flex:1,background:'#fff',border:'2px solid var(--pri)',color:'var(--pri)'}} onClick={()=>setLessonId(lessonId-1)}>â† ä¸Šä¸€èª²</button>}
                            {lessonId<5?<button className="btn btn-pri" style={{flex:1}} onClick={()=>setLessonId(lessonId+1)}>ä¸‹ä¸€èª² â†’</button>
                            :<button className="btn btn-acc" style={{flex:1}} onClick={()=>{setQIdx(0);setScore(0);setSel(null);setShow(false);setDone(false);setPage('quiz')}}>é–‹å§‹æ¸¬é©— ğŸ“</button>}
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    const Quiz=()=>{
        const pick=(i)=>{if(show)return;setSel(i);setShow(true);if(i===quiz[qIdx].c)setScore(score+1)};
        const next=()=>{if(qIdx<quiz.length-1){setQIdx(qIdx+1);setSel(null);setShow(false)}else setDone(true)};

        if(done){
            const pct=Math.round((score/quiz.length)*100);
            return(
                <div>
                    <Header title="æ¸¬é©—çµæœ"/>
                    <div style={{padding:'40px 16px',textAlign:'center'}}>
                        <div style={{width:140,height:140,borderRadius:'50%',background:`conic-gradient(${pct>=80?'var(--suc)':pct>=60?'var(--warn)':'var(--err)'} ${pct*3.6}deg,#E5E5E5 0deg)`,display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 24px'}}>
                            <div style={{width:120,height:120,borderRadius:'50%',background:'#fff',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'}}>
                                <div style={{fontSize:36,fontWeight:700}}>{pct}%</div>
                                <div style={{fontSize:14,color:'var(--txt2)'}}>{score}/{quiz.length}</div>
                            </div>
                        </div>
                        <h2 style={{fontSize:24,fontWeight:700,marginBottom:8}}>{pct>=80?'ğŸ‰ å¤ªæ£’äº†ï¼':pct>=60?'ğŸ‘ ä¸éŒ¯ï¼':'ğŸ’ª åŠ æ²¹ï¼'}</h2>
                        <p style={{color:'var(--txt2)',marginBottom:32}}>{pct>=80?'ä½ å°RCTè©•è®€æœ‰å¾ˆå¥½çš„æŒæ¡ï¼':pct>=60?'å†è¤‡ç¿’å¯ä»¥æ›´é€²æ­¥ï¼':'å»ºè­°é‡æ–°é–±è®€èª²ç¨‹'}</p>
                        <div style={{display:'flex',gap:12,justifyContent:'center',flexWrap:'wrap'}}>
                            <button className="btn btn-pri" onClick={()=>{setQIdx(0);setScore(0);setSel(null);setShow(false);setDone(false)}}>é‡æ–°æ¸¬é©—</button>
                            <button className="btn" style={{background:'#fff',border:'2px solid var(--pri)',color:'var(--pri)'}} onClick={()=>setPage('home')}>è¿”å›èª²ç¨‹</button>
                        </div>
                    </div>
                    <footer style={{background:'linear-gradient(135deg,#E6FAF8,#D4F5F2)',padding:'24px 16px',textAlign:'center',marginTop:40}}>
                        <p style={{fontSize:12,color:'var(--txt2)'}}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨ | è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
                    </footer>
                </div>
            );
        }

        const q=quiz[qIdx];
        return(
            <div>
                <Header title="è‡ªæˆ‘æ¸¬é©—"/>
                <div style={{padding:'20px 16px'}}>
                    <div style={{maxWidth:480,margin:'0 auto'}}>
                        <div style={{display:'flex',justifyContent:'space-between',marginBottom:8,fontSize:14}}>
                            <span style={{color:'var(--txt2)'}}>é€²åº¦</span>
                            <span style={{fontWeight:600,color:'var(--pri)'}}>{qIdx+1}/{quiz.length}</span>
                        </div>
                        <div style={{height:8,background:'#E5E5E5',borderRadius:4,marginBottom:20}}>
                            <div style={{height:'100%',width:`${((qIdx+1)/quiz.length)*100}%`,background:'linear-gradient(90deg,var(--pri),var(--pri2))',borderRadius:4,transition:'width 0.3s'}}/>
                        </div>
                        <div className="card">
                            <h3 style={{fontSize:16,fontWeight:600,lineHeight:1.6,marginBottom:20}}>{q.q}</h3>
                            {q.o.map((opt,i)=>{
                                let bg='#fff',bd='#E5E5E5';
                                if(show){
                                    if(i===q.c){bg='#F0FFF4';bd='var(--suc)'}
                                    else if(i===sel){bg='#FFF5F5';bd='var(--err)'}
                                }else if(i===sel){bg='#E6FAF8';bd='var(--pri)'}
                                return(
                                    <button key={i} onClick={()=>pick(i)} disabled={show} style={{width:'100%',padding:'12px 14px',marginBottom:10,background:bg,border:`2px solid ${bd}`,borderRadius:12,textAlign:'left',fontSize:14,cursor:show?'default':'pointer',display:'flex',alignItems:'center',gap:12}}>
                                        <span style={{width:26,height:26,borderRadius:8,background:show&&i===q.c?'var(--suc)':show&&i===sel?'var(--err)':'#E6FAF8',color:show&&(i===q.c||i===sel)?'#fff':'var(--pri)',display:'flex',alignItems:'center',justifyContent:'center',fontWeight:700,fontSize:13,flexShrink:0}}>
                                            {show&&i===q.c?'âœ”':show&&i===sel&&i!==q.c?'âœ—':String.fromCharCode(65+i)}
                                        </span>
                                        <span style={{lineHeight:1.5}}>{opt}</span>
                                    </button>
                                );
                            })}
                        </div>
                        {show&&(
                            <div className={sel===q.c?'good':'tip'}>
                                <strong style={{color:sel===q.c?'var(--suc)':'var(--acc)'}}>{sel===q.c?'âœ” æ­£ç¢ºï¼':'âœ— ç­”éŒ¯äº†'}</strong>
                                <p style={{fontSize:14,color:'var(--txt2)',marginTop:8,lineHeight:1.7}}>{q.e}</p>
                            </div>
                        )}
                        {show&&<button className="btn btn-pri" style={{width:'100%',justifyContent:'center',marginTop:16}} onClick={next}>{qIdx<quiz.length-1?'ä¸‹ä¸€é¡Œ â†’':'æŸ¥çœ‹çµæœ'}</button>}
                    </div>
                </div>
            </div>
        );
    };

    return <div style={{maxWidth:'100%',minHeight:'100vh',background:'var(--bg)'}}>{page==='home'?<Home/>:page==='lesson'?<Lesson/>:<Quiz/>}</div>;
};

ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
