<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å­å®®å¤–å­•è©•ä¼° | JAMA Rational Clinical Examination</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --pri: #AD1457;
            --pri2: #D81B60;
            --sec: #880E4F;
            --sec2: #C2185B;
            --suc: #2E7D32;
            --warn: #F9A825;
            --danger: #B71C1C;
            --info: #00838F;
            --bg: #FFF5F7;
            --txt: #37474F;
            --txt2: #607D8B;
            --card-shadow: 0 4px 20px rgba(173, 20, 87, 0.08);
        }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--bg);
            color: var(--txt);
            line-height: 1.8;
            -webkit-font-smoothing: antialiased;
        }
        .card {
            background: #fff;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(173, 20, 87, 0.08);
        }
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 14px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        .btn-pri { background: linear-gradient(135deg, var(--pri), var(--pri2)); color: #fff; }
        .btn-pri:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(173, 20, 87, 0.3); }
        .btn-sec { background: linear-gradient(135deg, var(--sec), var(--sec2)); color: #fff; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; margin: 12px 0; }
        th, td { padding: 12px 10px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: linear-gradient(135deg, #FCE4EC, #F8BBD9); font-weight: 600; color: var(--pri); }
        .formula {
            background: linear-gradient(135deg, #FCE4EC, #F8BBD9);
            border: 2px solid var(--pri2);
            border-radius: 16px;
            padding: 18px;
            margin: 14px 0;
            text-align: center;
            font-family: 'Crimson Pro', serif;
            font-size: 18px;
            color: var(--txt);
            font-weight: 600;
        }
        .tip {
            background: linear-gradient(135deg, #FFF8E1, #FFECB3);
            border-left: 4px solid var(--warn);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .good {
            background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
            border-left: 4px solid var(--suc);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .danger {
            background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
            border-left: 4px solid var(--danger);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .info {
            background: linear-gradient(135deg, #E0F7FA, #B2EBF2);
            border-left: 4px solid var(--info);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .lr-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 6px;
        }
        .lr-high { background: #F8BBD9; color: #880E4F; }
        .lr-mod { background: #FFF9C4; color: #F57F17; }
        .lr-low { background: #C8E6C9; color: #1B5E20; }
        .score-box {
            background: linear-gradient(135deg, #FAFAFA, #F5F5F5);
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            padding: 12px;
            margin: 8px 0;
        }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

const MODULE_ID='jama-ectopic-pregnancy';

const badgeDefs = {
    'first-quiz': { name: 'åˆè©¦å•¼è²', icon: 'ğŸ¯' },
    'perfect-score': { name: 'æ»¿åˆ†é”äºº', icon: 'ğŸ’¯' },
    'speed-demon': { name: 'å¿«é€Ÿå­¸ç¿’', icon: 'âš¡' },
    'five-complete': { name: 'äº”ç§‘ç²¾é€š', icon: 'ğŸŒŸ' },
    'ten-complete': { name: 'åç§‘é”äºº', icon: 'ğŸ†' },
    'master': { name: 'å…¨ç§‘å¤§å¸«', icon: 'ğŸ‘‘' },
    'persistent': { name: 'é¥è€Œä¸æ¨', icon: 'ğŸ”„' },
    'night-owl': { name: 'å¤œè²“å­¸ç¿’', icon: 'ğŸ¦‰' },
    'early-bird': { name: 'æ—©èµ·å­¸ç¿’', icon: 'ğŸŒ…' },
    'weekend-warrior': { name: 'é€±æœ«æˆ°å£«', icon: 'ğŸ“…' },
    'cardio-master': { name: 'å¿ƒè‡Ÿå°ˆå®¶', icon: 'â¤ï¸' },
    'critical-master': { name: 'é‡ç—‡é”äºº', icon: 'ğŸ¥' },
    'neuro-master': { name: 'ç¥ç¶“å°ˆå®¶', icon: 'ğŸ§ ' },
    'pulm-master': { name: 'èƒ¸è…”å°ˆå®¶', icon: 'ğŸ«' },
    'core-master': { name: 'EBMæ ¸å¿ƒé”äºº', icon: 'ğŸ“Š' },
    'three-streak': { name: 'ä¸‰é€£å‹', icon: 'ğŸ”¥' },
    'five-streak': { name: 'äº”é€£å‹', icon: 'ğŸ”¥ğŸ”¥' },
    'triple-perfect': { name: 'ä¸‰é€£æ»¿åˆ†', icon: 'âœ¨' },
    'comeback-kid': { name: 'é€†è½‰å‹', icon: 'ğŸ’ª' },
    'dedicated-learner': { name: 'å°ˆæ³¨å­¸ç¿’è€…', icon: 'ğŸ“š' },
    'quick-learner': { name: 'å¿«é€Ÿç†è§£', icon: 'ğŸš€' },
    'thorough-learner': { name: 'æ·±å…¥å­¸ç¿’', icon: 'ğŸ”¬' },
    'consistent-learner': { name: 'æŒä¹‹ä»¥æ†', icon: 'ğŸ“ˆ' },
    'explorer': { name: 'æ¢ç´¢è€…', icon: 'ğŸ§­' },
    'completionist': { name: 'å®Œç¾ä¸»ç¾©', icon: 'âœ…' },
    'scholar': { name: 'å­¸è€…', icon: 'ğŸ“' },
    'expert': { name: 'å°ˆå®¶', icon: 'ğŸ’¼' },
    'mentor': { name: 'å°å¸«ç´š', icon: 'ğŸ‘¨â€ğŸ«' },
    'legend': { name: 'å‚³å¥‡', icon: 'ğŸŒ ' },
    'first-lesson': { name: 'ç¬¬ä¸€èª²', icon: 'ğŸ“–' },
    'half-lessons': { name: 'åŠç¨‹é”æˆ', icon: 'ğŸ¯' },
    'all-lessons': { name: 'å…¨èª²å®Œæˆ', icon: 'ğŸ“š' },
    'quiz-taker': { name: 'æ¸¬é©—åƒèˆ‡', icon: 'ğŸ“' },
    'improver': { name: 'é€²æ­¥ç', icon: 'ğŸ“ˆ' },
    'high-scorer': { name: 'é«˜åˆ†é”äºº', icon: 'ğŸ…' },
    'time-master': { name: 'æ™‚é–“ç®¡ç†', icon: 'â°' },
    'focused': { name: 'å°ˆå¿ƒè‡´å¿—', icon: 'ğŸ¯' },
    'resilient': { name: 'å±¢æ•—å±¢æˆ°', icon: 'ğŸ’ª' },
    'curious': { name: 'æ±‚çŸ¥è‹¥æ¸´', icon: 'ğŸ”' },
    'achiever': { name: 'æˆå°±é”äºº', icon: 'ğŸ†' }
};

const categoryModules = {
    cardio: ['jama-chest-pain-acs', 'jama-syncope', 'jama-hypertension'],
    critical: ['jama-bacteremia', 'jama-gi-bleed', 'jama-fluid-responsiveness', 'jama-difficult-intubation', 'jama-cirrhosis', 'jama-wound-infection'],
    neuro: ['jama-head-trauma', 'jama-delirium', 'jama-decision-capacity'],
    pulm: ['jama-pleural-effusion', 'jama-osa'],
    core: ['critical-appraisal', 'diagnostic-study', 'prognosis-study', 'rct-appraisal', 'systematic-review', 'literature-search']
};

const ProgressTracker={
    STORAGE_KEY:'ebm-progress',
    newBadges: [],
    getProgress:()=>{try{const d=localStorage.getItem(ProgressTracker.STORAGE_KEY);return d?JSON.parse(d):{version:1,modules:{},badges:[],totalTimeSpent:0,streakData:{currentStreak:0,bestStreak:0,lastPassDate:null,perfectStreak:0}}}catch{return{version:1,modules:{},badges:[],totalTimeSpent:0,streakData:{currentStreak:0,bestStreak:0,lastPassDate:null,perfectStreak:0}}}},
    saveQuizResult:(moduleId,score,total,timeSpent)=>{
        ProgressTracker.newBadges = [];
        const progress=ProgressTracker.getProgress();
        if(!progress.streakData)progress.streakData={currentStreak:0,bestStreak:0,lastPassDate:null,perfectStreak:0};
        const mod=progress.modules[moduleId]||{bestScore:0,totalAttempts:0,allAttempts:[],lessonsViewed:[],completed:false,firstCompleted:null};
        const previousBest=mod.bestScore;
        const attempt={date:new Date().toISOString(),score,timeSpent};
        mod.allAttempts.push(attempt);mod.totalAttempts++;
        if(score>mod.bestScore)mod.bestScore=score;
        const passingScore=Math.ceil(total*0.7);
        const passed=score>=passingScore;
        if(passed&&!mod.completed){mod.completed=true;mod.firstCompleted=attempt.date}
        progress.modules[moduleId]=mod;progress.totalTimeSpent+=timeSpent;progress.lastUpdated=new Date().toISOString();
        const today=new Date().toDateString();
        if(passed){
            const lastDate=progress.streakData.lastPassDate?new Date(progress.streakData.lastPassDate).toDateString():null;
            if(lastDate!==today){
                const yesterday=new Date();yesterday.setDate(yesterday.getDate()-1);
                if(lastDate===yesterday.toDateString()){progress.streakData.currentStreak++}
                else if(lastDate!==today){progress.streakData.currentStreak=1}
                progress.streakData.lastPassDate=new Date().toISOString();
                if(progress.streakData.currentStreak>progress.streakData.bestStreak){progress.streakData.bestStreak=progress.streakData.currentStreak}
            }
            if(score===total){progress.streakData.perfectStreak=(progress.streakData.perfectStreak||0)+1}
            else{progress.streakData.perfectStreak=0}
        }else{progress.streakData.currentStreak=0;progress.streakData.perfectStreak=0}
        ProgressTracker.checkBadges(progress,moduleId,score,total,timeSpent,previousBest);
        localStorage.setItem(ProgressTracker.STORAGE_KEY,JSON.stringify(progress));return progress;
    },
    checkBadges:(progress,moduleId,score,total,timeSpent,previousBest)=>{
        const dominated=progress.badges||[];const ids=dominated.map(b=>b.id);const now=new Date().toISOString();
        const addBadge=(id)=>{if(!ids.includes(id)&&badgeDefs[id]){dominated.push({id,earnedAt:now});ProgressTracker.newBadges.push({id,...badgeDefs[id]})}};
        addBadge('first-quiz');
        if(score===total)addBadge('perfect-score');
        if(timeSpent<120)addBadge('speed-demon');
        if(timeSpent<60)addBadge('quick-learner');
        if(timeSpent>300&&score>=Math.ceil(total*0.7))addBadge('thorough-learner');
        const completed=Object.values(progress.modules).filter(m=>m.completed).length;
        if(completed>=5)addBadge('five-complete');
        if(completed>=10)addBadge('ten-complete');
        if(completed>=15)addBadge('scholar');
        if(completed>=18)addBadge('master');
        if(completed>=20)addBadge('legend');
        const mod=progress.modules[moduleId];
        if(mod&&mod.totalAttempts>=3)addBadge('persistent');
        if(mod&&mod.totalAttempts>=5)addBadge('resilient');
        if(mod&&mod.totalAttempts>=2&&score>previousBest)addBadge('improver');
        if(previousBest<Math.ceil(total*0.7)&&score>=Math.ceil(total*0.7))addBadge('comeback-kid');
        if(score>=total*0.9)addBadge('high-scorer');
        const hour=new Date().getHours();
        if(hour>=22||hour<5)addBadge('night-owl');
        if(hour>=5&&hour<8)addBadge('early-bird');
        const day=new Date().getDay();
        if(day===0||day===6)addBadge('weekend-warrior');
        if(progress.streakData){
            if(progress.streakData.currentStreak>=3)addBadge('three-streak');
            if(progress.streakData.currentStreak>=5)addBadge('five-streak');
            if(progress.streakData.perfectStreak>=3)addBadge('triple-perfect');
        }
        Object.entries(categoryModules).forEach(([cat,mods])=>{
            const catCompleted=mods.filter(m=>progress.modules[m]&&progress.modules[m].completed).length;
            if(catCompleted===mods.length){
                const badgeId=cat+'-master';
                addBadge(badgeId);
            }
        });
        const totalAttempts=Object.values(progress.modules).reduce((sum,m)=>sum+(m.totalAttempts||0),0);
        if(totalAttempts>=10)addBadge('dedicated-learner');
        if(totalAttempts>=25)addBadge('consistent-learner');
        if(totalAttempts>=50)addBadge('expert');
        if(totalAttempts>=100)addBadge('mentor');
        const modulesExplored=Object.keys(progress.modules).length;
        if(modulesExplored>=5)addBadge('explorer');
        if(modulesExplored>=10)addBadge('curious');
        progress.badges=dominated;
    }
};

const lessons = [
    { id: 1, title: 'å­å®®å¤–å­•æ¦‚è«–èˆ‡æµè¡Œç—…å­¸', sub: 'Ectopic Pregnancy Overview', color: '#AD1457' },
    { id: 2, title: 'å±éšªå› å­èˆ‡ç—‡ç‹€è©•ä¼°', sub: 'Risk Factors & Symptoms', color: '#880E4F' },
    { id: 3, title: 'ç†å­¸æª¢æŸ¥èˆ‡å¯¦é©—å®¤æª¢æŸ¥', sub: 'Physical Exam & Lab Tests', color: '#C2185B' },
    { id: 4, title: 'è¶…éŸ³æ³¢èˆ‡è¨ºæ–·ç­–ç•¥', sub: 'Ultrasound & Diagnosis', color: '#00838F' },
    { id: 5, title: 'è‡¨åºŠæ‡‰ç”¨æ•´åˆ', sub: 'Clinical Application', color: '#1565C0' }
];

const quiz = [
    {
        q: 'æ ¹æ“šJAMAç³»çµ±æ€§å›é¡§ï¼Œæ€¥è¨ºæœ‰ç—‡ç‹€å¥³æ€§ä¸­å­å®®å¤–å­•çš„ç››è¡Œç‡ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o: ['ç´„5%', 'ç´„15%', 'ç´„25%', 'ç´„35%'],
        c: 1,
        e: 'åœ¨æ€¥è¨ºæœ‰ç—‡ç‹€ï¼ˆé™°é“å‡ºè¡€ã€è…¹ç—›æˆ–å…©è€…ï¼‰ä¸”é©—å­•é™½æ€§çš„å¥³æ€§ä¸­ï¼Œå­å®®å¤–å­•çš„ç››è¡Œç‡ç´„ç‚º6%-16%ï¼Œç¶œåˆä¼°è¨ˆç´„15%ã€‚'
    },
    {
        q: 'å­å®®å¤–å­•æœ€å¸¸ç™¼ç”Ÿåœ¨å“ªå€‹ä½ç½®ï¼Ÿ',
        o: ['å­å®®è§’', 'è¼¸åµç®¡', 'åµå·¢', 'è…¹è…”'],
        c: 1,
        e: 'è¶…é95%çš„å­å®®å¤–å­•ç™¼ç”Ÿåœ¨è¼¸åµç®¡ï¼Œå…¶ä¸­æœ€å¸¸è¦‹æ–¼å£ºè…¹éƒ¨(ampulla)ç´„70%ï¼Œå…¶æ¬¡ç‚ºå³½éƒ¨(isthmus)ç´„12%ã€‚'
    },
    {
        q: 'ä¸‹åˆ—å“ªå€‹å±éšªå› å­å°å­å®®å¤–å­•çš„ç›¸å°é¢¨éšªæœ€é«˜ï¼Ÿ',
        o: ['å¹´é½¡>35æ­²', 'å¸è¸', 'æ›¾æœ‰å­å®®å¤–å­•ç—…å²', 'äººå·¥æµç”¢å²'],
        c: 2,
        e: 'æ›¾æœ‰å­å®®å¤–å­•ç—…å²çš„OR = 8.3 (95% CI, 6.0-11.5)ï¼Œæ˜¯æœ€å¼·çš„å±éšªå› å­ã€‚æ›¾æœ‰è¼¸åµç®¡æ‰‹è¡“å²çš„OR = 4.0ï¼Œä½¿ç”¨å­å®®å…§é¿å­•å™¨çš„OR = 2.4ã€‚'
    },
    {
        q: 'é—œæ–¼ç¶“å…¸ä¸‰è¯ç—‡(triad)ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['æ•æ„Ÿåº¦é«˜é”90%', 'ä¸‰è€…åŒæ™‚å‡ºç¾åƒ…ç´„45%', 'å°è¨ºæ–·é«˜åº¦ç‰¹ç•°', 'å¯ç”¨æ–¼æ’é™¤å­å®®å¤–å­•'],
        c: 1,
        e: 'ç¶“å…¸ä¸‰è¯ç—‡ï¼ˆè…¹ç—›ã€é™°é“å‡ºè¡€ã€é™„ä»¶è…«å¡Šï¼‰ä¸‰è€…åŒæ™‚å‡ºç¾åƒ…ç´„45%çš„æ‚£è€…ã€‚é€™ä¸‰å€‹ç—‡ç‹€çš„æ•æ„Ÿåº¦å’Œç‰¹ç•°åº¦éƒ½ä¸é«˜ï¼Œç„¡æ³•å–®ç¨ç”¨æ–¼ç¢ºèªæˆ–æ’é™¤è¨ºæ–·ã€‚'
    },
    {
        q: 'ä¸‹åˆ—å“ªå€‹ç†å­¸æª¢æŸ¥ç™¼ç¾å°å­å®®å¤–å­•çš„LR+æœ€é«˜ï¼Ÿ',
        o: ['å­å®®é ¸ç§»å‹•ç—›', 'é™„ä»¶å£“ç—›', 'è…¹è†œåˆºæ¿€å¾µè±¡', 'é™„ä»¶è…«å¡Š'],
        c: 2,
        e: 'è…¹è†œåˆºæ¿€å¾µè±¡(peritoneal signs)çš„LR+ = 4.2-4.5ã€‚å­å®®é ¸ç§»å‹•ç—›çš„LR+ = 4.9 (ä½†95% CIåŒ…å«1.0)ã€‚é™„ä»¶è…«å¡Šçš„LR+ = 2.4ã€‚'
    },
    {
        q: 'é—œæ–¼Î²-hCGçš„é‘‘åˆ¥é–¾å€¼(discriminatory zone)ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['1000-1500 mIU/mL', '1500-3000 mIU/mL', '5000-6000 mIU/mL', '10000 mIU/mLä»¥ä¸Š'],
        c: 1,
        e: 'ç¶“é™°é“è¶…éŸ³æ³¢çš„é‘‘åˆ¥é–¾å€¼ç‚º1500-3000 mIU/mLã€‚ç•¶Î²-hCGé”åˆ°æ­¤é–¾å€¼æ™‚ï¼Œæ‡‰å¯åœ¨å­å®®å…§çœ‹åˆ°å¦Šå¨ å›Šï¼›è‹¥çœ‹ä¸åˆ°å‰‡é«˜åº¦æ‡·ç–‘å­å®®å¤–å­•ã€‚'
    },
    {
        q: 'ç¶“é™°é“è¶…éŸ³æ³¢(TVS)çœ‹åˆ°é™„ä»¶è…«å¡Šå°å­å®®å¤–å­•çš„è¨ºæ–·åƒ¹å€¼ç‚ºä½•ï¼Ÿ',
        o: ['LR+ = 5.0', 'LR+ = 25', 'LR+ = 111', 'LR+ = 200'],
        c: 2,
        e: 'TVSé¡¯ç¤ºé™„ä»¶è…«å¡Šçš„LR+ = 111 (95% CI, 12-1028)ï¼Œæ˜¯æœ€æœ‰è¨ºæ–·åƒ¹å€¼çš„ç™¼ç¾ã€‚ä½†æ•æ„Ÿåº¦åƒ…26%ï¼Œé™°æ€§çµæœä¸èƒ½æ’é™¤å­å®®å¤–å­•ã€‚'
    },
    {
        q: 'é—œæ–¼å­å®®å¤–å­•çš„è¶…éŸ³æ³¢ç™¼ç¾ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['å­å®®å…§å¦Šå¨ å›Šå¯ç¢ºèªå­å®®å¤–å­•', 'ã€Œå‡å¦Šå¨ å›Šã€åªå‡ºç¾åœ¨æ­£å¸¸å­å®®å…§æ‡·å­•', 'èƒšèƒ/åµé»ƒå›Šåœ¨é™„ä»¶è™•å¯ç¢ºè¨º', 'é™„ä»¶è…«å¡Šæ•æ„Ÿåº¦é”90%'],
        c: 2,
        e: 'åœ¨é™„ä»¶è™•çœ‹åˆ°èƒšèƒæˆ–åµé»ƒå›Šå¯ç¢ºè¨ºå­å®®å¤–å­•ã€‚ã€Œå‡å¦Šå¨ å›Šã€æ˜¯è›»è†œåæ‡‰é€ æˆçš„å‡é™½æ€§ï¼Œå¯èƒ½èª¤èªç‚ºå­å®®å…§æ‡·å­•è€Œæ¼è¨ºå­å®®å¤–å­•ã€‚'
    },
    {
        q: 'æ­£å¸¸å­å®®å…§æ‡·å­•æ—©æœŸï¼ŒÎ²-hCGæ¯48å°æ™‚æ‡‰å¢åŠ å¤šå°‘ï¼Ÿ',
        o: ['è‡³å°‘35%', 'è‡³å°‘53%', 'è‡³å°‘75%', 'è‡³å°‘100%'],
        c: 1,
        e: 'æ­£å¸¸å­å®®å…§æ‡·å­•æ™‚ï¼ŒÎ²-hCGé€šå¸¸æ¯48å°æ™‚å¢åŠ è‡³å°‘53%ï¼ˆæ›´ä¿å®ˆæ¨™æº–ç‚º35%ï¼‰ã€‚ä½†é‡è¦çš„æ˜¯ï¼šç´„21%çš„å­å®®å¤–å­•ç—…ä¾‹Î²-hCGä¸Šå‡æ¨¡å¼èˆ‡æ­£å¸¸æ‡·å­•ç›¸ä¼¼ï¼Œå› æ­¤æ­£å¸¸ä¸Šå‡ä¸èƒ½æ’é™¤å­å®®å¤–å­•ï¼71%çš„å­å®®å¤–å­•å‘ˆç¾53%ä¸Šå‡åˆ°35%ä¸‹é™ä¹‹é–“çš„è®ŠåŒ–æ¨¡å¼ã€‚'
    },
    {
        q: 'é—œæ–¼å­å®®å¤–å­•çš„è‡¨åºŠè™•ç½®ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['æ‰€æœ‰å­å®®å¤–å­•éƒ½éœ€æ‰‹è¡“', 'è¡€æµå‹•åŠ›å­¸ä¸ç©©å®šæ˜¯è—¥ç‰©æ²»ç™‚çš„é©æ‡‰ç—‡', 'Methotrexateå¯ç”¨æ–¼ç©©å®šã€æœªç ´è£‚çš„ç—…ä¾‹', 'è§€å¯Ÿç­‰å¾…æ˜¯é¦–é¸ç­–ç•¥'],
        c: 2,
        e: 'Methotrexateè—¥ç‰©æ²»ç™‚é©ç”¨æ–¼è¡€æµå‹•åŠ›å­¸ç©©å®šã€æœªç ´è£‚çš„å­å®®å¤–å­•ã€‚è¡€æµå‹•åŠ›å­¸ä¸ç©©å®šæ™‚éœ€ç·Šæ€¥æ‰‹è¡“ã€‚é¸æ“‡éœ€è€ƒæ…®Î²-hCGæ•¸å€¼ã€èƒšèƒå¤§å°å’Œæ‚£è€…åå¥½ã€‚'
    }
];

const BadgeToast = ({ badges, onClose }) => {
    if (!badges || badges.length === 0) return null;
    return (
        <div style={{
            position: 'fixed',
            top: 20,
            right: 20,
            zIndex: 1000,
            display: 'flex',
            flexDirection: 'column',
            gap: 10
        }}>
            {badges.map((badge, i) => (
                <div key={i} style={{
                    background: 'linear-gradient(135deg, #FFD700, #FFA500)',
                    borderRadius: 16,
                    padding: '16px 20px',
                    boxShadow: '0 8px 32px rgba(255, 165, 0, 0.4)',
                    display: 'flex',
                    alignItems: 'center',
                    gap: 12,
                    animation: 'slideIn 0.5s ease-out',
                    cursor: 'pointer',
                    minWidth: 200
                }} onClick={() => onClose(i)}>
                    <span style={{ fontSize: 32 }}>{badge.icon}</span>
                    <div>
                        <div style={{ fontSize: 12, color: '#333', opacity: 0.8 }}>Achievement Unlocked!</div>
                        <div style={{ fontSize: 16, fontWeight: 700, color: '#333' }}>{badge.name}</div>
                    </div>
                </div>
            ))}
            <style>{`
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `}</style>
        </div>
    );
};

const App = () => {
    const [page, setPage] = useState('home');
    const [lessonId, setLessonId] = useState(1);
    const [qIdx, setQIdx] = useState(0);
    const [score, setScore] = useState(0);
    const [sel, setSel] = useState(null);
    const [show, setShow] = useState(false);
    const [done, setDone] = useState(false);
    const [quizStartTime, setQuizStartTime] = useState(null);
    const [newBadges, setNewBadges] = useState([]);

    useEffect(() => { if (page === 'quiz' && !done && !quizStartTime) setQuizStartTime(Date.now()) }, [page, done]);
    useEffect(() => {
        if (done && quizStartTime) {
            const t = Math.round((Date.now() - quizStartTime) / 1000);
            ProgressTracker.saveQuizResult(MODULE_ID, score, quiz.length, t);
            if (ProgressTracker.newBadges && ProgressTracker.newBadges.length > 0) {
                setNewBadges([...ProgressTracker.newBadges]);
            }
        }
    }, [done]);

    const closeBadge = (index) => {
        setNewBadges(prev => prev.filter((_, i) => i !== index));
    };

    const Header = ({ title }) => (
        <header style={{
            background: '#fff',
            borderBottom: '1px solid rgba(173, 20, 87, 0.1)',
            padding: '14px 16px',
            position: 'sticky',
            top: 0,
            zIndex: 10,
            backdropFilter: 'blur(10px)'
        }}>
            <div style={{ maxWidth: 480, margin: '0 auto', display: 'flex', alignItems: 'center', gap: 12 }}>
                <button
                    onClick={() => page === 'home' ? window.location.href = 'jama-rational-exam.html' : setPage('home')}
                    style={{
                        background: 'linear-gradient(135deg, #FCE4EC, #F8BBD9)',
                        border: 'none',
                        borderRadius: 12,
                        width: 42,
                        height: 42,
                        cursor: 'pointer',
                        color: 'var(--pri)',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        boxShadow: '0 2px 8px rgba(173, 20, 87, 0.1)'
                    }}
                >
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <span style={{ fontWeight: 700, color: 'var(--txt)', fontSize: 16 }}>{title}</span>
            </div>
        </header>
    );

    const Home = () => (
        <div className="fade-in">
            <Header title="å­å®®å¤–å­•è©•ä¼°" />
            <div style={{
                background: 'linear-gradient(135deg, #AD1457 0%, #880E4F 50%, #4A148C 100%)',
                padding: '36px 20px 44px',
                color: '#fff',
                position: 'relative',
                overflow: 'hidden'
            }}>
                <div style={{
                    position: 'absolute',
                    top: -30,
                    right: -30,
                    width: 150,
                    height: 150,
                    borderRadius: '50%',
                    background: 'rgba(255,255,255,0.1)'
                }} />
                <div style={{ maxWidth: 480, margin: '0 auto', position: 'relative', zIndex: 1 }}>
                    <div style={{
                        background: 'rgba(255,255,255,0.2)',
                        display: 'inline-block',
                        padding: '8px 16px',
                        borderRadius: 50,
                        fontSize: 12,
                        fontWeight: 600,
                        marginBottom: 16,
                        backdropFilter: 'blur(10px)'
                    }}>
                        ğŸ¤° JAMA Rational Clinical Examination
                    </div>
                    <h1 style={{ fontSize: 24, fontWeight: 700, marginBottom: 12, lineHeight: 1.3 }}>
                        Does This Woman Have an Ectopic Pregnancy?
                    </h1>
                    <p style={{ opacity: 0.95, fontSize: 14, lineHeight: 1.7 }}>
                        å­å®®å¤–å­•çš„è‡¨åºŠè¨ºæ–·è©•ä¼°
                    </p>
                    <p style={{ opacity: 0.8, fontSize: 12, marginTop: 8 }}>
                        Crochet JR, et al. JAMA. 2013;309(16):1722-1729
                    </p>
                    <a
                        href="https://jamanetwork.com/journals/jama/fullarticle/1681418"
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                            display:'inline-flex',
                            alignItems:'center',
                            gap:6,
                            background:'rgba(255,255,255,0.25)',
                            color:'#fff',
                            padding:'8px 16px',
                            borderRadius:25,
                            fontSize:13,
                            fontWeight:600,
                            textDecoration:'none',
                            backdropFilter:'blur(10px)',
                            marginTop: 12,
                            transition:'all 0.3s'
                        }}
                    >
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
                        é–±è®€åŸæ–‡ Read Full Article
                    </a>
                </div>
            </div>

            <div style={{ padding: '0 16px', marginTop: -24 }}>
                <div style={{ maxWidth: 480, margin: '0 auto' }}>
                    <div className="card">
                        <h3 style={{ fontSize: 17, fontWeight: 700, color: 'var(--pri)', marginBottom: 14, display: 'flex', alignItems: 'center', gap: 8 }}>
                            <span style={{ fontSize: 22 }}>ğŸ¯</span> å­¸ç¿’ç›®æ¨™
                        </h3>
                        {[
                            'äº†è§£å­å®®å¤–å­•çš„æµè¡Œç—…å­¸èˆ‡å±éšªå› å­',
                            'æŒæ¡ç—‡ç‹€å’Œç†å­¸æª¢æŸ¥å°è¨ºæ–·çš„åƒ¹å€¼',
                            'ç†Ÿæ‚‰Î²-hCGèˆ‡è¶…éŸ³æ³¢çš„è¨ºæ–·ç­–ç•¥',
                            'å­¸ç¿’è‡¨åºŠæ±ºç­–èˆ‡è™•ç½®åŸå‰‡'
                        ].map((t, i) => (
                            <div key={i} style={{ display: 'flex', gap: 12, marginBottom: 10, fontSize: 14 }}>
                                <span style={{
                                    background: 'linear-gradient(135deg, var(--suc), #43A047)',
                                    color: '#fff',
                                    borderRadius: 8,
                                    width: 26,
                                    height: 26,
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    fontSize: 13,
                                    flexShrink: 0,
                                    fontWeight: 600
                                }}>{i + 1}</span>
                                <span style={{ color: 'var(--txt2)', lineHeight: 1.6 }}>{t}</span>
                            </div>
                        ))}
                    </div>

                    <div className="danger" style={{ marginBottom: 20 }}>
                        <strong style={{ color: 'var(--danger)', display: 'flex', alignItems: 'center', gap: 6 }}>
                            âš ï¸ è‡¨åºŠé‡è¦æ€§
                        </strong>
                        <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 8, lineHeight: 1.7 }}>
                            å­å®®å¤–å­•ä½”æ‰€æœ‰æ‡·å­•çš„2.6%ï¼Œä½†é€ æˆ6%çš„å­•ç”¢å©¦æ­»äº¡ã€‚æ—©æœŸè¨ºæ–·å°æ–¼é¿å…ç ´è£‚ã€ä¿ç•™ç”Ÿè‚²èƒ½åŠ›è‡³é—œé‡è¦ã€‚æ€¥è¨ºæœ‰ç—‡ç‹€å¥³æ€§ä¸­ç´„15%ç‚ºå­å®®å¤–å­•ã€‚
                        </p>
                    </div>

                    <h3 style={{ fontSize: 18, fontWeight: 700, marginBottom: 16, color: 'var(--txt)' }}>ğŸ“š èª²ç¨‹å…§å®¹</h3>
                    {lessons.map(l => (
                        <div
                            key={l.id}
                            className="card"
                            onClick={() => { setLessonId(l.id); setPage('lesson'); }}
                            style={{ cursor: 'pointer', transition: 'all 0.3s ease' }}
                        >
                            <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>
                                <div style={{
                                    width: 52,
                                    height: 52,
                                    borderRadius: 14,
                                    background: `linear-gradient(135deg, ${l.color}, ${l.color}99)`,
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    color: '#fff',
                                    fontWeight: 700,
                                    fontSize: 18,
                                    boxShadow: `0 4px 12px ${l.color}33`
                                }}>{l.id}</div>
                                <div style={{ flex: 1 }}>
                                    <div style={{ fontSize: 11, color: l.color, fontWeight: 600, marginBottom: 2 }}>Lesson {l.id}</div>
                                    <div style={{ fontSize: 16, fontWeight: 700, color: 'var(--txt)' }}>{l.title}</div>
                                    <div style={{ fontSize: 13, color: 'var(--txt2)' }}>{l.sub}</div>
                                </div>
                                <svg viewBox="0 0 24 24" fill={l.color} width="22" height="22">
                                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/>
                                </svg>
                            </div>
                        </div>
                    ))}

                    <button
                        className="btn btn-pri"
                        onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); setPage('quiz'); }}
                        style={{ width: '100%', justifyContent: 'center', marginTop: 24, marginBottom: 16, padding: '16px 24px' }}
                    >
                        ğŸ“ é–‹å§‹æ¸¬é©— (10é¡Œ)
                    </button>

                    <a
                        href="https://jamanetwork.com/journals/jama/fullarticle/1681418"
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            gap: 8,
                            padding: '14px 20px',
                            background: 'linear-gradient(135deg, #F8F9FA, #E9ECEF)',
                            borderRadius: 14,
                            textDecoration: 'none',
                            color: 'var(--pri)',
                            fontSize: 14,
                            fontWeight: 600,
                            marginBottom: 32,
                            border: '1px solid rgba(173, 20, 87, 0.2)'
                        }}
                    >
                        ğŸ“„ é–±è®€åŸæ–‡ (JAMA 2013)
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                            <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <footer style={{ background: 'linear-gradient(135deg, #FCE4EC, #F8BBD9)', padding: '28px 16px', textAlign: 'center' }}>
                <p style={{ fontSize: 13, color: 'var(--txt2)', fontWeight: 600 }}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨</p>
                <p style={{ fontSize: 12, color: 'var(--txt2)', marginTop: 4 }}>è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
            </footer>
        </div>
    );

    // Lesson 1: å­å®®å¤–å­•æ¦‚è«–èˆ‡æµè¡Œç—…å­¸
    const L1 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ¤° ä»€éº¼æ˜¯å­å®®å¤–å­•ï¼Ÿ</h3>
                <div className="formula">
                    å­å®®å¤–å­•(Ectopic Pregnancy) = å—ç²¾åµè‘—åºŠæ–¼å­å®®è…”ä»¥å¤–çš„ä½ç½®
                </div>
                <p style={{ fontSize: 14, color: 'var(--txt2)', lineHeight: 1.8 }}>
                    å­å®®å¤–å­•æ˜¯æŒ‡å—ç²¾åµè‘—åºŠæ–¼å­å®®è…”ä»¥å¤–çš„ä½ç½®ã€‚é€™æ˜¯å©¦ç”¢ç§‘æ€¥ç—‡ï¼Œè‹¥æœªåŠæ™‚è¨ºæ–·å¯èƒ½å°è‡´ç ´è£‚ã€å¤§å‡ºè¡€ï¼Œç”šè‡³å±åŠç”Ÿå‘½ã€‚
                </p>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ“ è‘—åºŠä½ç½®åˆ†å¸ƒ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ä½ç½®</th>
                            <th>æ¯”ä¾‹</th>
                            <th>èªªæ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td style={{ fontWeight: 700, color: 'var(--pri)' }}>è¼¸åµç®¡</td>
                            <td>&gt;95%</td>
                            <td>æœ€å¸¸è¦‹ä½ç½®</td>
                        </tr>
                        <tr>
                            <td>- å£ºè…¹éƒ¨(Ampulla)</td>
                            <td>~70%</td>
                            <td>è¼¸åµç®¡æœ€å¸¸è¦‹</td>
                        </tr>
                        <tr>
                            <td>- å³½éƒ¨(Isthmus)</td>
                            <td>~12%</td>
                            <td>è¼ƒæ˜“ç ´è£‚</td>
                        </tr>
                        <tr>
                            <td>- ç¹–éƒ¨(Fimbria)</td>
                            <td>~11%</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>- é–“è³ªéƒ¨(Interstitial)</td>
                            <td>~2%</td>
                            <td>æœ€å±éšª</td>
                        </tr>
                        <tr>
                            <td>åµå·¢</td>
                            <td>~3%</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>è…¹è…”</td>
                            <td>~1%</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>å­å®®é ¸</td>
                            <td>&lt;1%</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“ˆ æµè¡Œç—…å­¸æ•¸æ“š</h3>
                <div className="danger">
                    <strong>é—œéµçµ±è¨ˆ</strong>
                    <ul style={{ marginTop: 8, marginLeft: 16, color: 'var(--txt2)', fontSize: 14 }}>
                        <li>ä½”æ‰€æœ‰æ‡·å­•çš„<strong>2.6%</strong></li>
                        <li>ä½”å­•ç”¢å©¦æ­»äº¡çš„<strong>6%</strong></li>
                        <li>æ€¥è¨ºæœ‰ç—‡ç‹€å¥³æ€§ä¸­ç››è¡Œç‡ï¼š<strong>6-16%</strong>ï¼ˆç´„15%ï¼‰</li>
                        <li>æ˜¯å¦Šå¨ åˆæœŸï¼ˆç¬¬ä¸€å­•æœŸï¼‰å‡ºè¡€å’Œæ­»äº¡çš„ä¸»è¦åŸå› </li>
                    </ul>
                </div>
                <div className="info">
                    <strong>ğŸ’¡ å‰æ¸¬æ©Ÿç‡è€ƒé‡</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        æ€¥è¨ºæœ‰ç—‡ç‹€ï¼ˆè…¹ç—›ã€é™°é“å‡ºè¡€ï¼‰ä¸”é©—å­•é™½æ€§çš„å¥³æ€§ï¼Œå­å®®å¤–å­•å‰æ¸¬æ©Ÿç‡ç´„15%ã€‚é€™æ˜¯é€²è¡Œå¾ŒçºŒæª¢æŸ¥å’Œä¼¼ç„¶æ¯”è¨ˆç®—çš„åŸºç¤ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: '#6A1B9A', marginBottom: 14 }}>â° æ—©æœŸè¨ºæ–·çš„é‡è¦æ€§</h3>
                <div style={{ display: 'grid', gap: 10 }}>
                    {[
                        { icon: 'ğŸ’”', title: 'é¿å…ç ´è£‚', desc: 'æœªè¨ºæ–·çš„è¼¸åµç®¡å¦Šå¨ å¯èƒ½ç ´è£‚å°è‡´è…¹è…”å…§å¤§å‡ºè¡€' },
                        { icon: 'ğŸ¥', title: 'å¢åŠ æ²»ç™‚é¸æ“‡', desc: 'æ—©æœŸè¨ºæ–·å¯é¸æ“‡è—¥ç‰©æ²»ç™‚(MTX)ï¼Œé¿å…æ‰‹è¡“' },
                        { icon: 'ğŸ‘¶', title: 'ä¿ç•™ç”Ÿè‚²èƒ½åŠ›', desc: 'åŠæ™‚è™•ç½®å¯ä¿ç•™è¼¸åµç®¡åŠŸèƒ½å’Œæœªä¾†ç”Ÿè‚²èƒ½åŠ›' },
                        { icon: 'â¤ï¸', title: 'é™ä½æ­»äº¡ç‡', desc: 'æ—©æœŸè¨ºæ–·å’Œè™•ç½®é¡¯è‘—é™ä½å­•ç”¢å©¦æ­»äº¡é¢¨éšª' }
                    ].map((item, i) => (
                        <div key={i} style={{
                            background: 'linear-gradient(135deg, #FCE4EC, #F8BBD9)',
                            padding: '12px 16px',
                            borderRadius: 12,
                            fontSize: 14,
                            display: 'flex',
                            alignItems: 'flex-start',
                            gap: 12
                        }}>
                            <span style={{ fontSize: 20 }}>{item.icon}</span>
                            <div>
                                <strong style={{ color: 'var(--pri)' }}>{item.title}</strong>
                                <p style={{ color: 'var(--txt2)', marginTop: 2, fontSize: 13 }}>{item.desc}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );

    // Lesson 2: å±éšªå› å­èˆ‡ç—‡ç‹€è©•ä¼°
    const L2 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>âš ï¸ å±éšªå› å­</h3>
                <table>
                    <thead>
                        <tr>
                            <th>å±éšªå› å­</th>
                            <th>OR (95% CI)</th>
                            <th>é¢¨éšªç¨‹åº¦</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td style={{ fontWeight: 700, color: 'var(--pri)' }}>æ›¾æœ‰å­å®®å¤–å­•ç—…å²</td>
                            <td><span className="lr-badge lr-high">8.3 (6.0-11.5)</span></td>
                            <td>æœ€é«˜é¢¨éšª</td>
                        </tr>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td style={{ fontWeight: 600 }}>æ›¾æœ‰è¼¸åµç®¡æ‰‹è¡“</td>
                            <td><span className="lr-badge lr-high">4.0 (2.6-6.1)</span></td>
                            <td>é«˜é¢¨éšª</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ä½¿ç”¨å­å®®å…§é¿å­•å™¨(IUD)</td>
                            <td><span className="lr-badge lr-mod">2.4 (1.5-3.8)</span></td>
                            <td>ä¸­ç­‰é¢¨éšª</td>
                        </tr>
                        <tr>
                            <td>æ›¾æœ‰éª¨ç›†è…”ç™¼ç‚(PID)</td>
                            <td>2.5 (1.3-4.9)</td>
                            <td>ä¸­ç­‰é¢¨éšª</td>
                        </tr>
                        <tr>
                            <td>ä¸å­•ç—‡/æ¥å—äººå·¥ç”Ÿæ®–</td>
                            <td>2.1 (1.3-3.5)</td>
                            <td>ä¸­ç­‰é¢¨éšª</td>
                        </tr>
                        <tr>
                            <td>å¸è¸</td>
                            <td>1.8 (1.3-2.4)</td>
                            <td>è¼•åº¦å¢åŠ </td>
                        </tr>
                        <tr>
                            <td>å¹´é½¡ &gt;35æ­²</td>
                            <td>1.4 (1.1-1.8)</td>
                            <td>è¼•åº¦å¢åŠ </td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>ğŸ’¡ è‡¨åºŠè¦é»</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ç´„50%çš„å­å®®å¤–å­•ç™¼ç”Ÿåœ¨æ²’æœ‰å·²çŸ¥å±éšªå› å­çš„å¥³æ€§ã€‚å› æ­¤ï¼Œ<strong>æ²’æœ‰å±éšªå› å­ä¸¦ä¸èƒ½æ’é™¤å­å®®å¤–å­•çš„å¯èƒ½</strong>ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ“‹ ç—‡ç‹€çš„è¨ºæ–·åƒ¹å€¼</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç—‡ç‹€</th>
                            <th>LR+ (95% CI)</th>
                            <th>LR-</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>è…¹ç—›</td>
                            <td>1.0 (0.97-1.05)</td>
                            <td>0.83</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é™°é“å‡ºè¡€</td>
                            <td>1.1 (0.93-1.37)</td>
                            <td>0.86</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å™å¿ƒå˜”å</td>
                            <td>0.92 (0.71-1.20)</td>
                            <td>1.05</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é ­æšˆ</td>
                            <td>0.97 (0.67-1.41)</td>
                            <td>1.01</td>
                        </tr>
                    </tbody>
                </table>
                <div className="danger">
                    <strong>âš ï¸ é‡è¦ç™¼ç¾</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        å€‹åˆ¥ç—‡ç‹€çš„LR+éƒ½æ¥è¿‘1.0ï¼Œé€™æ„å‘³è‘—<strong>æ²’æœ‰ä»»ä½•å–®ä¸€ç—‡ç‹€å¯ä»¥æœ‰æ•ˆç¢ºèªæˆ–æ’é™¤å­å®®å¤–å­•</strong>ã€‚ç—‡ç‹€å°æ–¼æé«˜è¨ºæ–·ä¿¡å¿ƒçš„å¹«åŠ©æœ‰é™ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ”º ç¶“å…¸ä¸‰è¯ç—‡(Triad)</h3>
                <div style={{
                    background: 'linear-gradient(135deg, #FCE4EC, #F8BBD9)',
                    padding: 20,
                    borderRadius: 16,
                    textAlign: 'center',
                    marginBottom: 14
                }}>
                    <div style={{ display: 'flex', justifyContent: 'center', gap: 20, flexWrap: 'wrap' }}>
                        <div style={{
                            background: 'var(--pri)',
                            color: '#fff',
                            padding: '12px 20px',
                            borderRadius: 12,
                            fontWeight: 600
                        }}>
                            è…¹ç—›
                        </div>
                        <div style={{
                            background: 'var(--sec)',
                            color: '#fff',
                            padding: '12px 20px',
                            borderRadius: 12,
                            fontWeight: 600
                        }}>
                            é™°é“å‡ºè¡€
                        </div>
                        <div style={{
                            background: '#C2185B',
                            color: '#fff',
                            padding: '12px 20px',
                            borderRadius: 12,
                            fontWeight: 600
                        }}>
                            é™„ä»¶è…«å¡Š
                        </div>
                    </div>
                </div>
                <div className="tip">
                    <strong>ğŸ’¡ ä¸‰è¯ç—‡çš„é™åˆ¶</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ä¸‰è€…åŒæ™‚å‡ºç¾åƒ…è¦‹æ–¼<strong>ç´„45%</strong>çš„å­å®®å¤–å­•æ‚£è€…ã€‚å› æ­¤ï¼Œç¼ºä¹å®Œæ•´ä¸‰è¯ç—‡ä¸èƒ½æ’é™¤è¨ºæ–·ï¼Œè€Œå­˜åœ¨ä¸‰è¯ç—‡ä¹Ÿä¸èƒ½ç¢ºè¨ºã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: '#6A1B9A', marginBottom: 14 }}>ğŸ©¸ é™°é“å‡ºè¡€çš„ç‰¹å¾µ</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12, lineHeight: 1.8 }}>
                    å­å®®å¤–å­•çš„é™°é“å‡ºè¡€é€šå¸¸æœ‰ä»¥ä¸‹ç‰¹å¾µï¼š
                </p>
                <div style={{ display: 'grid', gap: 10 }}>
                    {[
                        'é‡å°‘åˆ°ä¸­ç­‰ï¼ˆé€šå¸¸æ¯”æ­£å¸¸æœˆç¶“é‡å°‘ï¼‰',
                        'æš—ç´…è‰²æˆ–è¤è‰²ï¼ˆéé®®ç´…è‰²ï¼‰',
                        'æŒçºŒæ€§æˆ–é–“æ­‡æ€§',
                        'å¯èƒ½åœ¨é æœŸæœˆç¶“æ—¥æœŸå‰å¾Œé–‹å§‹'
                    ].map((item, i) => (
                        <div key={i} style={{
                            background: 'linear-gradient(135deg, #F3E5F5, #E1BEE7)',
                            padding: '10px 14px',
                            borderRadius: 10,
                            fontSize: 14,
                            display: 'flex',
                            alignItems: 'center',
                            gap: 10
                        }}>
                            <span style={{
                                background: '#6A1B9A',
                                color: '#fff',
                                borderRadius: '50%',
                                width: 22,
                                height: 22,
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: 12,
                                fontWeight: 700,
                                flexShrink: 0
                            }}>{i + 1}</span>
                            {item}
                        </div>
                    ))}
                </div>
                <div className="info" style={{ marginTop: 14 }}>
                    <strong>âš ï¸ æ³¨æ„</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        å‡ºè¡€ç‰¹å¾µèˆ‡æ­£å¸¸å­å®®å…§æ‡·å­•çš„å…ˆå…†æµç”¢å¯èƒ½ç›¸ä¼¼ï¼Œç„¡æ³•å–®ç¨ç”¨æ–¼å€åˆ†ã€‚éœ€çµåˆå…¶ä»–æª¢æŸ¥ã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 3: ç†å­¸æª¢æŸ¥èˆ‡å¯¦é©—å®¤æª¢æŸ¥
    const L3 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ” ç†å­¸æª¢æŸ¥ç™¼ç¾</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç†å­¸æª¢æŸ¥</th>
                            <th>LR+ (95% CI)</th>
                            <th>LR-</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td style={{ fontWeight: 700, color: 'var(--pri)' }}>å­å®®é ¸ç§»å‹•ç—›</td>
                            <td><span className="lr-badge lr-high">4.9 (1.0-25)</span></td>
                            <td>0.74</td>
                        </tr>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td style={{ fontWeight: 600 }}>è…¹è†œåˆºæ¿€å¾µè±¡</td>
                            <td><span className="lr-badge lr-high">4.2-4.5</span></td>
                            <td>0.7</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é™„ä»¶è…«å¡Š</td>
                            <td><span className="lr-badge lr-mod">2.4 (1.6-3.7)</span></td>
                            <td>0.55</td>
                        </tr>
                        <tr>
                            <td>é™„ä»¶å£“ç—›</td>
                            <td>1.2 (0.97-1.4)</td>
                            <td>0.67</td>
                        </tr>
                        <tr>
                            <td>è…¹éƒ¨å£“ç—›</td>
                            <td>1.0 (0.84-1.3)</td>
                            <td>0.93</td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>ğŸ’¡ è‡¨åºŠè§£è®€</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        å­å®®é ¸ç§»å‹•ç—›å’Œè…¹è†œåˆºæ¿€å¾µè±¡çš„LR+è¼ƒé«˜ï¼Œä½†95%ä¿¡è³´å€é–“è¼ƒå¯¬ã€‚<strong>æ²’æœ‰ä»»ä½•ç†å­¸æª¢æŸ¥å¯ä»¥å–®ç¨ç¢ºèªæˆ–æ’é™¤å­å®®å¤–å­•</strong>ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>ğŸš¨ ç ´è£‚çš„è­¦ç¤ºå¾µè±¡</h3>
                <div className="danger">
                    <strong>éœ€ç·Šæ€¥è™•ç½®çš„å¾µè±¡ï¼š</strong>
                    <div style={{ display: 'grid', gap: 8, marginTop: 12 }}>
                        {[
                            'è¡€æµå‹•åŠ›å­¸ä¸ç©©å®šï¼ˆä½è¡€å£“ã€å¿ƒæéé€Ÿï¼‰',
                            'æ€¥æ€§è…¹éƒ¨å¾µè±¡ï¼ˆåå½ˆç—›ã€é˜²è¡›ï¼‰',
                            'é¡¯è‘—è…¹éƒ¨è†¨è„¹',
                            'è‚©è†€ç—›ï¼ˆæ©«è†ˆåˆºæ¿€ï¼ŒKehr signï¼‰',
                            'æ„è­˜æ”¹è®Šã€åš´é‡è™›å¼±'
                        ].map((item, i) => (
                            <div key={i} style={{
                                background: '#FFEBEE',
                                padding: '10px 14px',
                                borderRadius: 8,
                                fontSize: 14,
                                display: 'flex',
                                alignItems: 'center',
                                gap: 10
                            }}>
                                <span style={{ color: 'var(--danger)', fontWeight: 700 }}>âš ï¸</span>
                                {item}
                            </div>
                        ))}
                    </div>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ§ª Î²-hCGæª¢æ¸¬</h3>
                <div className="formula">
                    é‘‘åˆ¥é–¾å€¼(Discriminatory Zone) = 1500-3000 mIU/mL
                </div>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 14, lineHeight: 1.8 }}>
                    é‘‘åˆ¥é–¾å€¼æ˜¯æŒ‡ä½¿ç”¨ç¶“é™°é“è¶…éŸ³æ³¢æ™‚ï¼Œæ‡‰å¯åœ¨å­å®®å…§çœ‹åˆ°å¦Šå¨ å›Šçš„æœ€ä½Î²-hCGå€¼ã€‚
                </p>
                <table>
                    <thead>
                        <tr>
                            <th>æƒ…å¢ƒ</th>
                            <th>è‡¨åºŠæ„ç¾©</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>Î²-hCG &gt;é–¾å€¼ + ç„¡å­å®®å…§å¦Šå¨ </td>
                            <td style={{ color: 'var(--danger)', fontWeight: 600 }}>é«˜åº¦æ‡·ç–‘å­å®®å¤–å­•</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>Î²-hCG &lt;é–¾å€¼ + ç„¡å­å®®å…§å¦Šå¨ </td>
                            <td>éœ€é€£çºŒè¿½è¹¤Î²-hCG</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å­å®®å…§ç¢ºèªå¦Šå¨ å›Š+èƒšèƒ</td>
                            <td style={{ color: 'var(--suc)', fontWeight: 600 }}>æ’é™¤å­å®®å¤–å­•*</td>
                        </tr>
                    </tbody>
                </table>
                <div className="info" style={{ marginTop: 14 }}>
                    <strong>*ä¾‹å¤–ï¼šç•°ä½å¦Šå¨ (Heterotopic Pregnancy)</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        å­å®®å…§æ‡·å­•èˆ‡å­å®®å¤–å­•åŒæ™‚å­˜åœ¨ï¼Œè‡ªç„¶æ‡·å­•ä¸­ç´„1/30,000ï¼Œäººå·¥ç”Ÿæ®–å¾Œå¯é”1/100ã€‚å› æ­¤æ¥å—äººå·¥ç”Ÿæ®–çš„æ‚£è€…å³ä½¿çœ‹åˆ°å­å®®å…§å¦Šå¨ å›Šï¼Œä»éœ€æ³¨æ„é™„ä»¶æƒ…æ³ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: '#6A1B9A', marginBottom: 14 }}>ğŸ“ˆ é€£çºŒÎ²-hCGè¿½è¹¤</h3>
                <div className="formula">
                    æ­£å¸¸å­å®®å…§æ‡·å­•ï¼šÎ²-hCGæ¯48å°æ™‚å¢åŠ â‰¥53%<br/>
                    <span style={{ fontSize: 14 }}>ï¼ˆæ›´ä¿å®ˆçš„æ¨™æº–ï¼šâ‰¥35%/48hrï¼‰</span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Î²-hCGè®ŠåŒ–æ¨¡å¼</th>
                            <th>å¯èƒ½è¨ºæ–·</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#E8F5E9' }}>
                            <td>48å°æ™‚å¢åŠ â‰¥53%</td>
                            <td style={{ color: 'var(--suc)', fontWeight: 600 }}>å¯èƒ½æ­£å¸¸å­å®®å…§æ‡·å­•</td>
                        </tr>
                        <tr style={{ background: '#FFF3E0' }}>
                            <td>48å°æ™‚å¢åŠ 53%è‡³ä¸‹é™35%ä¹‹é–“</td>
                            <td style={{ color: 'var(--warn)', fontWeight: 600 }}>ç•°å¸¸æ‡·å­•*ï¼ˆ71%å­å®®å¤–å­•ï¼‰</td>
                        </tr>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td>ä¸‹é™21-35%/48hr</td>
                            <td style={{ color: 'var(--pri)', fontWeight: 600 }}>å¯èƒ½æµç”¢ä¸­</td>
                        </tr>
                    </tbody>
                </table>
                <div className="danger" style={{ marginTop: 14 }}>
                    <strong>âš ï¸ é‡è¦æé†’</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ç´„<strong>21%çš„å­å®®å¤–å­•</strong>ç—…ä¾‹Î²-hCGä¸Šå‡æ¨¡å¼èˆ‡æ­£å¸¸æ‡·å­•ç›¸ä¼¼ï¼ˆâ‰¥53%/48hrï¼‰ï¼Œå› æ­¤Î²-hCGæ­£å¸¸ä¸Šå‡<strong>ä¸èƒ½æ’é™¤å­å®®å¤–å­•</strong>ï¼
                    </p>
                </div>
                <div className="tip">
                    <strong>ğŸ’¡ è‡¨åºŠæ‡‰ç”¨</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        Î²-hCGä¸Šå‡ç·©æ…¢ï¼ˆå°æ–¼35%/48hrï¼‰æä¾›è¼ƒå¥½çš„æ•æ„Ÿåº¦(0.92)å’Œç‰¹ç•°åº¦(0.94)ç”¨æ–¼è¨ºæ–·ç•°å¸¸æ‡·å­•ã€‚71%çš„å­å®®å¤–å­•æœƒå‘ˆç¾ã€Œ53%ä¸Šå‡åˆ°35%ä¸‹é™ã€ä¹‹é–“çš„è®ŠåŒ–æ¨¡å¼ã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 4: è¶…éŸ³æ³¢èˆ‡è¨ºæ–·ç­–ç•¥
    const L4 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ”Š ç¶“é™°é“è¶…éŸ³æ³¢(TVS)ç™¼ç¾</h3>
                <table>
                    <thead>
                        <tr>
                            <th>TVSç™¼ç¾</th>
                            <th>æ•æ„Ÿåº¦</th>
                            <th>ç‰¹ç•°åº¦</th>
                            <th>LR+</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td style={{ fontWeight: 700, color: 'var(--pri)' }}>é™„ä»¶è…«å¡Š</td>
                            <td>26%</td>
                            <td>99.7%</td>
                            <td><span className="lr-badge lr-high">111 (12-1028)</span></td>
                        </tr>
                        <tr style={{ background: '#FCE4EC' }}>
                            <td style={{ fontWeight: 600 }}>é™„ä»¶è™•æœ‰èƒšèƒ/åµé»ƒå›Š</td>
                            <td>-</td>
                            <td>~100%</td>
                            <td>ç¢ºè¨º</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é™„ä»¶ç•°å¸¸ï¼ˆéç‰¹ç•°æ€§ï¼‰</td>
                            <td>84%</td>
                            <td>84%</td>
                            <td>5.3 (3.8-7.4)</td>
                        </tr>
                        <tr>
                            <td>è…¹è…”æ¸¸é›¢æ¶²é«”</td>
                            <td>31%</td>
                            <td>95%</td>
                            <td>5.9 (3.0-12)</td>
                        </tr>
                        <tr>
                            <td>ä¸­é‡/å¤§é‡è…¹è…”æ¶²é«”</td>
                            <td>-</td>
                            <td>-</td>
                            <td>9.0 (2.0-40)</td>
                        </tr>
                    </tbody>
                </table>
                <div className="good">
                    <strong>âœ“ æœ€æœ‰åƒ¹å€¼çš„ç™¼ç¾</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        TVSçœ‹åˆ°<strong>é™„ä»¶è…«å¡Š</strong>æ˜¯æœ€æœ‰è¨ºæ–·åƒ¹å€¼çš„ç™¼ç¾(LR+ = 111)ï¼Œç‰¹ç•°åº¦æ¥µé«˜ã€‚ä½†æ•æ„Ÿåº¦åƒ…26%ï¼Œé™°æ€§çµæœç„¡æ³•æ’é™¤å­å®®å¤–å­•ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ‘ï¸ è¶…éŸ³æ³¢ç™¼ç¾åˆ†é¡</h3>
                <div style={{ display: 'grid', gap: 12 }}>
                    <div style={{
                        background: 'linear-gradient(135deg, #E8F5E9, #C8E6C9)',
                        padding: '16px',
                        borderRadius: 12,
                        border: '2px solid var(--suc)'
                    }}>
                        <h4 style={{ color: 'var(--suc)', marginBottom: 8 }}>âœ“ ç¢ºèªå­å®®å…§æ‡·å­•(IUP)</h4>
                        <ul style={{ marginLeft: 16, fontSize: 13, color: 'var(--txt2)' }}>
                            <li>å¦Šå¨ å›Šå…§æœ‰åµé»ƒå›Š(yolk sac)</li>
                            <li>å¦Šå¨ å›Šå…§æœ‰èƒšèƒ(embryo)</li>
                            <li>å¯è¦‹èƒšèƒå¿ƒè·³</li>
                        </ul>
                        <p style={{ fontSize: 12, color: 'var(--suc)', marginTop: 8, fontWeight: 600 }}>
                            â†’ æ’é™¤å­å®®å¤–å­•ï¼ˆç•°ä½å¦Šå¨ ä¾‹å¤–ï¼‰
                        </p>
                    </div>
                    <div style={{
                        background: 'linear-gradient(135deg, #FCE4EC, #F8BBD9)',
                        padding: '16px',
                        borderRadius: 12,
                        border: '2px solid var(--pri)'
                    }}>
                        <h4 style={{ color: 'var(--pri)', marginBottom: 8 }}>âš ï¸ ç¢ºèªå­å®®å¤–å­•</h4>
                        <ul style={{ marginLeft: 16, fontSize: 13, color: 'var(--txt2)' }}>
                            <li>é™„ä»¶è™•æœ‰åµé»ƒå›Šæˆ–èƒšèƒ</li>
                            <li>é™„ä»¶è™•æœ‰å¦Šå¨ å›Šæ¨£çµæ§‹</li>
                        </ul>
                        <p style={{ fontSize: 12, color: 'var(--pri)', marginTop: 8, fontWeight: 600 }}>
                            â†’ ç¢ºè¨ºå­å®®å¤–å­•
                        </p>
                    </div>
                    <div style={{
                        background: 'linear-gradient(135deg, #FFF3E0, #FFE0B2)',
                        padding: '16px',
                        borderRadius: 12,
                        border: '2px solid var(--warn)'
                    }}>
                        <h4 style={{ color: 'var(--warn)', marginBottom: 8 }}>? ä¸ç¢ºå®š(PUL - Pregnancy of Unknown Location)</h4>
                        <ul style={{ marginLeft: 16, fontSize: 13, color: 'var(--txt2)' }}>
                            <li>é©—å­•é™½æ€§ä½†ç„¡æ˜ç¢ºå­å®®å…§æˆ–å­å®®å¤–å¦Šå¨ </li>
                            <li>å¯èƒ½åƒ…è¦‹å­å®®å…§æ¶²é«”</li>
                        </ul>
                        <p style={{ fontSize: 12, color: 'var(--warn)', marginTop: 8, fontWeight: 600 }}>
                            â†’ éœ€è¿½è¹¤Î²-hCGå’Œé‡è¤‡è¶…éŸ³æ³¢
                        </p>
                    </div>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>âš ï¸ å‡å¦Šå¨ å›Š(Pseudogestational Sac)</h3>
                <div className="danger">
                    <strong>ä»€éº¼æ˜¯å‡å¦Šå¨ å›Šï¼Ÿ</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        å‡å¦Šå¨ å›Šæ˜¯å­å®®å¤–å­•æ™‚ï¼Œå­å®®å…§è†œè›»è†œåæ‡‰å½¢æˆçš„æ¶²é«”ç©èšï¼Œåœ¨è¶…éŸ³æ³¢ä¸‹å¯èƒ½è¢«èª¤èªç‚ºæ—©æœŸå¦Šå¨ å›Šã€‚
                    </p>
                    <div style={{ marginTop: 12 }}>
                        <strong>èˆ‡çœŸå¦Šå¨ å›Šçš„å€åˆ†ï¼š</strong>
                    </div>
                    <table style={{ marginTop: 8 }}>
                        <thead>
                            <tr>
                                <th>ç‰¹å¾µ</th>
                                <th>çœŸå¦Šå¨ å›Š</th>
                                <th>å‡å¦Šå¨ å›Š</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ä½ç½®</td>
                                <td>åå¿ƒä½ç½®(eccentric)</td>
                                <td>ä¸­å¤®ä½ç½®</td>
                            </tr>
                            <tr>
                                <td>é›™ç’°å¾µ</td>
                                <td>å¯è¦‹(double ring)</td>
                                <td>é€šå¸¸ç„¡</td>
                            </tr>
                            <tr>
                                <td>åµé»ƒå›Š/èƒšèƒ</td>
                                <td>ç¨å¾Œå¯è¦‹</td>
                                <td>æ°¸ä¸å‡ºç¾</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“Š è¨ºæ–·ç­–ç•¥æµç¨‹</h3>
                <div style={{
                    background: 'linear-gradient(135deg, #FCE4EC, #F8BBD9)',
                    padding: 20,
                    borderRadius: 16,
                    textAlign: 'center'
                }}>
                    <div style={{ marginBottom: 16 }}>
                        <div style={{
                            background: 'var(--pri)',
                            color: '#fff',
                            padding: '10px 20px',
                            borderRadius: 10,
                            display: 'inline-block',
                            fontWeight: 600
                        }}>
                            æ‡·å­•æ—©æœŸæœ‰ç—‡ç‹€å¥³æ€§<br/>(è…¹ç—›/å‡ºè¡€ + é©—å­•é™½æ€§)
                        </div>
                    </div>
                    <div className="tip" style={{ textAlign: 'left', margin: '12px 0', fontSize: 13 }}>
                        <strong>âš ï¸ IVFç—…äººï¼š</strong>éœ€è€ƒæ…®ç•°ä½å¦Šå¨ (Heterotopic pregnancy)çš„å¯èƒ½ï¼Œå³ä½¿çœ‹åˆ°å­å®®å…§å¦Šå¨ å›Šä»éœ€æª¢æŸ¥é™„ä»¶
                    </div>
                    <div style={{ fontSize: 24, marginBottom: 16 }}>â†“</div>
                    <div style={{ marginBottom: 16 }}>
                        <div style={{
                            background: 'var(--sec)',
                            color: '#fff',
                            padding: '10px 20px',
                            borderRadius: 10,
                            display: 'inline-block',
                            fontWeight: 600
                        }}>
                            ç¶“é™°é“è¶…éŸ³æ³¢ + Î²-hCG
                        </div>
                    </div>
                    <div style={{ display: 'flex', justifyContent: 'center', gap: 20, flexWrap: 'wrap' }}>
                        <div style={{ textAlign: 'center' }}>
                            <div style={{ fontSize: 14, color: 'var(--suc)', fontWeight: 600 }}>ç¢ºèªIUP</div>
                            <div style={{ fontSize: 18 }}>â†“</div>
                            <div style={{
                                background: 'var(--suc)',
                                color: '#fff',
                                padding: '8px 14px',
                                borderRadius: 8,
                                fontSize: 12
                            }}>
                                æ’é™¤å­å®®å¤–å­•
                            </div>
                        </div>
                        <div style={{ textAlign: 'center' }}>
                            <div style={{ fontSize: 14, color: 'var(--danger)', fontWeight: 600 }}>ç¢ºèªEP</div>
                            <div style={{ fontSize: 18 }}>â†“</div>
                            <div style={{
                                background: 'var(--danger)',
                                color: '#fff',
                                padding: '8px 14px',
                                borderRadius: 8,
                                fontSize: 12
                            }}>
                                æ²»ç™‚(MTX/æ‰‹è¡“)
                            </div>
                        </div>
                        <div style={{ textAlign: 'center' }}>
                            <div style={{ fontSize: 14, color: 'var(--warn)', fontWeight: 600 }}>PUL</div>
                            <div style={{ fontSize: 18 }}>â†“</div>
                            <div style={{
                                background: 'var(--warn)',
                                color: '#fff',
                                padding: '8px 14px',
                                borderRadius: 8,
                                fontSize: 12
                            }}>
                                è¿½è¹¤Î²-hCG<br/>48-72hr
                            </div>
                        </div>
                    </div>
                </div>
                <div className="info" style={{ marginTop: 14 }}>
                    <strong>ğŸ’¡ Î²-hCG &lt; 1500 mIU/mL æ™‚</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        è‹¥Î²-hCGä½æ–¼é‘‘åˆ¥é–¾å€¼(1500 mIU/mL)ï¼ŒTVSå¯èƒ½çœ‹ä¸åˆ°å¦Šå¨ å›Š(sac)ï¼Œæ­¤æ™‚å±¬æ–¼PUL (Pregnancy of Unknown Location)ï¼Œéœ€è¿½è¹¤Î²-hCGè®ŠåŒ–ã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 5: è‡¨åºŠæ‡‰ç”¨æ•´åˆ
    const L5 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ¥ Case 1ï¼š28æ­²å¥³æ€§æ€¥æ€§è…¹ç—›</h3>
                <div className="info">
                    <strong>ç—…å²</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        28æ­²å¥³æ€§ï¼Œæœ€å¾Œæœˆç¶“6é€±å‰ï¼Œå› å³ä¸‹è…¹æ€¥æ€§ç–¼ç—›å’Œå°‘é‡é™°é“å‡ºè¡€å°±è¨ºã€‚æ›¾æœ‰éª¨ç›†è…”ç™¼ç‚ç—…å²ã€‚
                        è¡€å£“110/70ï¼Œå¿ƒç‡95ã€‚è…¹éƒ¨è§¸è¨ºå³ä¸‹è…¹å£“ç—›ä½†ç„¡åå½ˆç—›ã€‚é©—å­•é™½æ€§ã€‚
                    </p>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: 'var(--sec)', marginBottom: 10 }}>ğŸ“‹ é¢¨éšªè©•ä¼°</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td style={{ fontWeight: 600 }}>å±éšªå› å­</td>
                                <td>æ›¾æœ‰PID (OR 2.5)</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>ç—‡ç‹€</td>
                                <td>è…¹ç—›ã€é™°é“å‡ºè¡€ï¼ˆLRæ¥è¿‘1.0ï¼‰</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>ç”Ÿå‘½å¾µè±¡</td>
                                <td>ç©©å®š</td>
                            </tr>
                            <tr style={{ background: '#FFF3E0' }}>
                                <td style={{ fontWeight: 700 }}>å‰æ¸¬æ©Ÿç‡</td>
                                <td style={{ fontWeight: 700, color: 'var(--warn)' }}>~15% (æ€¥è¨ºæœ‰ç—‡ç‹€å¥³æ€§)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: 'var(--info)', marginBottom: 10 }}>ğŸ” æª¢æŸ¥çµæœ</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td style={{ fontWeight: 600 }}>Î²-hCG</td>
                                <td>2,500 mIU/mL</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>TVS</td>
                                <td>å­å®®å…§ç„¡å¦Šå¨ å›Šï¼Œå³é™„ä»¶æœ‰2cmè…«å¡Š</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div className="danger" style={{ marginTop: 14 }}>
                    <strong>å¾Œæ¸¬æ©Ÿç‡è¨ˆç®—</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        Î²-hCG &gt;é‘‘åˆ¥é–¾å€¼(1500-3000) + ç„¡å­å®®å…§å¦Šå¨  + é™„ä»¶è…«å¡Š(LR+ = 111)<br/>
                        å‰æ¸¬æ©Ÿç‡ 15% Ã— LR 111 â†’ å¾Œæ¸¬æ©Ÿç‡ &gt;<strong>95%</strong>
                    </p>
                </div>
                <div className="tip" style={{ marginTop: 14 }}>
                    <strong>ğŸ’¡ è™•ç½®</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é«˜åº¦æ‡·ç–‘å­å®®å¤–å­•ã€‚è¡€æµå‹•åŠ›å­¸ç©©å®šï¼Œå¯è€ƒæ…®Methotrexateè—¥ç‰©æ²»ç™‚ã€‚éœ€è¨è«–æ²»ç™‚é¸é …å’Œè¿½è¹¤è¨ˆç•«ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ¥ Case 2ï¼š32æ­²å¥³æ€§å°‘é‡å‡ºè¡€</h3>
                <div className="info">
                    <strong>ç—…å²</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        32æ­²å¥³æ€§ï¼Œæœ€å¾Œæœˆç¶“5é€±å‰ï¼Œå› å°‘é‡é™°é“å‡ºè¡€å°±è¨ºã€‚ç„¡è…¹ç—›ã€‚ç„¡ç‰¹æ®Šå±éšªå› å­ã€‚
                        ç”Ÿå‘½å¾µè±¡ç©©å®šã€‚è…¹éƒ¨å’Œéª¨ç›†æª¢æŸ¥ç„¡ç•°å¸¸ç™¼ç¾ã€‚é©—å­•é™½æ€§ã€‚
                    </p>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: 'var(--info)', marginBottom: 10 }}>ğŸ” æª¢æŸ¥çµæœ</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td style={{ fontWeight: 600 }}>Î²-hCG</td>
                                <td>800 mIU/mL</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>TVS</td>
                                <td>å­å®®å…§ç„¡æ˜ç¢ºå¦Šå¨ å›Šï¼Œé™„ä»¶ç„¡è…«å¡Š</td>
                            </tr>
                            <tr style={{ background: '#FFF3E0' }}>
                                <td style={{ fontWeight: 700 }}>è¨ºæ–·</td>
                                <td style={{ fontWeight: 700, color: 'var(--warn)' }}>PUL (ä½ç½®ä¸æ˜æ‡·å­•)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: '#6A1B9A', marginBottom: 10 }}>ğŸ“ˆ è¿½è¹¤Î²-hCG</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>æ™‚é–“</th>
                                <th>Î²-hCG</th>
                                <th>è®ŠåŒ–</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ç¬¬0å¤©</td>
                                <td>800</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td>ç¬¬2å¤©(48hr)</td>
                                <td>1,100</td>
                                <td style={{ color: 'var(--warn)', fontWeight: 600 }}>+37.5% (&lt;53%ç•°å¸¸)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div className="tip" style={{ marginTop: 14 }}>
                    <strong>ğŸ’¡ è™•ç½®</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        Î²-hCGä¸Šå‡ä½æ–¼53%/48hrï¼Œç¬¦åˆç•°å¸¸æ‡·å­•ã€‚éœ€é‡è¤‡è¶…éŸ³æ³¢ã€‚è‹¥ä»ç„¡æ³•å®šä½ï¼Œå¯èƒ½éœ€è¦ï¼š<br/>
                        (1) ç¹¼çºŒè¿½è¹¤ç›´åˆ°Î²-hCGé”é‘‘åˆ¥é–¾å€¼<br/>
                        (2) å­å®®å…§è†œå–æ¨£ï¼ˆD&Cï¼‰ä»¥ç¢ºèªæ˜¯å¦ç‚ºæµç”¢<br/>
                        (3) è‹¥é«˜åº¦æ‡·ç–‘å­å®®å¤–å­•ï¼Œè€ƒæ…®æ²»ç™‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ’Š æ²»ç™‚é¸é …</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æ²»ç™‚</th>
                            <th>é©æ‡‰ç—‡</th>
                            <th>ç¦å¿Œç—‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>Methotrexate<br/>(MTX)</td>
                            <td>
                                <ul style={{ marginLeft: 16, fontSize: 12 }}>
                                    <li>è¡€æµå‹•åŠ›å­¸ç©©å®š</li>
                                    <li>æœªç ´è£‚</li>
                                    <li>Î²-hCG &lt;5000</li>
                                    <li>è…«å¡Š&lt;4cmç„¡èƒå¿ƒ</li>
                                </ul>
                            </td>
                            <td>
                                <ul style={{ marginLeft: 16, fontSize: 12 }}>
                                    <li>ä¸ç©©å®š</li>
                                    <li>è‚è…åŠŸèƒ½ç•°å¸¸</li>
                                    <li>å…ç–«ç¼ºé™·</li>
                                    <li>æ¯ä¹³å“ºè‚²</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>è…¹è…”é¡æ‰‹è¡“</td>
                            <td>
                                <ul style={{ marginLeft: 16, fontSize: 12 }}>
                                    <li>MTXç¦å¿Œæˆ–å¤±æ•—</li>
                                    <li>è¼ƒå¤§è…«å¡Š</li>
                                    <li>æ‚£è€…åå¥½</li>
                                </ul>
                            </td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--danger)' }}>ç·Šæ€¥å‰–è…¹æ¢æŸ¥</td>
                            <td>
                                <ul style={{ marginLeft: 16, fontSize: 12 }}>
                                    <li>è¡€æµå‹•åŠ›å­¸ä¸ç©©å®š</li>
                                    <li>æ˜é¡¯è…¹è…”å…§å‡ºè¡€</li>
                                </ul>
                            </td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--suc)', marginBottom: 14 }}>âœ… æ ¸å¿ƒé‡é»ç¸½çµ</h3>
                <div style={{ display: 'grid', gap: 12 }}>
                    {[
                        'æ€¥è¨ºæœ‰ç—‡ç‹€å¥³æ€§å­å®®å¤–å­•ç››è¡Œç‡ç´„15%',
                        'æ›¾æœ‰å­å®®å¤–å­•ç—…å²æ˜¯æœ€å¼·å±éšªå› å­(OR 8.3)',
                        'ç—‡ç‹€å’Œç†å­¸æª¢æŸ¥çš„LR+å¤§å¤šæ¥è¿‘1.0ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™',
                        'å­å®®é ¸ç§»å‹•ç—›LR+ = 4.9ï¼Œè…¹è†œåˆºæ¿€å¾µè±¡LR+ = 4.2-4.5',
                        'TVSçœ‹åˆ°é™„ä»¶è…«å¡ŠLR+ = 111ï¼Œä½†æ•æ„Ÿåº¦åƒ…26%',
                        'Î²-hCGé‘‘åˆ¥é–¾å€¼ç‚º1500-3000 mIU/mL',
                        'æ­£å¸¸æ‡·å­•Î²-hCGæ¯48å°æ™‚å¢åŠ â‰¥53%ï¼ˆä¿å®ˆæ¨™æº–â‰¥35%ï¼‰',
                        '71%å­å®®å¤–å­•å‘ˆç¾ã€Œ53%ä¸Šå‡åˆ°35%ä¸‹é™ã€ä¹‹é–“çš„è®ŠåŒ–',
                        '21%å­å®®å¤–å­•Î²-hCGä¸Šå‡èˆ‡æ­£å¸¸æ‡·å­•ç›¸ä¼¼ï¼Œæ­£å¸¸ä¸Šå‡ä¸èƒ½æ’é™¤ï¼'
                    ].map((item, i) => (
                        <div key={i} style={{
                            background: 'linear-gradient(135deg, #E8F5E9, #C8E6C9)',
                            padding: '12px 16px',
                            borderRadius: 12,
                            display: 'flex',
                            alignItems: 'center',
                            gap: 12
                        }}>
                            <span style={{
                                background: 'var(--suc)',
                                color: '#fff',
                                borderRadius: '50%',
                                width: 24,
                                height: 24,
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: 12,
                                fontWeight: 700,
                                flexShrink: 0
                            }}>âœ“</span>
                            <span style={{ fontSize: 14, color: 'var(--txt)' }}>{item}</span>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );

    const Lesson = () => {
        const l = lessons.find(x => x.id === lessonId);
        return (
            <div className="fade-in">
                <Header title={l.title} />
                <div style={{ background: `linear-gradient(135deg, ${l.color}, ${l.color}88)`, padding: '20px', color: '#fff' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        <div style={{ fontSize: 12, opacity: 0.9 }}>Lesson {l.id} â€¢ {l.sub}</div>
                        <h1 style={{ fontSize: 24, fontWeight: 700 }}>{l.title}</h1>
                    </div>
                </div>
                <div style={{ padding: '20px 16px' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        {lessonId === 1 && <L1 />}
                        {lessonId === 2 && <L2 />}
                        {lessonId === 3 && <L3 />}
                        {lessonId === 4 && <L4 />}
                        {lessonId === 5 && <L5 />}
                        <div style={{ display: 'flex', gap: 12, marginTop: 24 }}>
                            {lessonId > 1 && (
                                <button className="btn" style={{ flex: 1, background: '#fff', border: '2px solid var(--pri)', color: 'var(--pri)' }} onClick={() => setLessonId(lessonId - 1)}>
                                    â† ä¸Šä¸€èª²
                                </button>
                            )}
                            {lessonId < 5 ? (
                                <button className="btn btn-pri" style={{ flex: 1 }} onClick={() => setLessonId(lessonId + 1)}>
                                    ä¸‹ä¸€èª² â†’
                                </button>
                            ) : (
                                <button className="btn btn-sec" style={{ flex: 1 }} onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); setPage('quiz'); }}>
                                    é–‹å§‹æ¸¬é©— ğŸ“
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    const Quiz = () => {
        const pick = (i) => { if (show) return; setSel(i); setShow(true); if (i === quiz[qIdx].c) setScore(score + 1); };
        const next = () => { if (qIdx < quiz.length - 1) { setQIdx(qIdx + 1); setSel(null); setShow(false); } else setDone(true); };

        if (done) {
            const pct = Math.round((score / quiz.length) * 100);
            return (
                <div className="fade-in">
                    <Header title="æ¸¬é©—çµæœ" />
                    <div style={{ padding: '48px 16px', textAlign: 'center' }}>
                        <div style={{
                            width: 150,
                            height: 150,
                            borderRadius: '50%',
                            background: `conic-gradient(${pct >= 80 ? 'var(--suc)' : pct >= 60 ? 'var(--warn)' : 'var(--danger)'} ${pct * 3.6}deg, #E5E5E5 0deg)`,
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            margin: '0 auto 28px',
                            boxShadow: '0 8px 32px rgba(0,0,0,0.1)'
                        }}>
                            <div style={{
                                width: 126,
                                height: 126,
                                borderRadius: '50%',
                                background: '#fff',
                                display: 'flex',
                                flexDirection: 'column',
                                alignItems: 'center',
                                justifyContent: 'center'
                            }}>
                                <div style={{ fontSize: 40, fontWeight: 700, color: 'var(--txt)' }}>{pct}%</div>
                                <div style={{ fontSize: 15, color: 'var(--txt2)' }}>{score}/{quiz.length}</div>
                            </div>
                        </div>
                        <h2 style={{ fontSize: 26, fontWeight: 700, marginBottom: 10 }}>
                            {pct >= 80 ? 'ğŸ‰ å„ªç§€ï¼' : pct >= 60 ? 'ğŸ‘ ä¸éŒ¯ï¼' : 'ğŸ’ª åŠ æ²¹ï¼'}
                        </h2>
                        <p style={{ color: 'var(--txt2)', marginBottom: 36, fontSize: 15 }}>
                            {pct >= 80 ? 'ä½ å°å­å®®å¤–å­•è©•ä¼°æŒæ¡è‰¯å¥½ï¼' : pct >= 60 ? 'å†è¤‡ç¿’å¯ä»¥æ›´é€²æ­¥ï¼' : 'å»ºè­°é‡æ–°é–±è®€èª²ç¨‹å…§å®¹'}
                        </p>
                        <div style={{ display: 'flex', gap: 14, justifyContent: 'center', flexWrap: 'wrap' }}>
                            <button className="btn btn-pri" onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); }}>
                                é‡æ–°æ¸¬é©—
                            </button>
                            <button className="btn" style={{ background: '#fff', border: '2px solid var(--pri)', color: 'var(--pri)' }} onClick={() => setPage('home')}>
                                è¿”å›èª²ç¨‹
                            </button>
                        </div>
                    </div>
                    <footer style={{ background: 'linear-gradient(135deg, #FCE4EC, #F8BBD9)', padding: '28px 16px', textAlign: 'center', marginTop: 48 }}>
                        <p style={{ fontSize: 12, color: 'var(--txt2)' }}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨ | è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
                    </footer>
                </div>
            );
        }

        const q = quiz[qIdx];
        return (
            <div className="fade-in">
                <Header title="è‡ªæˆ‘æ¸¬é©—" />
                <div style={{ padding: '20px 16px' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 10, fontSize: 14 }}>
                            <span style={{ color: 'var(--txt2)' }}>é€²åº¦</span>
                            <span style={{ fontWeight: 600, color: 'var(--pri)' }}>{qIdx + 1}/{quiz.length}</span>
                        </div>
                        <div style={{ height: 10, background: '#E5E5E5', borderRadius: 5, marginBottom: 24, overflow: 'hidden' }}>
                            <div style={{
                                height: '100%',
                                width: `${((qIdx + 1) / quiz.length) * 100}%`,
                                background: 'linear-gradient(90deg, var(--pri), var(--pri2))',
                                borderRadius: 5,
                                transition: 'width 0.4s ease'
                            }} />
                        </div>
                        <div className="card">
                            <h3 style={{ fontSize: 16, fontWeight: 600, lineHeight: 1.7, marginBottom: 22, color: 'var(--txt)' }}>{q.q}</h3>
                            {q.o.map((opt, i) => {
                                let bg = '#fff', bd = '#E5E5E5';
                                if (show) {
                                    if (i === q.c) { bg = '#E8F5E9'; bd = 'var(--suc)'; }
                                    else if (i === sel) { bg = '#FFEBEE'; bd = 'var(--danger)'; }
                                } else if (i === sel) { bg = '#FCE4EC'; bd = 'var(--pri)'; }
                                return (
                                    <button
                                        key={i}
                                        onClick={() => pick(i)}
                                        disabled={show}
                                        style={{
                                            width: '100%',
                                            padding: '14px 16px',
                                            marginBottom: 12,
                                            background: bg,
                                            border: `2px solid ${bd}`,
                                            borderRadius: 14,
                                            textAlign: 'left',
                                            fontSize: 14,
                                            cursor: show ? 'default' : 'pointer',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: 14,
                                            transition: 'all 0.2s ease'
                                        }}
                                    >
                                        <span style={{
                                            width: 30,
                                            height: 30,
                                            borderRadius: 10,
                                            background: show && i === q.c ? 'var(--suc)' : show && i === sel ? 'var(--danger)' : 'linear-gradient(135deg, #FCE4EC, #F8BBD9)',
                                            color: show && (i === q.c || i === sel) ? '#fff' : 'var(--pri)',
                                            display: 'flex',
                                            alignItems: 'center',
                                            justifyContent: 'center',
                                            fontWeight: 700,
                                            fontSize: 14,
                                            flexShrink: 0
                                        }}>
                                            {show && i === q.c ? 'âœ“' : show && i === sel && i !== q.c ? 'âœ—' : String.fromCharCode(65 + i)}
                                        </span>
                                        <span style={{ lineHeight: 1.6, color: 'var(--txt)' }}>{opt}</span>
                                    </button>
                                );
                            })}
                        </div>
                        {show && (
                            <div className={sel === q.c ? 'good' : 'tip'}>
                                <strong style={{ color: sel === q.c ? 'var(--suc)' : '#F57F17' }}>
                                    {sel === q.c ? 'âœ“ æ­£ç¢ºï¼' : 'âœ— ç­”éŒ¯äº†'}
                                </strong>
                                <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 10, lineHeight: 1.8 }}>{q.e}</p>
                            </div>
                        )}
                        {show && (
                            <button className="btn btn-pri" style={{ width: '100%', justifyContent: 'center', marginTop: 20 }} onClick={next}>
                                {qIdx < quiz.length - 1 ? 'ä¸‹ä¸€é¡Œ â†’' : 'æŸ¥çœ‹çµæœ'}
                            </button>
                        )}
                    </div>
                </div>
            </div>
        );
    };

    return (
        <div style={{ maxWidth: '100%', minHeight: '100vh', background: 'var(--bg)' }}>
            <BadgeToast badges={newBadges} onClose={closeBadge} />
            {page === 'home' ? <Home /> : page === 'lesson' ? <Lesson /> : <Quiz />}
        </div>
    );
};

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
