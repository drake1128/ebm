<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é˜»å¡æ€§ç¡çœ å‘¼å¸ä¸­æ­¢ç—‡è©•ä¼° | JAMA Rational Clinical Examination</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --pri: #5E35B1;
            --pri2: #7E57C2;
            --sec: #3949AB;
            --sec2: #5C6BC0;
            --suc: #2E7D32;
            --warn: #F9A825;
            --danger: #B71C1C;
            --info: #00838F;
            --bg: #F5F3FF;
            --txt: #37474F;
            --txt2: #607D8B;
            --card-shadow: 0 4px 20px rgba(94, 53, 177, 0.08);
        }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--bg);
            color: var(--txt);
            line-height: 1.8;
            -webkit-font-smoothing: antialiased;
        }
        .card {
            background: #fff;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(94, 53, 177, 0.08);
        }
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 14px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        .btn-pri { background: linear-gradient(135deg, var(--pri), var(--pri2)); color: #fff; }
        .btn-pri:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(94, 53, 177, 0.3); }
        .btn-sec { background: linear-gradient(135deg, var(--sec), var(--sec2)); color: #fff; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; margin: 12px 0; }
        th, td { padding: 12px 10px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: linear-gradient(135deg, #EDE7F6, #D1C4E9); font-weight: 600; color: var(--pri); }
        .formula {
            background: linear-gradient(135deg, #EDE7F6, #D1C4E9);
            border: 2px solid var(--pri2);
            border-radius: 16px;
            padding: 18px;
            margin: 14px 0;
            text-align: center;
            font-family: 'Crimson Pro', serif;
            font-size: 18px;
            color: var(--txt);
            font-weight: 600;
        }
        .tip {
            background: linear-gradient(135deg, #FFF8E1, #FFECB3);
            border-left: 4px solid var(--warn);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .good {
            background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
            border-left: 4px solid var(--suc);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .danger {
            background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
            border-left: 4px solid var(--danger);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .info {
            background: linear-gradient(135deg, #E0F7FA, #B2EBF2);
            border-left: 4px solid var(--info);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .lr-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 6px;
        }
        .lr-high { background: #D1C4E9; color: #4527A0; }
        .lr-mod { background: #FFF9C4; color: #F57F17; }
        .lr-low { background: #C8E6C9; color: #1B5E20; }
        .score-box {
            background: linear-gradient(135deg, #FAFAFA, #F5F5F5);
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            padding: 12px;
            margin: 8px 0;
        }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

const MODULE_ID='jama-osa';

const ProgressTracker={
    STORAGE_KEY:'ebm-progress',
    getProgress:()=>{try{const d=localStorage.getItem(ProgressTracker.STORAGE_KEY);return d?JSON.parse(d):{version:1,modules:{},badges:[],totalTimeSpent:0}}catch{return{version:1,modules:{},badges:[],totalTimeSpent:0}}},
    saveQuizResult:(moduleId,score,total,timeSpent)=>{
        const progress=ProgressTracker.getProgress();
        const mod=progress.modules[moduleId]||{bestScore:0,totalAttempts:0,allAttempts:[],lessonsViewed:[],completed:false,firstCompleted:null};
        const attempt={date:new Date().toISOString(),score,timeSpent};
        mod.allAttempts.push(attempt);mod.totalAttempts++;
        if(score>mod.bestScore)mod.bestScore=score;
        const passingScore=Math.ceil(total*0.7);
        if(score>=passingScore&&!mod.completed){mod.completed=true;mod.firstCompleted=attempt.date}
        progress.modules[moduleId]=mod;progress.totalTimeSpent+=timeSpent;progress.lastUpdated=new Date().toISOString();
        ProgressTracker.checkBadges(progress,score,total,timeSpent);
        localStorage.setItem(ProgressTracker.STORAGE_KEY,JSON.stringify(progress));return progress;
    },
    checkBadges:(progress,score,total,timeSpent)=>{
        const badges=progress.badges||[];const ids=badges.map(b=>b.id);const now=new Date().toISOString();
        if(!ids.includes('first-quiz'))badges.push({id:'first-quiz',earnedAt:now});
        if(score===total&&!ids.includes('perfect-score'))badges.push({id:'perfect-score',earnedAt:now});
        if(timeSpent<120&&!ids.includes('speed-demon'))badges.push({id:'speed-demon',earnedAt:now});
        const completed=Object.values(progress.modules).filter(m=>m.completed).length;
        if(completed>=5&&!ids.includes('five-complete'))badges.push({id:'five-complete',earnedAt:now});
        if(completed>=10&&!ids.includes('ten-complete'))badges.push({id:'ten-complete',earnedAt:now});
        if(completed>=18&&!ids.includes('master'))badges.push({id:'master',earnedAt:now});
        const mod=progress.modules[MODULE_ID];
        if(mod&&mod.totalAttempts>=3&&!ids.includes('persistent'))badges.push({id:'persistent',earnedAt:now});
        progress.badges=badges;
    }
};

const lessons = [
    { id: 1, title: 'OSAæ¦‚è«–èˆ‡æµè¡Œç—…å­¸', sub: 'OSA Overview & Epidemiology', color: '#5E35B1' },
    { id: 2, title: 'ç—‡ç‹€èˆ‡ç—…å²è©•ä¼°', sub: 'Symptoms & History', color: '#3949AB' },
    { id: 3, title: 'ç†å­¸æª¢æŸ¥èˆ‡è§£å‰–è©•ä¼°', sub: 'Physical Examination', color: '#00838F' },
    { id: 4, title: 'è‡¨åºŠé æ¸¬è¦å‰‡', sub: 'Clinical Prediction Rules', color: '#00695C' },
    { id: 5, title: 'è‡¨åºŠæ‡‰ç”¨æ•´åˆ', sub: 'Clinical Application', color: '#1565C0' }
];

const quiz = [
    {
        q: 'æ ¹æ“šJAMAç³»çµ±æ€§å›é¡§ï¼Œç¡çœ é–€è¨ºè½‰ä»‹æ‚£è€…ä¸­OSAçš„ç››è¡Œç‡ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o: ['10-20%', '21-90%', '50-60%', '5-10%'],
        c: 1,
        e: 'ç¡çœ é–€è¨ºè½‰ä»‹æ‚£è€…ä¸­OSAç››è¡Œç‡ç‚º21%-90%ï¼Œè€Œç¤¾å€ä¸€èˆ¬æ—ç¾¤çš„ç››è¡Œç‡è¼ƒä½ï¼Œç´„ç‚º2%-14%ã€‚é€™åæ˜ äº†è½‰ä»‹åå·®çš„é‡è¦æ€§ã€‚'
    },
    {
        q: 'ä¸‹åˆ—å“ªå€‹ç—‡ç‹€å°æ–¼é æ¸¬OSAå…·æœ‰æœ€é«˜çš„é™½æ€§ä¼¼ç„¶æ¯”(LR+)ï¼Ÿ',
        o: ['æ‰“é¼¾', 'å¤œé–“çª’æ¯æˆ–å–˜æ°£æ„Ÿ', 'ç›®æ“Šå‘¼å¸ä¸­æ­¢', 'æ—¥é–“å—œç¡'],
        c: 1,
        e: 'å¤œé–“çª’æ¯æˆ–å–˜æ°£æ„Ÿçš„LR+ = 3.3 (95% CI, 2.1-5.1)ï¼Œæ˜¯æ‰€æœ‰ç—‡ç‹€ä¸­æœ€æœ‰è¨ºæ–·åƒ¹å€¼çš„ã€‚æ‰“é¼¾çš„LR+åƒ…1.1ï¼Œå¹¾ä¹ç„¡è¨ºæ–·åƒ¹å€¼ã€‚'
    },
    {
        q: 'é—œæ–¼æ‰“é¼¾å°OSAçš„è¨ºæ–·åƒ¹å€¼ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['LR+ = 3.3ï¼Œé«˜åº¦è¨ºæ–·åƒ¹å€¼', 'LR+ = 1.1ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™', 'LR- = 0.2ï¼Œå¯æœ‰æ•ˆæ’é™¤OSA', 'æ•æ„Ÿåº¦ä½æ–¼50%'],
        c: 1,
        e: 'æ‰“é¼¾çš„LR+ = 1.1 (95% CI, 0.9-1.2)ï¼Œæ¥è¿‘1.0ï¼Œå°OSAè¨ºæ–·å¹¾ä¹æ²’æœ‰å¹«åŠ©ã€‚æ‰“é¼¾æ•æ„Ÿåº¦é«˜(>90%)ä½†ç‰¹ç•°åº¦æ¥µä½ï¼Œå› æ­¤ä¸èƒ½ç”¨ä¾†ç¢ºèªæˆ–æ’é™¤OSAã€‚'
    },
    {
        q: 'ä¸‹åˆ—å“ªå€‹ç†å­¸æª¢æŸ¥ç™¼ç¾å°OSAçš„è¨ºæ–·åƒ¹å€¼æœ€é«˜ï¼Ÿ',
        o: ['BMI > 30', 'é ¸åœ > 43 cm (ç”·æ€§)', 'Mallampatiåˆ†ç´š III-IV', 'ä»¥ä¸Šçš†æœ‰é™'],
        c: 3,
        e: 'é›–ç„¶Mallampatiåˆ†ç´šIII-IVçš„LR+ = 2.0ï¼Œé ¸åœå¢åŠ å’ŒBMIå‡é«˜ä¹Ÿèˆ‡OSAç›¸é—œï¼Œä½†æ²’æœ‰å–®ä¸€ç†å­¸æª¢æŸ¥ç™¼ç¾å…·æœ‰è¶³å¤ é«˜çš„LR+å¯ä»¥ç¢ºèªOSAè¨ºæ–·ã€‚'
    },
    {
        q: 'STOP-Bangå•å·ä¸­ï¼Œé«˜é¢¨éšªå®šç¾©ç‚ºå¹¾åˆ†ä»¥ä¸Šï¼Ÿ',
        o: ['2åˆ†', '3åˆ†', '4åˆ†', '5åˆ†'],
        c: 1,
        e: 'STOP-Bangå•å·ç¸½åˆ†0-8åˆ†ï¼Œâ‰¥3åˆ†å®šç¾©ç‚ºé«˜é¢¨éšªã€‚ç ”ç©¶é¡¯ç¤ºSTOP-Bang â‰¥3åˆ†çš„æ•æ„Ÿåº¦ç‚º93%ï¼Œä½†ç‰¹ç•°åº¦åƒ…36%ã€‚'
    },
    {
        q: 'æŸæ—å•å·(Berlin Questionnaire)åŒ…å«å“ªäº›é¡åˆ¥çš„è©•ä¼°ï¼Ÿ',
        o: ['æ‰“é¼¾ã€å—œç¡ã€è‚¥èƒ–/é«˜è¡€å£“', 'æ‰“é¼¾ã€å¤±çœ ã€ç„¦æ…®', 'å—œç¡ã€é ­ç—›ã€æ†‚é¬±', 'å‘¼å¸å›°é›£ã€èƒ¸ç—›ã€å¿ƒæ‚¸'],
        c: 0,
        e: 'æŸæ—å•å·è©•ä¼°ä¸‰å€‹é¡åˆ¥ï¼š(1)æ‰“é¼¾çš„é »ç‡å’ŒéŸ¿åº¦ã€(2)æ—¥é–“å—œç¡ã€(3)è‚¥èƒ–æˆ–é«˜è¡€å£“ã€‚è‹¥2å€‹ä»¥ä¸Šé¡åˆ¥é™½æ€§å‰‡åˆ¤å®šç‚ºé«˜é¢¨éšªã€‚'
    },
    {
        q: 'é—œæ–¼Epworthå—œç¡é‡è¡¨(ESS)ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['å°ˆé–€è¨­è¨ˆç”¨æ–¼è¨ºæ–·OSA', 'åˆ†æ•¸>10è¡¨ç¤ºéåº¦æ—¥é–“å—œç¡', 'ESSå‡é«˜å°OSAçš„LR+ > 5', 'æ­£å¸¸ESSå¯æ’é™¤OSA'],
        c: 1,
        e: 'ESSç”¨æ–¼è©•ä¼°æ—¥é–“å—œç¡ç¨‹åº¦ï¼Œåˆ†æ•¸0-24åˆ†ï¼Œ>10åˆ†è¡¨ç¤ºéåº¦æ—¥é–“å—œç¡ã€‚ä½†ESSä¸¦éå°ˆç‚ºOSAè¨­è¨ˆï¼ŒESSå‡é«˜çš„LR+åƒ…1.4ï¼Œç„¡æ³•æœ‰æ•ˆè¨ºæ–·æˆ–æ’é™¤OSAã€‚'
    },
    {
        q: 'å‘¼å¸ä¸­æ­¢ä½é€šæ°£æŒ‡æ•¸(AHI)çš„è‡¨åºŠåˆ†ç´šï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['è¼•åº¦:5-10, ä¸­åº¦:10-20, é‡åº¦:>20', 'è¼•åº¦:5-15, ä¸­åº¦:15-30, é‡åº¦:â‰¥30', 'è¼•åº¦:1-5, ä¸­åº¦:5-15, é‡åº¦:>15', 'è¼•åº¦:10-20, ä¸­åº¦:20-40, é‡åº¦:>40'],
        c: 1,
        e: 'AHIåˆ†ç´šï¼šè¼•åº¦OSAç‚º5-15æ¬¡/å°æ™‚ï¼Œä¸­åº¦OSAç‚º15-30æ¬¡/å°æ™‚ï¼Œé‡åº¦OSAç‚ºâ‰¥30æ¬¡/å°æ™‚ã€‚AHI<5è¦–ç‚ºæ­£å¸¸ã€‚'
    },
    {
        q: 'é—œæ–¼è‡¨åºŠé æ¸¬è¦å‰‡çš„é™åˆ¶ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['å¯å–ä»£å¤šé »é“ç¡çœ æª¢æŸ¥(PSG)', 'STOP-Bangé«˜é¢¨éšªå¯ç¢ºèªOSAè¨ºæ–·', 'å¤§å¤šæ•¸è¦å‰‡ç¼ºä¹è¶³å¤ é«˜çš„LR+ä¾†ç¢ºèªè¨ºæ–·', 'ä½é¢¨éšªå¯å®‰å…¨æ’é™¤OSA'],
        c: 2,
        e: 'ç¾æœ‰è‡¨åºŠé æ¸¬è¦å‰‡çš„ä¸»è¦é™åˆ¶æ˜¯å¤§å¤šæ•¸ç¼ºä¹è¶³å¤ é«˜çš„LR+ä¾†ç¢ºèªè¨ºæ–·ï¼Œä¹Ÿç¼ºä¹è¶³å¤ ä½çš„LR-ä¾†å®Œå…¨æ’é™¤OSAã€‚å› æ­¤ä»éœ€ä¾è³´PSGæˆ–å±…å®¶ç¡çœ æª¢æ¸¬ä¾†ç¢ºè¨ºã€‚'
    },
    {
        q: 'é—œæ–¼OSAçš„å¥åº·å¾Œæœï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['åƒ…å½±éŸ¿ç¡çœ å“è³ª', 'OSAèˆ‡å¿ƒè¡€ç®¡ç–¾ç—…ã€ä¸­é¢¨é¢¨éšªå¢åŠ ç›¸é—œ', 'OSAä¸å½±éŸ¿ä»£è¬åŠŸèƒ½', 'OSAæ‚£è€…é§•é§›å®‰å…¨æ€§ä¸å—å½±éŸ¿'],
        c: 1,
        e: 'OSAèˆ‡å¤šç¨®å¥åº·å•é¡Œç›¸é—œï¼ŒåŒ…æ‹¬ï¼šé«˜è¡€å£“ã€å¿ƒè¡€ç®¡ç–¾ç—…ã€ä¸­é¢¨ã€ç¬¬2å‹ç³–å°¿ç—…ã€ä»£è¬ç—‡å€™ç¾¤ï¼Œä»¥åŠå› å—œç¡å°è‡´çš„äº¤é€šäº‹æ•…é¢¨éšªå¢åŠ 2-7å€ã€‚'
    }
];

const App = () => {
    const [page, setPage] = useState('home');
    const [lessonId, setLessonId] = useState(1);
    const [qIdx, setQIdx] = useState(0);
    const [score, setScore] = useState(0);
    const [sel, setSel] = useState(null);
    const [show, setShow] = useState(false);
    const [done, setDone] = useState(false);
    const [quizStartTime, setQuizStartTime] = useState(null);

    useEffect(() => { if (page === 'quiz' && !done && !quizStartTime) setQuizStartTime(Date.now()) }, [page, done]);
    useEffect(() => { if (done && quizStartTime) { const t = Math.round((Date.now() - quizStartTime) / 1000); ProgressTracker.saveQuizResult(MODULE_ID, score, quiz.length, t) } }, [done]);

    const Header = ({ title }) => (
        <header style={{
            background: '#fff',
            borderBottom: '1px solid rgba(94, 53, 177, 0.1)',
            padding: '14px 16px',
            position: 'sticky',
            top: 0,
            zIndex: 10,
            backdropFilter: 'blur(10px)'
        }}>
            <div style={{ maxWidth: 480, margin: '0 auto', display: 'flex', alignItems: 'center', gap: 12 }}>
                <button
                    onClick={() => page === 'home' ? window.location.href = 'jama-rational-exam.html' : setPage('home')}
                    style={{
                        background: 'linear-gradient(135deg, #EDE7F6, #D1C4E9)',
                        border: 'none',
                        borderRadius: 12,
                        width: 42,
                        height: 42,
                        cursor: 'pointer',
                        color: 'var(--pri)',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        boxShadow: '0 2px 8px rgba(94, 53, 177, 0.1)'
                    }}
                >
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <span style={{ fontWeight: 700, color: 'var(--txt)', fontSize: 16 }}>{title}</span>
            </div>
        </header>
    );

    const Home = () => (
        <div className="fade-in">
            <Header title="é˜»å¡æ€§ç¡çœ å‘¼å¸ä¸­æ­¢ç—‡" />
            <div style={{
                background: 'linear-gradient(135deg, #5E35B1 0%, #3949AB 50%, #1A237E 100%)',
                padding: '36px 20px 44px',
                color: '#fff',
                position: 'relative',
                overflow: 'hidden'
            }}>
                <div style={{
                    position: 'absolute',
                    top: -30,
                    right: -30,
                    width: 150,
                    height: 150,
                    borderRadius: '50%',
                    background: 'rgba(255,255,255,0.1)'
                }} />
                <div style={{ maxWidth: 480, margin: '0 auto', position: 'relative', zIndex: 1 }}>
                    <div style={{
                        background: 'rgba(255,255,255,0.2)',
                        display: 'inline-block',
                        padding: '8px 16px',
                        borderRadius: 50,
                        fontSize: 12,
                        fontWeight: 600,
                        marginBottom: 16,
                        backdropFilter: 'blur(10px)'
                    }}>
                        ğŸ˜´ JAMA Rational Clinical Examination
                    </div>
                    <h1 style={{ fontSize: 24, fontWeight: 700, marginBottom: 12, lineHeight: 1.3 }}>
                        Does This Patient Have Obstructive Sleep Apnea?
                    </h1>
                    <p style={{ opacity: 0.95, fontSize: 14, lineHeight: 1.7 }}>
                        é˜»å¡æ€§ç¡çœ å‘¼å¸ä¸­æ­¢ç—‡çš„è‡¨åºŠè©•ä¼°
                    </p>
                    <p style={{ opacity: 0.8, fontSize: 12, marginTop: 8 }}>
                        Myers KA, et al. JAMA. 2013;310(7):731-741
                    </p>
                    <a
                        href="https://jamanetwork.com/journals/jama/fullarticle/1730517"
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                            display:'inline-flex',
                            alignItems:'center',
                            gap:6,
                            background:'rgba(255,255,255,0.25)',
                            color:'#fff',
                            padding:'8px 16px',
                            borderRadius:25,
                            fontSize:13,
                            fontWeight:600,
                            textDecoration:'none',
                            backdropFilter:'blur(10px)',
                            marginTop: 12,
                            transition:'all 0.3s'
                        }}
                    >
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
                        é–±è®€åŸæ–‡ Read Full Article
                    </a>
                </div>
            </div>

            <div style={{ padding: '0 16px', marginTop: -24 }}>
                <div style={{ maxWidth: 480, margin: '0 auto' }}>
                    <div className="card">
                        <h3 style={{ fontSize: 17, fontWeight: 700, color: 'var(--pri)', marginBottom: 14, display: 'flex', alignItems: 'center', gap: 8 }}>
                            <span style={{ fontSize: 22 }}>ğŸ¯</span> å­¸ç¿’ç›®æ¨™
                        </h3>
                        {[
                            'äº†è§£OSAçš„æµè¡Œç—…å­¸èˆ‡å¥åº·å½±éŸ¿',
                            'æŒæ¡ç—…å²å’Œç—‡ç‹€å°OSAçš„è¨ºæ–·åƒ¹å€¼',
                            'ç†Ÿæ‚‰STOP-Bangèˆ‡æŸæ—å•å·ç­‰è©•ä¼°å·¥å…·',
                            'å­¸ç¿’æ•´åˆè‡¨åºŠè³‡è¨Šé€²è¡Œé¢¨éšªåˆ†å±¤'
                        ].map((t, i) => (
                            <div key={i} style={{ display: 'flex', gap: 12, marginBottom: 10, fontSize: 14 }}>
                                <span style={{
                                    background: 'linear-gradient(135deg, var(--suc), #43A047)',
                                    color: '#fff',
                                    borderRadius: 8,
                                    width: 26,
                                    height: 26,
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    fontSize: 13,
                                    flexShrink: 0,
                                    fontWeight: 600
                                }}>{i + 1}</span>
                                <span style={{ color: 'var(--txt2)', lineHeight: 1.6 }}>{t}</span>
                            </div>
                        ))}
                    </div>

                    <div className="danger" style={{ marginBottom: 20 }}>
                        <strong style={{ color: 'var(--danger)', display: 'flex', alignItems: 'center', gap: 6 }}>
                            âš ï¸ è‡¨åºŠé‡è¦æ€§
                        </strong>
                        <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 8, lineHeight: 1.7 }}>
                            OSAå½±éŸ¿ç´„2-14%çš„ç¤¾å€æ°‘çœ¾ï¼Œä½†80-90%çš„æ‚£è€…æœªè¢«è¨ºæ–·ã€‚æœªæ²»ç™‚çš„OSAèˆ‡é«˜è¡€å£“ã€å¿ƒè¡€ç®¡ç–¾ç—…ã€ä¸­é¢¨ã€ç³–å°¿ç—…åŠäº¤é€šäº‹æ•…é¢¨éšªå¢åŠ ç›¸é—œã€‚
                        </p>
                    </div>

                    <h3 style={{ fontSize: 18, fontWeight: 700, marginBottom: 16, color: 'var(--txt)' }}>ğŸ“š èª²ç¨‹å…§å®¹</h3>
                    {lessons.map(l => (
                        <div
                            key={l.id}
                            className="card"
                            onClick={() => { setLessonId(l.id); setPage('lesson'); }}
                            style={{ cursor: 'pointer', transition: 'all 0.3s ease' }}
                        >
                            <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>
                                <div style={{
                                    width: 52,
                                    height: 52,
                                    borderRadius: 14,
                                    background: `linear-gradient(135deg, ${l.color}, ${l.color}99)`,
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    color: '#fff',
                                    fontWeight: 700,
                                    fontSize: 18,
                                    boxShadow: `0 4px 12px ${l.color}33`
                                }}>{l.id}</div>
                                <div style={{ flex: 1 }}>
                                    <div style={{ fontSize: 11, color: l.color, fontWeight: 600, marginBottom: 2 }}>Lesson {l.id}</div>
                                    <div style={{ fontSize: 16, fontWeight: 700, color: 'var(--txt)' }}>{l.title}</div>
                                    <div style={{ fontSize: 13, color: 'var(--txt2)' }}>{l.sub}</div>
                                </div>
                                <svg viewBox="0 0 24 24" fill={l.color} width="22" height="22">
                                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/>
                                </svg>
                            </div>
                        </div>
                    ))}

                    <button
                        className="btn btn-pri"
                        onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); setPage('quiz'); }}
                        style={{ width: '100%', justifyContent: 'center', marginTop: 24, marginBottom: 16, padding: '16px 24px' }}
                    >
                        ğŸ“ é–‹å§‹æ¸¬é©— (10é¡Œ)
                    </button>

                    <a
                        href="https://jamanetwork.com/journals/jama/fullarticle/1730517"
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            gap: 8,
                            padding: '14px 20px',
                            background: 'linear-gradient(135deg, #F8F9FA, #E9ECEF)',
                            borderRadius: 14,
                            textDecoration: 'none',
                            color: 'var(--pri)',
                            fontSize: 14,
                            fontWeight: 600,
                            marginBottom: 32,
                            border: '1px solid rgba(94, 53, 177, 0.2)'
                        }}
                    >
                        ğŸ“„ é–±è®€åŸæ–‡ (JAMA 2013)
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                            <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <footer style={{ background: 'linear-gradient(135deg, #EDE7F6, #D1C4E9)', padding: '28px 16px', textAlign: 'center' }}>
                <p style={{ fontSize: 13, color: 'var(--txt2)', fontWeight: 600 }}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨</p>
                <p style={{ fontSize: 12, color: 'var(--txt2)', marginTop: 4 }}>è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
            </footer>
        </div>
    );

    // Lesson 1: OSAæ¦‚è«–èˆ‡æµè¡Œç—…å­¸
    const L1 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ˜´ ä»€éº¼æ˜¯é˜»å¡æ€§ç¡çœ å‘¼å¸ä¸­æ­¢ç—‡(OSA)ï¼Ÿ</h3>
                <div className="formula">
                    OSA = ä¸Šå‘¼å¸é“åè¦†å¡Œé™· â†’ å‘¼å¸ä¸­æ­¢/ä½é€šæ°£ â†’ é–“æ­‡æ€§ä½è¡€æ°§ + ç¡çœ ç‰‡æ®µåŒ–
                </div>
                <p style={{ fontSize: 14, color: 'var(--txt2)', lineHeight: 1.8 }}>
                    é˜»å¡æ€§ç¡çœ å‘¼å¸ä¸­æ­¢ç—‡æ˜¯ç¡çœ æ™‚ä¸Šå‘¼å¸é“åè¦†éƒ¨åˆ†æˆ–å®Œå…¨å¡Œé™·ï¼Œå°è‡´å‘¼å¸æš«åœï¼ˆapneaï¼ŒæŒçºŒâ‰¥10ç§’ï¼‰æˆ–é€šæ°£é‡æ¸›å°‘ï¼ˆhypopneaï¼Œæ¸›å°‘â‰¥30%ä¼´éš¨è¡€æ°§ä¸‹é™æˆ–è¦ºé†’ï¼‰ã€‚
                </p>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ“Š è¨ºæ–·æ¨™æº–ï¼šå‘¼å¸ä¸­æ­¢ä½é€šæ°£æŒ‡æ•¸(AHI)</h3>
                <div className="formula">
                    AHI = (å‘¼å¸ä¸­æ­¢æ¬¡æ•¸ + ä½é€šæ°£æ¬¡æ•¸) Ã· ç¸½ç¡çœ æ™‚æ•¸ï¼ˆå°æ™‚ï¼‰
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>åš´é‡ç¨‹åº¦</th>
                            <th>AHIç¯„åœ</th>
                            <th>è‡¨åºŠæ„ç¾©</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--suc)' }}>æ­£å¸¸</td>
                            <td>&lt;5 æ¬¡/å°æ™‚</td>
                            <td>ç„¡ç¡çœ å‘¼å¸ä¸­æ­¢</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--warn)' }}>è¼•åº¦</td>
                            <td>5-15 æ¬¡/å°æ™‚</td>
                            <td>è¼•åº¦OSA</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600, color: '#F57F17' }}>ä¸­åº¦</td>
                            <td>15-30 æ¬¡/å°æ™‚</td>
                            <td>ä¸­åº¦OSA</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--danger)' }}>é‡åº¦</td>
                            <td>â‰¥30 æ¬¡/å°æ™‚</td>
                            <td>é‡åº¦OSA</td>
                        </tr>
                    </tbody>
                </table>
                <div className="info">
                    <strong>ğŸ’¡ è¨ºæ–·é‡‘æ¨™æº–</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        å¤šé »é“ç¡çœ æª¢æŸ¥(Polysomnography, PSG)æ˜¯è¨ºæ–·OSAçš„é‡‘æ¨™æº–ï¼Œå¯æ¸¬é‡AHIã€è¡€æ°§é£½å’Œåº¦ã€ç¡çœ åˆ†æœŸç­‰æŒ‡æ¨™ã€‚å±…å®¶ç¡çœ æª¢æ¸¬(HSAT)å¯ä½œç‚ºæ›¿ä»£é¸æ“‡ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“ˆ æµè¡Œç—…å­¸æ•¸æ“š</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æ—ç¾¤</th>
                            <th>OSAç››è¡Œç‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ç¤¾å€ä¸€èˆ¬æ—ç¾¤</td>
                            <td>2% - 14%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ç¡çœ é–€è¨ºè½‰ä»‹æ‚£è€…</td>
                            <td>21% - 90%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>è‚¥èƒ–æ—ç¾¤</td>
                            <td>30% - 60%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å¿ƒè¡°ç«­æ‚£è€…</td>
                            <td>50% - 70%</td>
                        </tr>
                    </tbody>
                </table>
                <div className="danger">
                    <strong>âš ï¸ è¨ºæ–·ä¸è¶³å•é¡Œ</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ä¼°è¨ˆ<strong>80-90%</strong>çš„OSAæ‚£è€…æœªè¢«è¨ºæ–·ã€‚é€™å‡¸é¡¯äº†è‡¨åºŠç¯©æª¢å’Œé¢¨éšªè©•ä¼°çš„é‡è¦æ€§ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: '#6A1B9A', marginBottom: 14 }}>ğŸ’” OSAçš„å¥åº·å¾Œæœ</h3>
                <div style={{ display: 'grid', gap: 10 }}>
                    {[
                        { icon: 'â¤ï¸', title: 'å¿ƒè¡€ç®¡ç–¾ç—…', desc: 'é«˜è¡€å£“ã€å† å¿ƒç—…ã€å¿ƒæˆ¿é¡«å‹•é¢¨éšªå¢åŠ ' },
                        { icon: 'ğŸ§ ', title: 'è…¦è¡€ç®¡ç–¾ç—…', desc: 'ä¸­é¢¨é¢¨éšªå¢åŠ 2-3å€' },
                        { icon: 'ğŸ©¸', title: 'ä»£è¬å•é¡Œ', desc: 'ç¬¬2å‹ç³–å°¿ç—…ã€ä»£è¬ç—‡å€™ç¾¤' },
                        { icon: 'ğŸš—', title: 'äº¤é€šå®‰å…¨', desc: 'å› å—œç¡å°è‡´è»Šç¦é¢¨éšªå¢åŠ 2-7å€' },
                        { icon: 'ğŸ˜”', title: 'ç”Ÿæ´»å“è³ª', desc: 'èªçŸ¥åŠŸèƒ½ä¸‹é™ã€æƒ…ç·’éšœç¤™ã€ç”Ÿæ´»å“è³ªé™ä½' }
                    ].map((item, i) => (
                        <div key={i} style={{
                            background: 'linear-gradient(135deg, #F3E5F5, #E1BEE7)',
                            padding: '12px 16px',
                            borderRadius: 12,
                            fontSize: 14,
                            display: 'flex',
                            alignItems: 'flex-start',
                            gap: 12
                        }}>
                            <span style={{ fontSize: 20 }}>{item.icon}</span>
                            <div>
                                <strong style={{ color: 'var(--pri)' }}>{item.title}</strong>
                                <p style={{ color: 'var(--txt2)', marginTop: 2, fontSize: 13 }}>{item.desc}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );

    // Lesson 2: ç—‡ç‹€èˆ‡ç—…å²è©•ä¼°
    const L2 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ“‹ ç—‡ç‹€çš„è¨ºæ–·åƒ¹å€¼</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç—‡ç‹€</th>
                            <th>LR+ (95% CI)</th>
                            <th>LR-</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#EDE7F6' }}>
                            <td style={{ fontWeight: 700, color: 'var(--pri)' }}>å¤œé–“çª’æ¯æˆ–å–˜æ°£æ„Ÿ</td>
                            <td><span className="lr-badge lr-high">3.3 (2.1-5.1)</span></td>
                            <td>0.77</td>
                        </tr>
                        <tr style={{ background: '#EDE7F6' }}>
                            <td style={{ fontWeight: 600 }}>ç›®æ“Šå‘¼å¸ä¸­æ­¢</td>
                            <td><span className="lr-badge lr-mod">2.0 (1.4-2.8)</span></td>
                            <td>0.60</td>
                        </tr>
                        <tr>
                            <td>å¤œé–“é »å°¿</td>
                            <td>1.4 (1.1-1.8)</td>
                            <td>0.80</td>
                        </tr>
                        <tr>
                            <td>æ—¥é–“å—œç¡</td>
                            <td>1.4 (1.2-1.5)</td>
                            <td>0.70</td>
                        </tr>
                        <tr>
                            <td>æ™¨é–“é ­ç—›</td>
                            <td>1.3 (0.8-2.0)</td>
                            <td>0.95</td>
                        </tr>
                        <tr style={{ background: '#FFF3E0' }}>
                            <td style={{ fontWeight: 600, color: 'var(--warn)' }}>æ‰“é¼¾</td>
                            <td>1.1 (0.9-1.2)</td>
                            <td>0.50</td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>ğŸ’¡ é—œéµç™¼ç¾</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        <strong>å¤œé–“çª’æ¯æˆ–å–˜æ°£æ„Ÿ</strong>æ˜¯æœ€æœ‰è¨ºæ–·åƒ¹å€¼çš„ç—‡ç‹€ (LR+ = 3.3)ã€‚ç›¸è¼ƒä¹‹ä¸‹ï¼Œ<strong>æ‰“é¼¾</strong>çš„LR+ = 1.1ï¼Œé›–ç„¶æ•æ„Ÿåº¦é«˜ä½†ç‰¹ç•°åº¦ä½ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>âŒ æ‰“é¼¾çš„è¨ºæ–·è¿·æ€</h3>
                <div className="danger">
                    <strong>æ‰“é¼¾ â‰  OSA</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        æ‰“é¼¾ LR+ = 1.1 (95% CI, 0.9-1.2)<br/>
                        ç„¡æ‰“é¼¾ LR- = 0.50 (95% CI, 0.3-0.8)<br/><br/>
                        æ‰“é¼¾çš„æ•æ„Ÿåº¦å¾ˆé«˜ (&gt;90%)ï¼Œä½†ç‰¹ç•°åº¦éå¸¸ä½ï¼ˆç´„25%ï¼‰ï¼Œé€™æ„å‘³è‘—ï¼š
                    </p>
                    <ul style={{ marginTop: 8, marginLeft: 16, color: 'var(--txt2)', fontSize: 14 }}>
                        <li>è¨±å¤šæ‰“é¼¾çš„äºº<strong>æ²’æœ‰</strong>OSA</li>
                        <li>æ‰“é¼¾å­˜åœ¨å°ç¢ºèªOSA<strong>å¹«åŠ©ä¸å¤§</strong></li>
                        <li>ç„¡æ‰“é¼¾å¯é©åº¦é™ä½OSAå¯èƒ½æ€§ï¼Œä½†ä¸èƒ½å®Œå…¨æ’é™¤</li>
                    </ul>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ˜´ Epworthå—œç¡é‡è¡¨(ESS)</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12, lineHeight: 1.8 }}>
                    ESSè©•ä¼°æ‚£è€…åœ¨8ç¨®æ—¥å¸¸æƒ…å¢ƒä¸­æ‰“çŒç¡çš„å¯èƒ½æ€§ï¼ˆ0-24åˆ†ï¼‰ï¼š
                </p>
                <div style={{ display: 'grid', gap: 8 }}>
                    {[
                        'åè‘—é–±è®€',
                        'çœ‹é›»è¦–',
                        'åœ¨å…¬å…±å ´æ‰€åè‘—ä¸å‹•',
                        'ä¹˜åæ±½è»Šé€£çºŒä¸€å°æ™‚',
                        'ä¸‹åˆèººä¸‹ä¼‘æ¯',
                        'åè‘—èˆ‡äººäº¤è«‡',
                        'åˆé¤å¾Œå®‰éœåè‘—(æœªé£²é…’)',
                        'é–‹è»Šé‡åˆ°ç´…ç‡ˆåœè»Šæ™‚'
                    ].map((item, i) => (
                        <div key={i} style={{
                            background: 'linear-gradient(135deg, #E3F2FD, #BBDEFB)',
                            padding: '10px 14px',
                            borderRadius: 10,
                            fontSize: 13,
                            display: 'flex',
                            alignItems: 'center',
                            gap: 10
                        }}>
                            <span style={{
                                background: 'var(--sec)',
                                color: '#fff',
                                borderRadius: '50%',
                                width: 22,
                                height: 22,
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: 12,
                                fontWeight: 700,
                                flexShrink: 0
                            }}>{i + 1}</span>
                            {item}
                        </div>
                    ))}
                </div>
                <table style={{ marginTop: 14 }}>
                    <thead>
                        <tr>
                            <th>ESSåˆ†æ•¸</th>
                            <th>è§£è®€</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0-10åˆ†</td>
                            <td>æ­£å¸¸ç¯„åœ</td>
                        </tr>
                        <tr style={{ background: '#FFF3E0' }}>
                            <td style={{ fontWeight: 600 }}>&gt;10åˆ†</td>
                            <td style={{ color: 'var(--warn)' }}>éåº¦æ—¥é–“å—œç¡</td>
                        </tr>
                    </tbody>
                </table>
                <div className="info">
                    <strong>âš ï¸ ESSçš„é™åˆ¶</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ESSå‡é«˜å°OSAçš„LR+ = 1.4 (95% CI, 1.2-1.7)ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™ã€‚ESSä¸»è¦ç”¨æ–¼è©•ä¼°å—œç¡ç¨‹åº¦ï¼Œè€Œéè¨ºæ–·OSAã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ‘¥ å±éšªå› å­</h3>
                <table>
                    <thead>
                        <tr>
                            <th>å±éšªå› å­</th>
                            <th>èªªæ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ç”·æ€§</td>
                            <td>ç”·æ€§é¢¨éšªæ˜¯å¥³æ€§çš„2-3å€</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>è‚¥èƒ–</td>
                            <td>BMIæ¯å¢åŠ 1ï¼ŒOSAé¢¨éšªå¢åŠ 14%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å¹´é½¡</td>
                            <td>ç››è¡Œç‡éš¨å¹´é½¡å¢åŠ </td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é ¸åœå¢åŠ </td>
                            <td>ç”·æ€§&gt;43cmï¼Œå¥³æ€§&gt;38cm</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é¡±é¡çµæ§‹ç•°å¸¸</td>
                            <td>ä¸‹é¡å¾Œç¸®ã€æ‰æ¡ƒè…ºè‚¥å¤§ç­‰</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    );

    // Lesson 3: ç†å­¸æª¢æŸ¥èˆ‡è§£å‰–è©•ä¼°
    const L3 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ” ç†å­¸æª¢æŸ¥ç™¼ç¾</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç†å­¸æª¢æŸ¥</th>
                            <th>LR+ (95% CI)</th>
                            <th>LR-</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#EDE7F6' }}>
                            <td style={{ fontWeight: 700, color: 'var(--pri)' }}>Mallampati III-IVç´š</td>
                            <td><span className="lr-badge lr-mod">2.0 (1.6-2.5)</span></td>
                            <td>0.70</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é ¸åœ &gt;43 cm (ç”·)</td>
                            <td>1.5 (1.2-1.8)</td>
                            <td>0.75</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>BMI &gt;30</td>
                            <td>1.5 (1.3-1.8)</td>
                            <td>0.65</td>
                        </tr>
                        <tr>
                            <td>ä¸‹é¡å¾Œç¸®</td>
                            <td>1.4 (1.0-1.9)</td>
                            <td>0.90</td>
                        </tr>
                        <tr>
                            <td>æ‰æ¡ƒè…ºè‚¥å¤§</td>
                            <td>1.3 (0.9-1.8)</td>
                            <td>0.95</td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>ğŸ’¡ è‡¨åºŠè¦é»</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        æ²’æœ‰å–®ä¸€ç†å­¸æª¢æŸ¥ç™¼ç¾å…·æœ‰è¶³å¤ é«˜çš„LR+å¯ä»¥ç¢ºèªOSAè¨ºæ–·ã€‚ç†å­¸æª¢æŸ¥çš„åƒ¹å€¼åœ¨æ–¼è©•ä¼°è§£å‰–å­¸å±éšªå› å­å’Œæ’é™¤å…¶ä»–åŸå› ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ‘„ Mallampatiåˆ†ç´š</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12 }}>
                    æ‚£è€…åå§¿ã€å¼µå£ã€èˆŒé ­è‡ªç„¶ä¼¸å‡ºï¼ˆä¸ç™¼è²ï¼‰ï¼Œè§€å¯Ÿå’½éƒ¨çµæ§‹å¯è¦‹åº¦ï¼š
                </p>
                <div style={{ display: 'grid', gap: 10 }}>
                    <div style={{
                        background: 'linear-gradient(135deg, #E8F5E9, #C8E6C9)',
                        padding: '14px 16px',
                        borderRadius: 12,
                        border: '2px solid var(--suc)'
                    }}>
                        <strong style={{ color: 'var(--suc)' }}>Class I</strong>
                        <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 4 }}>å¯è¦‹è»Ÿé¡ã€æ‡¸é›å‚ã€æ‰æ¡ƒè…º</p>
                    </div>
                    <div style={{
                        background: 'linear-gradient(135deg, #E3F2FD, #BBDEFB)',
                        padding: '14px 16px',
                        borderRadius: 12,
                        border: '2px solid var(--info)'
                    }}>
                        <strong style={{ color: 'var(--info)' }}>Class II</strong>
                        <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 4 }}>å¯è¦‹è»Ÿé¡ã€æ‡¸é›å‚ä¸Šéƒ¨</p>
                    </div>
                    <div style={{
                        background: 'linear-gradient(135deg, #FFF3E0, #FFE0B2)',
                        padding: '14px 16px',
                        borderRadius: 12,
                        border: '2px solid var(--warn)'
                    }}>
                        <strong style={{ color: 'var(--warn)' }}>Class III</strong>
                        <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 4 }}>å¯è¦‹è»Ÿé¡ã€æ‡¸é›å‚åŸºéƒ¨</p>
                    </div>
                    <div style={{
                        background: 'linear-gradient(135deg, #FFEBEE, #FFCDD2)',
                        padding: '14px 16px',
                        borderRadius: 12,
                        border: '2px solid var(--danger)'
                    }}>
                        <strong style={{ color: 'var(--danger)' }}>Class IV</strong>
                        <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 4 }}>åƒ…å¯è¦‹ç¡¬é¡</p>
                    </div>
                </div>
                <div className="info" style={{ marginTop: 14 }}>
                    <strong>ğŸ“Š è¨ºæ–·æ„ç¾©</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        Mallampati III-IVç´šçš„LR+ = 2.0ï¼Œå¯é©åº¦å¢åŠ OSAå¯èƒ½æ€§ã€‚ä½†I-IIç´šçš„LR- = 0.70ï¼Œç„¡æ³•æœ‰æ•ˆæ’é™¤OSAã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“ é ¸åœæ¸¬é‡</h3>
                <div className="formula">
                    æ¸¬é‡ä½ç½®ï¼šç’°ç‹€è»Ÿéª¨æ°´å¹³ï¼ˆå–‰çµä¸‹æ–¹ï¼‰
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>æ€§åˆ¥</th>
                            <th>é«˜é¢¨éšªé–¾å€¼</th>
                            <th>è‡¨åºŠæ„ç¾©</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ç”·æ€§</td>
                            <td>&gt;43 cm (17è‹±å¯¸)</td>
                            <td>OSAé¢¨éšªå¢åŠ </td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å¥³æ€§</td>
                            <td>&gt;38 cm (15è‹±å¯¸)</td>
                            <td>OSAé¢¨éšªå¢åŠ </td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>ğŸ’¡ ç‚ºä»€éº¼é ¸åœé‡è¦ï¼Ÿ</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é ¸åœå¢åŠ åæ˜ å’½éƒ¨å‘¨åœè„‚è‚ªå †ç©ï¼Œæœƒå¢åŠ ä¸Šå‘¼å¸é“å¡Œé™·çš„é¢¨éšªã€‚é ¸åœèˆ‡AHIåš´é‡ç¨‹åº¦ç›¸é—œã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: '#6A1B9A', marginBottom: 14 }}>âš–ï¸ èº«é«”è³ªé‡æŒ‡æ•¸(BMI)</h3>
                <div className="formula">
                    BMI = é«”é‡(kg) Ã· èº«é«˜(m)Â²
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>BMIç¯„åœ</th>
                            <th>åˆ†é¡</th>
                            <th>OSAé¢¨éšª</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>&lt;18.5</td>
                            <td>éè¼•</td>
                            <td>ä½</td>
                        </tr>
                        <tr>
                            <td>18.5-24.9</td>
                            <td>æ­£å¸¸</td>
                            <td>åŸºç·š</td>
                        </tr>
                        <tr>
                            <td>25-29.9</td>
                            <td>éé‡</td>
                            <td>è¼•åº¦å¢åŠ </td>
                        </tr>
                        <tr style={{ background: '#FFF3E0' }}>
                            <td style={{ fontWeight: 600 }}>30-34.9</td>
                            <td style={{ color: 'var(--warn)' }}>è‚¥èƒ–Iç´š</td>
                            <td>ä¸­åº¦å¢åŠ </td>
                        </tr>
                        <tr style={{ background: '#FFEBEE' }}>
                            <td style={{ fontWeight: 600 }}>â‰¥35</td>
                            <td style={{ color: 'var(--danger)' }}>è‚¥èƒ–II-IIIç´š</td>
                            <td>é¡¯è‘—å¢åŠ </td>
                        </tr>
                    </tbody>
                </table>
                <div className="danger">
                    <strong>âš ï¸ æ³¨æ„</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é›–ç„¶è‚¥èƒ–æ˜¯OSAçš„é‡è¦å±éšªå› å­ï¼Œä½†<strong>éè‚¥èƒ–è€…ä¹Ÿå¯èƒ½æœ‰OSA</strong>ã€‚ä¸èƒ½åƒ…æ†‘BMIæ­£å¸¸å°±æ’é™¤OSAã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 4: è‡¨åºŠé æ¸¬è¦å‰‡
    const L4 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ›‘ STOP-Bangå•å·</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12 }}>
                    8é …å•é¡Œï¼Œæ¯é …1åˆ†ï¼ˆç¸½åˆ†0-8åˆ†ï¼‰ï¼š
                </p>
                <div style={{ display: 'grid', gap: 10 }}>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--pri)', marginBottom: 8, fontSize: 14 }}>S - Snoring æ‰“é¼¾</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>æ‚¨æ‰“é¼¾å¾ˆå¤§è²å—ï¼Ÿï¼ˆæ¯”èªªè©±è²å¤§æˆ–éš”è‘—é—œé–‰çš„é–€å¯ä»¥è½åˆ°ï¼‰</div>
                    </div>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--pri)', marginBottom: 8, fontSize: 14 }}>T - Tired ç–²å€¦</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>æ‚¨ç™½å¤©å¸¸æ„Ÿåˆ°ç–²å€¦ã€ç–²ä¹æˆ–å—œç¡å—ï¼Ÿ</div>
                    </div>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--pri)', marginBottom: 8, fontSize: 14 }}>O - Observed ç›®æ“Š</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>æœ‰äººè§€å¯Ÿåˆ°æ‚¨ç¡è¦ºæ™‚å‘¼å¸åœæ­¢å—ï¼Ÿ</div>
                    </div>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--pri)', marginBottom: 8, fontSize: 14 }}>P - Pressure è¡€å£“</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>æ‚¨æœ‰é«˜è¡€å£“æˆ–æ­£åœ¨æ²»ç™‚é«˜è¡€å£“å—ï¼Ÿ</div>
                    </div>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--sec)', marginBottom: 8, fontSize: 14 }}>B - BMI</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>BMI &gt;35 kg/mÂ²ï¼Ÿ</div>
                    </div>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--sec)', marginBottom: 8, fontSize: 14 }}>A - Age å¹´é½¡</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>å¹´é½¡ &gt;50æ­²ï¼Ÿ</div>
                    </div>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--sec)', marginBottom: 8, fontSize: 14 }}>N - Neck é ¸åœ</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>é ¸åœ &gt;40 cmï¼Ÿ</div>
                    </div>
                    <div className="score-box">
                        <h4 style={{ color: 'var(--sec)', marginBottom: 8, fontSize: 14 }}>G - Gender æ€§åˆ¥</h4>
                        <div style={{ fontSize: 13, color: 'var(--txt2)' }}>ç”·æ€§ï¼Ÿ</div>
                    </div>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ“Š STOP-Bangé¢¨éšªåˆ†å±¤</h3>
                <table>
                    <thead>
                        <tr>
                            <th>é¢¨éšªå±¤ç´š</th>
                            <th>åˆ†æ•¸</th>
                            <th>æ•æ„Ÿåº¦</th>
                            <th>ç‰¹ç•°åº¦</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#E8F5E9' }}>
                            <td style={{ fontWeight: 700, color: 'var(--suc)' }}>ä½é¢¨éšª</td>
                            <td>0-2åˆ†</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr style={{ background: '#FFF3E0' }}>
                            <td style={{ fontWeight: 600, color: 'var(--warn)' }}>ä¸­é¢¨éšª</td>
                            <td>3-4åˆ†</td>
                            <td>93%</td>
                            <td>36%</td>
                        </tr>
                        <tr style={{ background: '#FFEBEE' }}>
                            <td style={{ fontWeight: 700, color: 'var(--danger)' }}>é«˜é¢¨éšª</td>
                            <td>â‰¥5åˆ†</td>
                            <td>83%</td>
                            <td>56%</td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>ğŸ’¡ STOP-Bangç‰¹é»</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        STOP-Bang â‰¥3åˆ†çš„<strong>æ•æ„Ÿåº¦é«˜(93%)</strong>ï¼Œé©åˆç”¨æ–¼ç¯©æª¢ã€‚ä½†<strong>ç‰¹ç•°åº¦ä½(36%)</strong>ï¼Œé«˜é¢¨éšªä¸ç­‰æ–¼ç¢ºè¨ºOSAï¼Œä»éœ€é€²ä¸€æ­¥æª¢æŸ¥ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“ æŸæ—å•å·(Berlin Questionnaire)</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12 }}>
                    è©•ä¼°ä¸‰å€‹é¡åˆ¥ï¼Œè‹¥â‰¥2å€‹é¡åˆ¥é™½æ€§å‰‡åˆ¤å®šç‚ºé«˜é¢¨éšªï¼š
                </p>
                <div style={{ display: 'grid', gap: 12 }}>
                    <div style={{
                        background: 'linear-gradient(135deg, #E0F7FA, #B2EBF2)',
                        padding: '16px',
                        borderRadius: 12,
                        border: '2px solid var(--info)'
                    }}>
                        <h4 style={{ color: 'var(--info)', marginBottom: 8 }}>é¡åˆ¥1ï¼šæ‰“é¼¾</h4>
                        <ul style={{ marginLeft: 16, fontSize: 13, color: 'var(--txt2)' }}>
                            <li>æ‰“é¼¾é »ç‡å’ŒéŸ¿åº¦</li>
                            <li>æ‰“é¼¾æ˜¯å¦é€ æˆå›°æ“¾</li>
                            <li>å‘¼å¸ä¸­æ­¢æ˜¯å¦è¢«è§€å¯Ÿåˆ°</li>
                        </ul>
                    </div>
                    <div style={{
                        background: 'linear-gradient(135deg, #EDE7F6, #D1C4E9)',
                        padding: '16px',
                        borderRadius: 12,
                        border: '2px solid var(--pri)'
                    }}>
                        <h4 style={{ color: 'var(--pri)', marginBottom: 8 }}>é¡åˆ¥2ï¼šå—œç¡</h4>
                        <ul style={{ marginLeft: 16, fontSize: 13, color: 'var(--txt2)' }}>
                            <li>é†’å¾Œç–²å€¦æ„Ÿ</li>
                            <li>æ—¥é–“å—œç¡</li>
                            <li>é–‹è»Šæ™‚å—œç¡</li>
                        </ul>
                    </div>
                    <div style={{
                        background: 'linear-gradient(135deg, #FFEBEE, #FFCDD2)',
                        padding: '16px',
                        borderRadius: 12,
                        border: '2px solid var(--danger)'
                    }}>
                        <h4 style={{ color: 'var(--danger)', marginBottom: 8 }}>é¡åˆ¥3ï¼šè‚¥èƒ–/é«˜è¡€å£“</h4>
                        <ul style={{ marginLeft: 16, fontSize: 13, color: 'var(--txt2)' }}>
                            <li>é«˜è¡€å£“ç—…å²</li>
                            <li>BMI &gt;30 kg/mÂ²</li>
                        </ul>
                    </div>
                </div>
                <table style={{ marginTop: 14 }}>
                    <thead>
                        <tr>
                            <th>æŸæ—å•å·çµæœ</th>
                            <th>LR+ (95% CI)</th>
                            <th>LR-</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é«˜é¢¨éšª (â‰¥2é¡åˆ¥é™½æ€§)</td>
                            <td>1.9 (1.5-2.4)</td>
                            <td>0.35</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: '#6A1B9A', marginBottom: 14 }}>ğŸ“Š é æ¸¬è¦å‰‡æ¯”è¼ƒ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>å·¥å…·</th>
                            <th>æ•æ„Ÿåº¦</th>
                            <th>ç‰¹ç•°åº¦</th>
                            <th>LR+</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>STOP-Bang â‰¥3</td>
                            <td>93%</td>
                            <td>36%</td>
                            <td>1.5</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>æŸæ—å•å·é«˜é¢¨éšª</td>
                            <td>76%</td>
                            <td>59%</td>
                            <td>1.9</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ESS &gt;10</td>
                            <td>46%</td>
                            <td>69%</td>
                            <td>1.4</td>
                        </tr>
                    </tbody>
                </table>
                <div className="danger">
                    <strong>âš ï¸ é‡è¦é™åˆ¶</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ç›®å‰æ²’æœ‰ä»»ä½•è‡¨åºŠé æ¸¬è¦å‰‡å¯ä»¥å–ä»£ç¡çœ æª¢æŸ¥ã€‚é€™äº›å·¥å…·é©åˆç”¨æ–¼<strong>ç¯©æª¢</strong>å’Œ<strong>å„ªå…ˆæ’åº</strong>ï¼Œè€Œéç¢ºè¨ºã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 5: è‡¨åºŠæ‡‰ç”¨æ•´åˆ
    const L5 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ¥ Case 1ï¼š52æ­²ç”·æ€§æ—¥é–“å—œç¡</h3>
                <div className="info">
                    <strong>ç—…å²</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        52æ­²ç”·æ€§ï¼Œä¸»è¨´æ—¥é–“å—œç¡ã€å·¥ä½œæ™‚é›£ä»¥ä¿æŒæ¸…é†’ã€‚å¤ªå¤ªæŠ±æ€¨ä»–æ‰“é¼¾å¾ˆå¤§è²ä¸”æœ‰æ™‚å‘¼å¸åœæ­¢ã€‚
                        BMI 32ï¼Œé ¸åœ45cmï¼Œæœ‰é«˜è¡€å£“ã€‚Mallampati IIIç´šã€‚ESS 14åˆ†ã€‚
                    </p>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: 'var(--sec)', marginBottom: 10 }}>ğŸ“‹ STOP-Bangè©•åˆ†</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td style={{ fontWeight: 600 }}>S - æ‰“é¼¾å¤§è²</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>T - ç–²å€¦å—œç¡</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>O - ç›®æ“Šå‘¼å¸ä¸­æ­¢</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>P - é«˜è¡€å£“</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>B - BMI&gt;35</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>A - å¹´é½¡&gt;50</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>N - é ¸åœ&gt;40</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>G - ç”·æ€§</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr style={{ background: '#FFEBEE' }}>
                                <td style={{ fontWeight: 700 }}>ç¸½åˆ†</td>
                                <td></td>
                                <td style={{ fontWeight: 700, color: 'var(--danger)' }}>7åˆ† (é«˜é¢¨éšª)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div className="danger" style={{ marginTop: 14 }}>
                    <strong>è‡¨åºŠåˆ¤æ–·</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        STOP-Bang 7åˆ†å±¬é«˜é¢¨éšªï¼ŒåŠ ä¸Šç›®æ“Šå‘¼å¸ä¸­æ­¢(LR+ 2.0)ã€Mallampati IIIç´š(LR+ 2.0)ï¼ŒOSAå¯èƒ½æ€§å¾ˆé«˜ã€‚
                        <strong>å»ºè­°å®‰æ’ç¡çœ æª¢æŸ¥ç¢ºè¨ºã€‚</strong>
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ¥ Case 2ï¼š35æ­²å¥³æ€§ç–²å€¦</h3>
                <div className="info">
                    <strong>ç—…å²</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        35æ­²å¥³æ€§ï¼Œä¸»è¨´æ…¢æ€§ç–²å€¦ã€ç¡çœ ä¸æç¥ã€‚å¶çˆ¾æ‰“é¼¾ä½†å…ˆç”Ÿèªªä¸åš´é‡ï¼Œç„¡ç›®æ“Šå‘¼å¸ä¸­æ­¢ã€‚
                        BMI 24ï¼Œé ¸åœ34cmï¼Œç„¡é«˜è¡€å£“ã€‚Mallampati IIç´šã€‚ESS 9åˆ†ã€‚
                    </p>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: 'var(--sec)', marginBottom: 10 }}>ğŸ“‹ STOP-Bangè©•åˆ†</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td style={{ fontWeight: 600 }}>S - æ‰“é¼¾å¤§è²</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>T - ç–²å€¦å—œç¡</td>
                                <td>æ˜¯</td>
                                <td>1åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>O - ç›®æ“Šå‘¼å¸ä¸­æ­¢</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>P - é«˜è¡€å£“</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>B - BMI&gt;35</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>A - å¹´é½¡&gt;50</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>N - é ¸åœ&gt;40</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>G - ç”·æ€§</td>
                                <td>å¦</td>
                                <td>0åˆ†</td>
                            </tr>
                            <tr style={{ background: '#E8F5E9' }}>
                                <td style={{ fontWeight: 700 }}>ç¸½åˆ†</td>
                                <td></td>
                                <td style={{ fontWeight: 700, color: 'var(--suc)' }}>1åˆ† (ä½é¢¨éšª)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div className="good" style={{ marginTop: 14 }}>
                    <strong>è‡¨åºŠåˆ¤æ–·</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        STOP-Bang 1åˆ†å±¬ä½é¢¨éšªï¼ŒOSAå¯èƒ½æ€§è¼ƒä½ã€‚ç–²å€¦å¯èƒ½æœ‰å…¶ä»–åŸå› ï¼ˆè²§è¡€ã€ç”²ç‹€è…ºåŠŸèƒ½ç•°å¸¸ã€ç¡çœ è¡›ç”Ÿä¸è‰¯ç­‰ï¼‰ã€‚
                        <strong>å»ºè­°å…ˆè©•ä¼°å…¶ä»–åŸå› ï¼Œè‹¥ä»æ‡·ç–‘å¯è€ƒæ…®ç¡çœ æª¢æŸ¥ã€‚</strong>
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“Š è‡¨åºŠè©•ä¼°æµç¨‹</h3>
                <div style={{
                    background: 'linear-gradient(135deg, #EDE7F6, #D1C4E9)',
                    padding: 20,
                    borderRadius: 16,
                    textAlign: 'center'
                }}>
                    <div style={{ marginBottom: 16 }}>
                        <div style={{
                            background: 'var(--pri)',
                            color: '#fff',
                            padding: '10px 20px',
                            borderRadius: 10,
                            display: 'inline-block',
                            fontWeight: 600
                        }}>
                            æ‡·ç–‘OSAæ‚£è€…
                        </div>
                    </div>
                    <div style={{ fontSize: 24, marginBottom: 16 }}>â†“</div>
                    <div style={{ marginBottom: 16 }}>
                        <div style={{
                            background: 'var(--sec)',
                            color: '#fff',
                            padding: '10px 20px',
                            borderRadius: 10,
                            display: 'inline-block',
                            fontWeight: 600
                        }}>
                            ç—…å² + ç†å­¸æª¢æŸ¥ + STOP-Bang/æŸæ—å•å·
                        </div>
                    </div>
                    <div style={{ display: 'flex', justifyContent: 'center', gap: 40 }}>
                        <div>
                            <div style={{ fontSize: 14, color: 'var(--suc)', fontWeight: 600 }}>ä½é¢¨éšª</div>
                            <div style={{ fontSize: 20 }}>â†“</div>
                            <div style={{
                                background: 'var(--suc)',
                                color: '#fff',
                                padding: '8px 16px',
                                borderRadius: 8,
                                fontSize: 13
                            }}>
                                è©•ä¼°å…¶ä»–åŸå› <br/>å¿…è¦æ™‚è¿½è¹¤
                            </div>
                        </div>
                        <div>
                            <div style={{ fontSize: 14, color: 'var(--danger)', fontWeight: 600 }}>é«˜é¢¨éšª</div>
                            <div style={{ fontSize: 20 }}>â†“</div>
                            <div style={{
                                background: 'var(--danger)',
                                color: '#fff',
                                padding: '8px 16px',
                                borderRadius: 8,
                                fontSize: 13
                            }}>
                                å®‰æ’ç¡çœ æª¢æŸ¥<br/>(PSGæˆ–HSAT)
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--suc)', marginBottom: 14 }}>âœ… æ ¸å¿ƒé‡é»ç¸½çµ</h3>
                <div style={{ display: 'grid', gap: 12 }}>
                    {[
                        'OSAå½±éŸ¿2-14%çš„ç¤¾å€æ°‘çœ¾ï¼Œ80-90%æœªè¢«è¨ºæ–·',
                        'å¤œé–“çª’æ¯/å–˜æ°£æ„Ÿæ˜¯æœ€æœ‰è¨ºæ–·åƒ¹å€¼çš„ç—‡ç‹€(LR+ 3.3)',
                        'æ‰“é¼¾LR+ = 1.1ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™',
                        'Mallampati III-IVç´šçš„LR+ = 2.0',
                        'STOP-Bang â‰¥3åˆ†æ•æ„Ÿåº¦93%ï¼Œé©åˆç¯©æª¢',
                        'è‡¨åºŠé æ¸¬è¦å‰‡ç„¡æ³•å–ä»£ç¡çœ æª¢æŸ¥',
                        'æœªæ²»ç™‚OSAèˆ‡å¿ƒè¡€ç®¡ç–¾ç—…ã€äº¤é€šäº‹æ•…é¢¨éšªå¢åŠ ç›¸é—œ'
                    ].map((item, i) => (
                        <div key={i} style={{
                            background: 'linear-gradient(135deg, #E8F5E9, #C8E6C9)',
                            padding: '12px 16px',
                            borderRadius: 12,
                            display: 'flex',
                            alignItems: 'center',
                            gap: 12
                        }}>
                            <span style={{
                                background: 'var(--suc)',
                                color: '#fff',
                                borderRadius: '50%',
                                width: 24,
                                height: 24,
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: 12,
                                fontWeight: 700,
                                flexShrink: 0
                            }}>âœ“</span>
                            <span style={{ fontSize: 14, color: 'var(--txt)' }}>{item}</span>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );

    const Lesson = () => {
        const l = lessons.find(x => x.id === lessonId);
        return (
            <div className="fade-in">
                <Header title={l.title} />
                <div style={{ background: `linear-gradient(135deg, ${l.color}, ${l.color}88)`, padding: '20px', color: '#fff' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        <div style={{ fontSize: 12, opacity: 0.9 }}>Lesson {l.id} â€¢ {l.sub}</div>
                        <h1 style={{ fontSize: 24, fontWeight: 700 }}>{l.title}</h1>
                    </div>
                </div>
                <div style={{ padding: '20px 16px' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        {lessonId === 1 && <L1 />}
                        {lessonId === 2 && <L2 />}
                        {lessonId === 3 && <L3 />}
                        {lessonId === 4 && <L4 />}
                        {lessonId === 5 && <L5 />}
                        <div style={{ display: 'flex', gap: 12, marginTop: 24 }}>
                            {lessonId > 1 && (
                                <button className="btn" style={{ flex: 1, background: '#fff', border: '2px solid var(--pri)', color: 'var(--pri)' }} onClick={() => setLessonId(lessonId - 1)}>
                                    â† ä¸Šä¸€èª²
                                </button>
                            )}
                            {lessonId < 5 ? (
                                <button className="btn btn-pri" style={{ flex: 1 }} onClick={() => setLessonId(lessonId + 1)}>
                                    ä¸‹ä¸€èª² â†’
                                </button>
                            ) : (
                                <button className="btn btn-sec" style={{ flex: 1 }} onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); setPage('quiz'); }}>
                                    é–‹å§‹æ¸¬é©— ğŸ“
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    const Quiz = () => {
        const pick = (i) => { if (show) return; setSel(i); setShow(true); if (i === quiz[qIdx].c) setScore(score + 1); };
        const next = () => { if (qIdx < quiz.length - 1) { setQIdx(qIdx + 1); setSel(null); setShow(false); } else setDone(true); };

        if (done) {
            const pct = Math.round((score / quiz.length) * 100);
            return (
                <div className="fade-in">
                    <Header title="æ¸¬é©—çµæœ" />
                    <div style={{ padding: '48px 16px', textAlign: 'center' }}>
                        <div style={{
                            width: 150,
                            height: 150,
                            borderRadius: '50%',
                            background: `conic-gradient(${pct >= 80 ? 'var(--suc)' : pct >= 60 ? 'var(--warn)' : 'var(--danger)'} ${pct * 3.6}deg, #E5E5E5 0deg)`,
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            margin: '0 auto 28px',
                            boxShadow: '0 8px 32px rgba(0,0,0,0.1)'
                        }}>
                            <div style={{
                                width: 126,
                                height: 126,
                                borderRadius: '50%',
                                background: '#fff',
                                display: 'flex',
                                flexDirection: 'column',
                                alignItems: 'center',
                                justifyContent: 'center'
                            }}>
                                <div style={{ fontSize: 40, fontWeight: 700, color: 'var(--txt)' }}>{pct}%</div>
                                <div style={{ fontSize: 15, color: 'var(--txt2)' }}>{score}/{quiz.length}</div>
                            </div>
                        </div>
                        <h2 style={{ fontSize: 26, fontWeight: 700, marginBottom: 10 }}>
                            {pct >= 80 ? 'ğŸ‰ å„ªç§€ï¼' : pct >= 60 ? 'ğŸ‘ ä¸éŒ¯ï¼' : 'ğŸ’ª åŠ æ²¹ï¼'}
                        </h2>
                        <p style={{ color: 'var(--txt2)', marginBottom: 36, fontSize: 15 }}>
                            {pct >= 80 ? 'ä½ å°OSAè©•ä¼°æŒæ¡è‰¯å¥½ï¼' : pct >= 60 ? 'å†è¤‡ç¿’å¯ä»¥æ›´é€²æ­¥ï¼' : 'å»ºè­°é‡æ–°é–±è®€èª²ç¨‹å…§å®¹'}
                        </p>
                        <div style={{ display: 'flex', gap: 14, justifyContent: 'center', flexWrap: 'wrap' }}>
                            <button className="btn btn-pri" onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); }}>
                                é‡æ–°æ¸¬é©—
                            </button>
                            <button className="btn" style={{ background: '#fff', border: '2px solid var(--pri)', color: 'var(--pri)' }} onClick={() => setPage('home')}>
                                è¿”å›èª²ç¨‹
                            </button>
                        </div>
                    </div>
                    <footer style={{ background: 'linear-gradient(135deg, #EDE7F6, #D1C4E9)', padding: '28px 16px', textAlign: 'center', marginTop: 48 }}>
                        <p style={{ fontSize: 12, color: 'var(--txt2)' }}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨ | è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
                    </footer>
                </div>
            );
        }

        const q = quiz[qIdx];
        return (
            <div className="fade-in">
                <Header title="è‡ªæˆ‘æ¸¬é©—" />
                <div style={{ padding: '20px 16px' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 10, fontSize: 14 }}>
                            <span style={{ color: 'var(--txt2)' }}>é€²åº¦</span>
                            <span style={{ fontWeight: 600, color: 'var(--pri)' }}>{qIdx + 1}/{quiz.length}</span>
                        </div>
                        <div style={{ height: 10, background: '#E5E5E5', borderRadius: 5, marginBottom: 24, overflow: 'hidden' }}>
                            <div style={{
                                height: '100%',
                                width: `${((qIdx + 1) / quiz.length) * 100}%`,
                                background: 'linear-gradient(90deg, var(--pri), var(--pri2))',
                                borderRadius: 5,
                                transition: 'width 0.4s ease'
                            }} />
                        </div>
                        <div className="card">
                            <h3 style={{ fontSize: 16, fontWeight: 600, lineHeight: 1.7, marginBottom: 22, color: 'var(--txt)' }}>{q.q}</h3>
                            {q.o.map((opt, i) => {
                                let bg = '#fff', bd = '#E5E5E5';
                                if (show) {
                                    if (i === q.c) { bg = '#E8F5E9'; bd = 'var(--suc)'; }
                                    else if (i === sel) { bg = '#FFEBEE'; bd = 'var(--danger)'; }
                                } else if (i === sel) { bg = '#EDE7F6'; bd = 'var(--pri)'; }
                                return (
                                    <button
                                        key={i}
                                        onClick={() => pick(i)}
                                        disabled={show}
                                        style={{
                                            width: '100%',
                                            padding: '14px 16px',
                                            marginBottom: 12,
                                            background: bg,
                                            border: `2px solid ${bd}`,
                                            borderRadius: 14,
                                            textAlign: 'left',
                                            fontSize: 14,
                                            cursor: show ? 'default' : 'pointer',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: 14,
                                            transition: 'all 0.2s ease'
                                        }}
                                    >
                                        <span style={{
                                            width: 30,
                                            height: 30,
                                            borderRadius: 10,
                                            background: show && i === q.c ? 'var(--suc)' : show && i === sel ? 'var(--danger)' : 'linear-gradient(135deg, #EDE7F6, #D1C4E9)',
                                            color: show && (i === q.c || i === sel) ? '#fff' : 'var(--pri)',
                                            display: 'flex',
                                            alignItems: 'center',
                                            justifyContent: 'center',
                                            fontWeight: 700,
                                            fontSize: 14,
                                            flexShrink: 0
                                        }}>
                                            {show && i === q.c ? 'âœ“' : show && i === sel && i !== q.c ? 'âœ—' : String.fromCharCode(65 + i)}
                                        </span>
                                        <span style={{ lineHeight: 1.6, color: 'var(--txt)' }}>{opt}</span>
                                    </button>
                                );
                            })}
                        </div>
                        {show && (
                            <div className={sel === q.c ? 'good' : 'tip'}>
                                <strong style={{ color: sel === q.c ? 'var(--suc)' : '#F57F17' }}>
                                    {sel === q.c ? 'âœ“ æ­£ç¢ºï¼' : 'âœ— ç­”éŒ¯äº†'}
                                </strong>
                                <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 10, lineHeight: 1.8 }}>{q.e}</p>
                            </div>
                        )}
                        {show && (
                            <button className="btn btn-pri" style={{ width: '100%', justifyContent: 'center', marginTop: 20 }} onClick={next}>
                                {qIdx < quiz.length - 1 ? 'ä¸‹ä¸€é¡Œ â†’' : 'æŸ¥çœ‹çµæœ'}
                            </button>
                        )}
                    </div>
                </div>
            </div>
        );
    };

    return (
        <div style={{ maxWidth: '100%', minHeight: '100vh', background: 'var(--bg)' }}>
            {page === 'home' ? <Home /> : page === 'lesson' ? <Lesson /> : <Quiz />}
        </div>
    );
};

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
