<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜è¡€å£“è¨ºæ–·è©•ä¼° | JAMA Rational Clinical Examination</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --pri:#E63946;
            --pri2:#F4A261;
            --acc:#2A9D8F;
            --suc:#06D6A0;
            --warn:#FFD166;
            --err:#EF476F;
            --pur:#6A4C93;
            --blue:#118AB2;
            --bg:#FAFBFC;
            --txt:#1A1A2E;
            --txt2:#6B7280
        }
        body{font-family:'Noto Sans TC',sans-serif;background:var(--bg);color:var(--txt);line-height:1.7}
        .card{background:#fff;border-radius:16px;padding:20px;margin-bottom:16px;box-shadow:0 2px 12px rgba(230,57,70,0.08)}
        .btn{padding:14px 24px;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all 0.3s}
        .btn-pri{background:linear-gradient(135deg,var(--pri),var(--pri2));color:#fff}
        .btn-pri:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(230,57,70,0.3)}
        .btn-acc{background:linear-gradient(135deg,var(--acc),var(--suc));color:#fff}
        table{width:100%;border-collapse:collapse;font-size:13px;margin:12px 0}
        th,td{padding:10px;text-align:center;border-bottom:1px solid #eee}
        th{background:#FFF0F0;font-weight:600;color:var(--pri)}
        .formula{background:linear-gradient(135deg,#FFF0F0,#FFE8E8);border:2px solid var(--pri);border-radius:12px;padding:16px;margin:12px 0;text-align:center;font-family:serif;font-size:17px;color:#8B0000}
        .tip{background:#FFF9F0;border-left:4px solid var(--pri2);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .good{background:#F0FFF8;border-left:4px solid var(--suc);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .info{background:#F0F8FF;border-left:4px solid var(--blue);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .warn{background:#FFFBF0;border-left:4px solid var(--warn);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .purple{background:#F8F0FF;border-left:4px solid var(--pur);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .key-point{background:linear-gradient(135deg,#E63946 0%,#F4A261 100%);color:#fff;border-radius:12px;padding:16px;margin:16px 0}
        .badge{display:inline-block;padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600;margin-right:6px}
        .progress-bar{height:8px;background:#E5E5E5;border-radius:4px;overflow:hidden;margin-bottom:20px}
        .progress-fill{height:100%;border-radius:4px;transition:width 0.3s}
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState, useEffect} = React;

const MODULE_ID='jama-hypertension';

// Badge definitions for notifications
const badgeDefs = {
    'first-quiz': { name: 'åˆè©¦å•¼è²', icon: 'ğŸ¯' },
    'perfect-score': { name: 'æ»¿åˆ†é”äºº', icon: 'ğŸ’¯' },
    'five-complete': { name: 'å°æœ‰æˆå°±', icon: 'â­' },
    'ten-complete': { name: 'å­¸æœ‰å°ˆç²¾', icon: 'ğŸŒŸ' },
    'master': { name: 'EBMå¤§å¸«', icon: 'ğŸ‘‘' },
    'speed-demon': { name: 'ç¥é€Ÿç­”é¡Œ', icon: 'âš¡' },
    'persistent': { name: 'å …æŒä¸æ‡ˆ', icon: 'ğŸ’ª' },
    'three-streak': { name: 'é€£å‹ä¸‰å ´', icon: 'ğŸ”¥' },
    'five-streak': { name: 'äº”é€£å‹', icon: 'ğŸ†' },
    'triple-perfect': { name: 'ä¸‰å† ç‹', icon: 'ğŸ‘‘' },
    'early-bird': { name: 'æ—©èµ·çš„é³¥', icon: 'ğŸ¦' },
    'night-owl': { name: 'å¤œè²“å­', icon: 'ğŸ¦‰' },
    'weekend-warrior': { name: 'å‡æ—¥æˆ°å£«', icon: 'ğŸ“…' },
    'comeback-kid': { name: 'é€†è½‰å‹', icon: 'ğŸš€' },
    'quick-learner': { name: 'ä¸€é»å°±é€š', icon: 'ğŸ’¡' },
    'improvement-king': { name: 'é€²æ­¥ç‹', icon: 'ğŸ“ˆ' },
    'marathon-runner': { name: 'é¦¬æ‹‰æ¾å­¸ç¿’è€…', icon: 'ğŸƒ' },
    'reviewer': { name: 'æº«æ•…çŸ¥æ–°', icon: 'ğŸ“–' },
    'almost-there': { name: 'å·®ä¸€é»é»', icon: 'ğŸ˜…' },
    'generous-guesser': { name: 'ä½›ç³»ç­”é¡Œ', icon: 'ğŸ™' },
    'learning-worm': { name: 'å­¸è¡“èš¯èš“', icon: 'ğŸª±' },
    'eternal-student': { name: 'æ°¸æ†çš„å­¸ç”Ÿ', icon: 'â™¾ï¸' },
    'speed-fail': { name: 'å…‰é€Ÿé™£äº¡', icon: 'ğŸ’«' },
    'slow-and-wrong': { name: 'æƒ³å¾ˆä¹…é‚„æ˜¯éŒ¯', icon: 'ğŸ¤”' },
    'zero-hero': { name: 'é›¶åˆ†è‹±é›„', icon: 'ğŸ’€' },
    'procrastinator': { name: 'æœ€å¾Œä¸€ç§’', icon: 'â°' },
    'deja-vu': { name: 'æ—¢è¦–æ„Ÿ', icon: 'ğŸ‘€' },
    'coffee-needed': { name: 'éœ€è¦å’–å•¡', icon: 'â˜•' },
    'wanderer': { name: 'æ¼«éŠè€…', icon: 'ğŸ§­' },
    'consistent-output': { name: 'ç©©å®šè¼¸å‡º', icon: 'ğŸ¯' },
    'heart-expert': { name: 'å¿ƒè‡Ÿé”äºº', icon: 'â¤ï¸' },
    'critical-master': { name: 'æ€¥é‡ç—‡å°ˆå®¶', icon: 'ğŸš¨' },
    'neuro-ninja': { name: 'ç¥ç¶“å¿è€…', icon: 'ğŸ§ ' },
    'pulm-pro': { name: 'èƒ¸è…”é«˜æ‰‹', icon: 'ğŸ«' },
    'ebm-foundation': { name: 'EBMåŸºçŸ³', icon: 'ğŸ›ï¸' },
    'jama-collector': { name: 'JAMAæ”¶è—å®¶', icon: 'ğŸ“š' },
    'achievement-hunter': { name: 'æˆå°±çµäºº', icon: 'ğŸ…' },
    'lucky-seven': { name: 'å¹¸é‹ä¸ƒ', icon: 'ğŸ€' },
    'completionist': { name: 'å…¨æˆå°±é”æˆ', icon: 'ğŸ–ï¸' }
};

// Category module mappings
const categoryModules = {
    cardio: ['jama-chest-pain-acs', 'jama-syncope', 'jama-hypertension'],
    critical: ['jama-bacteremia', 'jama-gi-bleed', 'jama-fluid-responsiveness', 'jama-difficult-intubation', 'jama-cirrhosis', 'jama-wound-infection'],
    neuro: ['jama-head-trauma', 'jama-delirium', 'jama-decision-capacity'],
    pulm: ['jama-pleural-effusion', 'jama-osa'],
    core: ['critical-appraisal', 'diagnostic-study', 'prognosis-study', 'rct-appraisal', 'systematic-review', 'literature-search']
};

const ProgressTracker={
    STORAGE_KEY:'ebm-progress',
    newBadges: [],
    getProgress:()=>{try{const d=localStorage.getItem(ProgressTracker.STORAGE_KEY);return d?JSON.parse(d):{version:1,modules:{},badges:[],totalTimeSpent:0,streakData:{currentPassStreak:0,currentPerfectStreak:0},lastActivityDate:null}}catch{return{version:1,modules:{},badges:[],totalTimeSpent:0,streakData:{currentPassStreak:0,currentPerfectStreak:0},lastActivityDate:null}}},
    saveQuizResult:(moduleId,score,total,timeSpent)=>{
        ProgressTracker.newBadges = [];
        const progress=ProgressTracker.getProgress();
        const mod=progress.modules[moduleId]||{bestScore:0,totalAttempts:0,allAttempts:[],lessonsViewed:[],completed:false,firstCompleted:null};
        const attempt={date:new Date().toISOString(),score,timeSpent};
        mod.allAttempts.push(attempt);mod.totalAttempts++;
        if(score>mod.bestScore)mod.bestScore=score;
        const passingScore=Math.ceil(total*0.7);
        if(score>=passingScore&&!mod.completed){mod.completed=true;mod.firstCompleted=attempt.date}
        progress.modules[moduleId]=mod;progress.totalTimeSpent+=timeSpent;progress.lastUpdated=new Date().toISOString();
        ProgressTracker.checkBadges(progress,moduleId,score,total,timeSpent);
        localStorage.setItem(ProgressTracker.STORAGE_KEY,JSON.stringify(progress));return progress;
    },
    checkBadges:(progress,moduleId,score,total,timeSpent)=>{
        const badges=progress.badges||[];const ids=badges.map(b=>b.id);const now=new Date();const nowStr=now.toISOString();
        const hour=now.getHours();const day=now.getDay();
        const passed=score>=Math.ceil(total*0.7);const perfect=score===total;
        const addBadge=(id)=>{if(!ids.includes(id)){badges.push({id,earnedAt:nowStr});ids.push(id);ProgressTracker.newBadges.push(id);return true}return false};

        // === MILESTONE & BASIC BADGES ===
        addBadge('first-quiz');
        if(perfect)addBadge('perfect-score');
        if(timeSpent<120&&passed)addBadge('speed-demon');
        const completed=Object.values(progress.modules).filter(m=>m.completed).length;
        if(completed>=5)addBadge('five-complete');
        if(completed>=10)addBadge('ten-complete');
        if(completed>=18)addBadge('master');
        const mod=progress.modules[moduleId];
        if(mod&&mod.totalAttempts>=3)addBadge('persistent');

        // === TIME-BASED BADGES ===
        if(hour<6)addBadge('early-bird');
        if(hour>=0&&hour<5)addBadge('night-owl');
        if(day===0||day===6)addBadge('weekend-warrior');
        if(hour>=2&&hour<5&&!passed)addBadge('coffee-needed');

        // === STREAK BADGES ===
        const streakData=progress.streakData||{currentPassStreak:0,currentPerfectStreak:0};
        if(passed){streakData.currentPassStreak++;if(perfect)streakData.currentPerfectStreak++;else streakData.currentPerfectStreak=0}
        else{streakData.currentPassStreak=0;streakData.currentPerfectStreak=0}
        if(streakData.currentPassStreak>=3)addBadge('three-streak');
        if(streakData.currentPassStreak>=5)addBadge('five-streak');
        if(streakData.currentPerfectStreak>=3)addBadge('triple-perfect');
        progress.streakData=streakData;

        // === MODULE-SPECIFIC BADGES ===
        if(mod){
            if(mod.totalAttempts===1&&perfect)addBadge('quick-learner');
            if(mod.totalAttempts===1&&score===7)addBadge('lucky-seven');
            if(mod.allAttempts&&mod.allAttempts.length>1){
                const firstScore=mod.allAttempts[0].score;
                if(firstScore<7&&perfect)addBadge('comeback-kid');
                if(score-firstScore>=5)addBadge('improvement-king');
                const lastThree=mod.allAttempts.slice(-3);
                if(lastThree.length===3&&lastThree[0].score===lastThree[1].score&&lastThree[1].score===lastThree[2].score)addBadge('deja-vu');
                if(lastThree.length===3&&lastThree.every(a=>a.score===score))addBadge('consistent-output');
            }
            if(mod.totalAttempts>=10)addBadge('learning-worm');
            if(mod.completed&&mod.totalAttempts>1&&passed)addBadge('reviewer');
        }

        // === HUMOROUS BADGES ===
        if(score===6)addBadge('almost-there');
        if(score===0)addBadge('zero-hero');
        if(score>=2&&score<=3)addBadge('generous-guesser');
        if(timeSpent<30&&!passed)addBadge('speed-fail');
        if(timeSpent>600&&!passed)addBadge('slow-and-wrong');

        // === TOTAL ATTEMPTS BADGES ===
        const totalAttempts=Object.values(progress.modules).reduce((sum,m)=>sum+(m.totalAttempts||0),0);
        if(totalAttempts>=50&&completed<18)addBadge('eternal-student');
        const startedNotCompleted=Object.values(progress.modules).filter(m=>m.totalAttempts>0&&!m.completed).length;
        if(startedNotCompleted>=5&&completed===0)addBadge('wanderer');

        // === PROCRASTINATOR BADGE ===
        if(progress.lastActivityDate){
            const lastActivity=new Date(progress.lastActivityDate);
            const daysSince=(now-lastActivity)/(1000*60*60*24);
            if(daysSince>=7)addBadge('procrastinator');
        }
        progress.lastActivityDate=nowStr;

        // === CATEGORY-SPECIFIC BADGES ===
        const checkCat=(cat,badgeId)=>{const mods=categoryModules[cat]||[];if(mods.length>0&&mods.every(id=>progress.modules[id]?.completed))addBadge(badgeId)};
        checkCat('cardio','heart-expert');
        checkCat('critical','critical-master');
        checkCat('neuro','neuro-ninja');
        checkCat('pulm','pulm-pro');
        checkCat('core','ebm-foundation');
        const jamaComplete=Object.keys(progress.modules).filter(k=>k.startsWith('jama-')&&progress.modules[k]?.completed).length;
        if(jamaComplete>=12)addBadge('jama-collector');

        // === META BADGES ===
        if(badges.length>=10)addBadge('achievement-hunter');
        if(badges.length>=39)addBadge('completionist');

        progress.badges=badges;
    }
};

const BadgeToast = ({ badges, onClose }) => {
    if (!badges || badges.length === 0) return null;
    return (
        <div style={{position:'fixed',top:20,right:20,zIndex:9999,display:'flex',flexDirection:'column',gap:10}}>
            {badges.map((badgeId, i) => {
                const badge = badgeDefs[badgeId];
                if (!badge) return null;
                return (
                    <div key={badgeId} style={{
                        background:'linear-gradient(135deg, #FFD700, #FFA500)',
                        padding:'16px 20px',borderRadius:16,boxShadow:'0 8px 32px rgba(0,0,0,0.2)',
                        display:'flex',alignItems:'center',gap:12,animation:'slideIn 0.5s ease-out',minWidth:240
                    }}>
                        <span style={{fontSize:36}}>{badge.icon}</span>
                        <div style={{flex:1}}>
                            <div style={{fontSize:12,fontWeight:600,color:'#5D4037'}}>æ–°æˆå°±è§£é–!</div>
                            <div style={{fontSize:16,fontWeight:700,color:'#3E2723'}}>{badge.name}</div>
                        </div>
                        <button onClick={()=>onClose(badgeId)} style={{background:'rgba(0,0,0,0.1)',border:'none',borderRadius:8,width:28,height:28,cursor:'pointer',fontSize:14}}>âœ•</button>
                    </div>
                );
            })}
            <style>{`@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}`}</style>
        </div>
    );
};

const lessons = [
    {id:1, title:'é«˜è¡€å£“è¨ºæ–·æ¦‚è«–', sub:'Why Out-of-Office BP?', color:'#E63946'},
    {id:2, title:'è¡€å£“æ¸¬é‡æ–¹æ³•æ¯”è¼ƒ', sub:'Office vs HBPM vs ABPM', color:'#F4A261'},
    {id:3, title:'è¨ºæ–·æº–ç¢ºåº¦åˆ†æ', sub:'Sensitivity & Specificity', color:'#2A9D8F'},
    {id:4, title:'ä¼¼ç„¶æ¯”èˆ‡è‡¨åºŠæ‡‰ç”¨', sub:'Likelihood Ratios', color:'#6A4C93'},
    {id:5, title:'è‡¨åºŠæ±ºç­–æµç¨‹', sub:'Clinical Algorithm', color:'#118AB2'}
];

const quiz = [
    {
        q:'æ ¹æ“šJAMAç³»çµ±æ€§å›é¡§ï¼Œè¨ºæ–·é«˜è¡€å£“çš„åƒè€ƒæ¨™æº– (reference standard) æ˜¯ä»€éº¼ï¼Ÿ',
        o:['å‚³çµ±è¨ºé–“è¡€å£“æ¸¬é‡','å±…å®¶è¡€å£“ç›£æ¸¬ (HBPM)','24å°æ™‚å‹•æ…‹è¡€å£“ç›£æ¸¬ (ABPM)','è‡ªå‹•åŒ–è¨ºé–“è¡€å£“æ¸¬é‡'],
        c:2,
        e:'24å°æ™‚å‹•æ…‹è¡€å£“ç›£æ¸¬ (ABPM) è¢«èªç‚ºæ˜¯è©•ä¼°è¡€å£“çš„åƒè€ƒæ¨™æº–ã€‚ABPMå®šç¾©é«˜è¡€å£“ç‚ºï¼š24å°æ™‚å¹³å‡BP â‰¥130/80 mmHg æˆ–æ¸…é†’æ™‚å¹³å‡BP â‰¥135/85 mmHgã€‚'
    },
    {
        q:'å‚³çµ±è¨ºé–“è¡€å£“æ¸¬é‡ (å–®æ¬¡å°±è¨º1-5æ¬¡æ¸¬é‡ï¼ŒBP â‰¥140/90 mmHg) è¨ºæ–·é«˜è¡€å£“çš„æ•æ„Ÿåº¦ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o:['ç´„ 75%','ç´„ 51%','ç´„ 88%','ç´„ 33%'],
        c:1,
        e:'å‚³çµ±è¨ºé–“è¡€å£“æ¸¬é‡çš„æ•æ„Ÿåº¦åƒ…ç´„ 51% (95% CI: 36%-67%)ï¼Œé€™æ„å‘³è‘—ç´„ä¸€åŠçš„çœŸæ­£é«˜è¡€å£“æ‚£è€…å¯èƒ½è¢«æ¼è¨ºã€‚'
    },
    {
        q:'å±…å®¶è¡€å£“ç›£æ¸¬ (HBPM, BP â‰¥135/85 mmHg) è¨ºæ–·é«˜è¡€å£“çš„æ•æ„Ÿåº¦å’Œç‰¹ç•°åº¦å„ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o:['æ•æ„Ÿåº¦ 51%ï¼Œç‰¹ç•°åº¦ 88%','æ•æ„Ÿåº¦ 88%ï¼Œç‰¹ç•°åº¦ 51%','æ•æ„Ÿåº¦ 75%ï¼Œç‰¹ç•°åº¦ 76%','æ•æ„Ÿåº¦ 87%ï¼Œç‰¹ç•°åº¦ 24%'],
        c:2,
        e:'HBPMçš„æ•æ„Ÿåº¦ç´„75% (95% CI: 65%-86%)ï¼Œç‰¹ç•°åº¦ç´„76% (95% CI: 65%-86%)ï¼Œæ¯”å‚³çµ±è¨ºé–“æ¸¬é‡æœ‰æ›´å¹³è¡¡çš„æ•æ„Ÿåº¦å’Œç‰¹ç•°åº¦ã€‚'
    },
    {
        q:'å‚³çµ±è¨ºé–“è¡€å£“æ¸¬é‡çš„æ­£ä¼¼ç„¶æ¯” (LR+) ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o:['1.5','3.1','4.2','10.5'],
        c:2,
        e:'å‚³çµ±è¨ºé–“è¡€å£“æ¸¬é‡çš„ LR+ ç´„ 4.2 (95% CI: 2.5-6.0)ã€‚LR+ åœ¨ 2-5 ä¹‹é–“å±¬æ–¼å¼±åˆ°ä¸­ç­‰çš„è¨ºæ–·åƒ¹å€¼ï¼Œç„¡æ³•æœ‰æ•ˆç¢ºè¨ºé«˜è¡€å£“ã€‚'
    },
    {
        q:'å±…å®¶è¡€å£“ç›£æ¸¬ (HBPM) çš„è² ä¼¼ç„¶æ¯” (LR-) ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o:['0.56','0.33','0.10','0.75'],
        c:1,
        e:'HBPM çš„ LR- ç´„ 0.33 (95% CI: 0.20-0.47)ã€‚LR- åœ¨ 0.2-0.5 ä¹‹é–“å±¬æ–¼å¼±åˆ°ä¸­ç­‰çš„æ’é™¤åƒ¹å€¼ï¼Œæ¯”å‚³çµ±è¨ºé–“æ¸¬é‡ (LR- 0.56) æ›´èƒ½æ’é™¤é«˜è¡€å£“ã€‚'
    },
    {
        q:'ä»€éº¼æ˜¯ã€Œç™½è¢é«˜è¡€å£“ (White Coat Hypertension)ã€ï¼Ÿ',
        o:['è¨ºé–“è¡€å£“æ­£å¸¸ï¼Œä½†å±…å®¶æˆ–å‹•æ…‹è¡€å£“å‡é«˜','è¨ºé–“è¡€å£“å‡é«˜ï¼Œä½†å±…å®¶æˆ–å‹•æ…‹è¡€å£“æ­£å¸¸','æ‰€æœ‰æ¸¬é‡æ–¹æ³•è¡€å£“éƒ½å‡é«˜','è¡€å£“è®Šç•°åº¦å¾ˆå¤§'],
        c:1,
        e:'ç™½è¢é«˜è¡€å£“æ˜¯æŒ‡è¨ºé–“è¡€å£“å‡é«˜ (â‰¥140/90)ï¼Œä½†åœ¨è¨ºé–“å¤–æ¸¬é‡ (HBPMæˆ–ABPM) è¡€å£“æ­£å¸¸çš„æƒ…æ³ã€‚é€™é¡æ‚£è€…ä¸éœ€è¦ç«‹å³æ²»ç™‚ï¼Œä½†éœ€è¦è¿½è¹¤ã€‚'
    },
    {
        q:'ä»€éº¼æ˜¯ã€Œéš±åŒ¿æ€§é«˜è¡€å£“ (Masked Hypertension)ã€ï¼Ÿ',
        o:['è¨ºé–“è¡€å£“æ­£å¸¸ï¼Œä½†å±…å®¶æˆ–å‹•æ…‹è¡€å£“å‡é«˜','è¨ºé–“è¡€å£“å‡é«˜ï¼Œä½†å±…å®¶æˆ–å‹•æ…‹è¡€å£“æ­£å¸¸','è¡€å£“åªåœ¨å¤œé–“å‡é«˜','è¡€å£“åªåœ¨æ¸…æ™¨å‡é«˜'],
        c:0,
        e:'éš±åŒ¿æ€§é«˜è¡€å£“æ˜¯æŒ‡è¨ºé–“è¡€å£“æ­£å¸¸ (<140/90)ï¼Œä½†åœ¨è¨ºé–“å¤–æ¸¬é‡è¡€å£“å‡é«˜çš„æƒ…æ³ã€‚é€™æ˜¯æœ€å±éšªçš„é¡å‹ï¼Œå› ç‚ºæ‚£è€…å¯èƒ½è¢«èª¤èªç‚ºæ­£å¸¸è€Œæœªæ¥å—æ²»ç™‚ã€‚'
    },
    {
        q:'æ ¹æ“šç ”ç©¶ï¼Œå‚³çµ±è¨ºé–“æ¸¬é‡çš„é«˜ç‰¹ç•°åº¦ (88%) è‡¨åºŠæ„ç¾©ç‚ºä½•ï¼Ÿ',
        o:['å¯ä»¥æœ‰æ•ˆæ’é™¤é«˜è¡€å£“','å¯ä»¥æœ‰æ•ˆç¢ºè¨ºé«˜è¡€å£“','æ•æ„Ÿåº¦ä¹Ÿæœƒå¾ˆé«˜','ä¸éœ€è¦å…¶ä»–æª¢æŸ¥ç¢ºèª'],
        c:1,
        e:'é«˜ç‰¹ç•°åº¦æ„å‘³è‘—å‡é™½æ€§å°‘ï¼Œå› æ­¤è¨ºé–“è¡€å£“å‡é«˜æ™‚è¼ƒèƒ½ç¢ºè¨ºé«˜è¡€å£“ (SpPInåŸå‰‡)ã€‚ä½†å› æ•æ„Ÿåº¦ä½ (51%)ï¼Œè¡€å£“æ­£å¸¸ä¸èƒ½æ’é™¤é«˜è¡€å£“ã€‚'
    },
    {
        q:'ä½•æ™‚æ‡‰è©²é€²è¡Œ24å°æ™‚å‹•æ…‹è¡€å£“ç›£æ¸¬ (ABPM)ï¼Ÿ',
        o:['æ‰€æœ‰æ‡·ç–‘é«˜è¡€å£“çš„æ‚£è€…','åªæœ‰è¨ºé–“è¡€å£“å‡é«˜çš„æ‚£è€…','ç•¶è¨ºé–“å’Œå±…å®¶è¡€å£“ä¸ä¸€è‡´æˆ–æ¥è¿‘é–¾å€¼æ™‚','åªæœ‰å¹´è¼•æ‚£è€…'],
        c:2,
        e:'ç•¶è¨ºé–“å’Œå±…å®¶è¡€å£“æ¸¬é‡çµæœä¸ä¸€è‡´ï¼Œæˆ–è¡€å£“å€¼æ¥è¿‘è¨ºæ–·é–¾å€¼æ™‚ï¼Œæ‡‰é€²è¡ŒABPMä»¥ç¢ºç«‹è¨ºæ–·ã€‚é€™å¯ä»¥å€åˆ†ç™½è¢é«˜è¡€å£“å’Œéš±åŒ¿æ€§é«˜è¡€å£“ã€‚'
    },
    {
        q:'é—œæ–¼é«˜è¡€å£“è¨ºæ–·ï¼Œä»¥ä¸‹ä½•è€…ç‚ºJAMAç ”ç©¶çš„ä¸»è¦çµè«–ï¼Ÿ',
        o:['è¨ºé–“è¡€å£“æ¸¬é‡è¶³ä»¥è¨ºæ–·é«˜è¡€å£“','æ‡‰è©²ç”¨å±…å®¶è¡€å£“å®Œå…¨å–ä»£è¨ºé–“è¡€å£“','è¨ºæ–·é«˜è¡€å£“å‰æ‡‰ç²å–è¨ºé–“å¤–è¡€å£“æ¸¬é‡','åªæœ‰ABPMæ‰èƒ½è¨ºæ–·é«˜è¡€å£“'],
        c:2,
        e:'JAMAç ”ç©¶çµè«–ï¼šè¨ºæ–·æˆäººé«˜è¡€å£“å‰ï¼Œæ‡‰ç²å–è¨ºé–“å¤–è¡€å£“æ¸¬é‡ (HBPMæˆ–ABPM) ä»¥è£œå……è¨ºé–“æ¸¬é‡ã€‚å–®ç¨ä½¿ç”¨è¨ºé–“è¡€å£“å¯èƒ½å°è‡´éåº¦è¨ºæ–·æˆ–æ¼è¨ºã€‚'
    }
];

const App = () => {
    const [page, setPage] = useState('home');
    const [lessonId, setLessonId] = useState(1);
    const [qIdx, setQIdx] = useState(0);
    const [score, setScore] = useState(0);
    const [sel, setSel] = useState(null);
    const [show, setShow] = useState(false);
    const [done, setDone] = useState(false);
    const [quizStartTime, setQuizStartTime] = useState(null);
    const [newBadges, setNewBadges] = useState([]);

    useEffect(() => { if (page === 'quiz' && !done && !quizStartTime) setQuizStartTime(Date.now()) }, [page, done]);
    useEffect(() => {
        if (done && quizStartTime) {
            const t = Math.round((Date.now() - quizStartTime) / 1000);
            ProgressTracker.saveQuizResult(MODULE_ID, score, quiz.length, t);
            if (ProgressTracker.newBadges.length > 0) {
                setNewBadges(ProgressTracker.newBadges);
                setTimeout(() => setNewBadges([]), 5000);
            }
        }
    }, [done]);

    const Header = ({title}) => (
        <header style={{background:'#fff',borderBottom:'1px solid #eee',padding:'12px 16px',position:'sticky',top:0,zIndex:10}}>
            <div style={{maxWidth:480,margin:'0 auto',display:'flex',alignItems:'center',gap:12}}>
                <button onClick={()=>page==='home'?window.location.href='index.html':setPage('home')} style={{background:'#FFF0F0',border:'none',borderRadius:10,width:40,height:40,cursor:'pointer',color:'var(--pri)',display:'flex',alignItems:'center',justifyContent:'center'}}>
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                </button>
                <span style={{fontWeight:700,color:'#8B0000'}}>{title}</span>
            </div>
        </header>
    );

    const Home = () => (
        <div>
            <Header title="é«˜è¡€å£“è¨ºæ–·è©•ä¼°"/>
            <div style={{background:'linear-gradient(135deg,#E63946,#F4A261)',padding:'32px 20px',color:'#fff'}}>
                <div style={{maxWidth:480,margin:'0 auto'}}>
                    <div style={{background:'rgba(255,255,255,0.2)',display:'inline-block',padding:'6px 14px',borderRadius:50,fontSize:12,fontWeight:600,marginBottom:16}}>
                        ğŸ©º JAMA Rational Clinical Examination
                    </div>
                    <h1 style={{fontSize:24,fontWeight:700,marginBottom:8}}>Does This Adult Patient Have Hypertension?</h1>
                    <h2 style={{fontSize:18,fontWeight:500,marginBottom:12,opacity:0.95}}>æˆäººé«˜è¡€å£“è¨ºæ–·è©•ä¼°</h2>
                    <p style={{opacity:0.9,fontSize:14,marginBottom:12}}>Viera AJ, et al. JAMA 2021;326(4):339-347</p>
                    <a 
                        href="https://jamanetwork.com/journals/jama/fullarticle/2782296" 
                        target="_blank" 
                        rel="noopener noreferrer"
                        style={{
                            display:'inline-flex',
                            alignItems:'center',
                            gap:6,
                            background:'rgba(255,255,255,0.25)',
                            color:'#fff',
                            padding:'8px 16px',
                            borderRadius:25,
                            fontSize:13,
                            fontWeight:600,
                            textDecoration:'none',
                            backdropFilter:'blur(10px)',
                            transition:'all 0.3s'
                        }}
                    >
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
                        é–±è®€åŸæ–‡ Read Full Article
                    </a>
                </div>
            </div>
            <div style={{padding:'0 16px',marginTop:-20}}>
                <div style={{maxWidth:480,margin:'0 auto'}}>
                    <div className="key-point">
                        <h3 style={{fontSize:16,fontWeight:700,marginBottom:12}}>ğŸ”‘ æ ¸å¿ƒçµè«– Key Finding</h3>
                        <p style={{fontSize:14,lineHeight:1.8}}>
                            è¨ºæ–·æˆäººé«˜è¡€å£“å‰ï¼Œæ‡‰ç²å–<strong>è¨ºé–“å¤–è¡€å£“æ¸¬é‡</strong>ä»¥è£œå……è¨ºé–“è¡€å£“ã€‚
                            è¨ºé–“è¡€å£“çš„æ•æ„Ÿåº¦å’Œç‰¹ç•°åº¦æœ‰é™ï¼Œå°¤å…¶åœ¨å‰æ¸¬æ©Ÿç‡ä½æ™‚ã€‚
                        </p>
                    </div>
                    
                    <div className="card">
                        <h3 style={{fontSize:16,fontWeight:700,color:'var(--pri)',marginBottom:12}}>ğŸ¯ å­¸ç¿’ç›®æ¨™</h3>
                        {[
                            'äº†è§£ä¸åŒè¡€å£“æ¸¬é‡æ–¹æ³•çš„è¨ºæ–·æº–ç¢ºåº¦',
                            'æŒæ¡è¨ºé–“è¡€å£“ã€å±…å®¶è¡€å£“ã€å‹•æ…‹è¡€å£“çš„æ¯”è¼ƒ',
                            'ç†è§£ä¼¼ç„¶æ¯”åœ¨é«˜è¡€å£“è¨ºæ–·çš„æ‡‰ç”¨',
                            'å»ºç«‹é«˜è¡€å£“è¨ºæ–·çš„è‡¨åºŠæ±ºç­–æµç¨‹',
                            'èªè­˜ç™½è¢é«˜è¡€å£“èˆ‡éš±åŒ¿æ€§é«˜è¡€å£“'
                        ].map((t,i)=>(
                            <div key={i} style={{display:'flex',gap:10,marginBottom:8,fontSize:14}}>
                                <span style={{background:'var(--pri)',color:'#fff',borderRadius:6,width:22,height:22,display:'flex',alignItems:'center',justifyContent:'center',fontSize:12,flexShrink:0}}>{i+1}</span>
                                <span style={{color:'var(--txt2)'}}>{t}</span>
                            </div>
                        ))}
                    </div>
                    
                    <h3 style={{fontSize:18,fontWeight:700,marginBottom:16}}>ğŸ“š èª²ç¨‹å…§å®¹</h3>
                    {lessons.map(l=>(
                        <div key={l.id} className="card" onClick={()=>{setLessonId(l.id);setPage('lesson')}} style={{cursor:'pointer',transition:'transform 0.2s'}}>
                            <div style={{display:'flex',alignItems:'center',gap:16}}>
                                <div style={{width:48,height:48,borderRadius:12,background:`linear-gradient(135deg,${l.color},${l.color}88)`,display:'flex',alignItems:'center',justifyContent:'center',color:'#fff',fontWeight:700,fontSize:18}}>{l.id}</div>
                                <div style={{flex:1}}>
                                    <div style={{fontSize:11,color:l.color,fontWeight:600}}>Lesson {l.id}</div>
                                    <div style={{fontSize:16,fontWeight:700}}>{l.title}</div>
                                    <div style={{fontSize:13,color:'var(--txt2)'}}>{l.sub}</div>
                                </div>
                                <svg viewBox="0 0 24 24" fill={l.color} width="20" height="20"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/></svg>
                            </div>
                        </div>
                    ))}
                    
                    <button className="btn btn-acc" onClick={()=>{setQIdx(0);setScore(0);setSel(null);setShow(false);setDone(false);setPage('quiz')}} style={{width:'100%',justifyContent:'center',marginTop:20,marginBottom:32}}>
                        ğŸ“ é–‹å§‹æ¸¬é©— (10é¡Œ)
                    </button>
                </div>
            </div>
            <footer style={{background:'#FFF0F0',padding:'24px 16px',textAlign:'center'}}>
                <p style={{fontSize:13,color:'var(--txt2)'}}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨</p>
                <p style={{fontSize:12,color:'var(--txt2)'}}>è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
            </footer>
        </div>
    );

    // Lesson 1: é«˜è¡€å£“è¨ºæ–·æ¦‚è«–
    const L1 = () => (
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pri)',marginBottom:12}}>ğŸ©º ç‚ºä»€éº¼éœ€è¦è¨ºé–“å¤–è¡€å£“ï¼Ÿ</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:16}}>
                    å‚³çµ±è¨ºé–“è¡€å£“æ¸¬é‡é•·æœŸä»¥ä¾†æ˜¯è¨ºæ–·é«˜è¡€å£“çš„æ¨™æº–æ–¹æ³•ï¼Œä½†ç ”ç©¶é¡¯ç¤ºå®ƒ<strong>ä¸¦éæœ€æº–ç¢º</strong>çš„è¨ºæ–·å·¥å…·ã€‚
                </p>
                <div className="info">
                    <strong style={{color:'var(--blue)'}}>ğŸ“Š ç ”ç©¶èƒŒæ™¯</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ æ”¶éŒ„12ç¯‡æ©«æ–·é¢ç ”ç©¶ (n=6,877)<br/>
                    â€¢ æ¯”è¼ƒè¨ºé–“è¡€å£“èˆ‡24å°æ™‚ABPM<br/>
                    â€¢ é«˜è¡€å£“ç››è¡Œç‡ç´„49-54%
                    </span>
                </div>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--acc)',marginBottom:12}}>ğŸ“‹ è¡€å£“æ¸¬é‡æ–¹æ³•</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æ–¹æ³•</th>
                            <th>é–¾å€¼</th>
                            <th>ç‰¹é»</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{fontWeight:600}}>è¨ºé–“è¡€å£“<br/><span style={{fontSize:11,color:'var(--txt2)'}}>Office BP</span></td>
                            <td>â‰¥140/90</td>
                            <td style={{textAlign:'left',fontSize:12}}>å–®æ¬¡å°±è¨º1-5æ¬¡æ¸¬é‡</td>
                        </tr>
                        <tr>
                            <td style={{fontWeight:600}}>å±…å®¶è¡€å£“<br/><span style={{fontSize:11,color:'var(--txt2)'}}>HBPM</span></td>
                            <td>â‰¥135/85</td>
                            <td style={{textAlign:'left',fontSize:12}}>æ•¸å¤©å…§å¤šæ¬¡æ¸¬é‡å¹³å‡</td>
                        </tr>
                        <tr>
                            <td style={{fontWeight:600}}>å‹•æ…‹è¡€å£“<br/><span style={{fontSize:11,color:'var(--txt2)'}}>ABPM</span></td>
                            <td>â‰¥130/80<br/><span style={{fontSize:10}}>(24hrå¹³å‡)</span></td>
                            <td style={{textAlign:'left',fontSize:12}}>24å°æ™‚é€£çºŒç›£æ¸¬<br/><strong style={{color:'var(--pri)'}}>åƒè€ƒæ¨™æº–</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pur)',marginBottom:12}}>ğŸ” å››ç¨®è¡€å£“è¡¨å‹</h3>
                <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:10}}>
                    <div style={{background:'#F0FFF8',padding:12,borderRadius:10,textAlign:'center'}}>
                        <div style={{fontWeight:700,color:'var(--suc)',marginBottom:4}}>æ­£å¸¸è¡€å£“</div>
                        <div style={{fontSize:12,color:'var(--txt2)'}}>è¨ºé–“ âœ“ æ­£å¸¸<br/>è¨ºé–“å¤– âœ“ æ­£å¸¸</div>
                    </div>
                    <div style={{background:'#FFF0F0',padding:12,borderRadius:10,textAlign:'center'}}>
                        <div style={{fontWeight:700,color:'var(--pri)',marginBottom:4}}>æŒçºŒæ€§é«˜è¡€å£“</div>
                        <div style={{fontSize:12,color:'var(--txt2)'}}>è¨ºé–“ âœ— å‡é«˜<br/>è¨ºé–“å¤– âœ— å‡é«˜</div>
                    </div>
                    <div style={{background:'#FFFBF0',padding:12,borderRadius:10,textAlign:'center'}}>
                        <div style={{fontWeight:700,color:'var(--warn)',marginBottom:4}}>ç™½è¢é«˜è¡€å£“</div>
                        <div style={{fontSize:12,color:'var(--txt2)'}}>è¨ºé–“ âœ— å‡é«˜<br/>è¨ºé–“å¤– âœ“ æ­£å¸¸</div>
                    </div>
                    <div style={{background:'#F8F0FF',padding:12,borderRadius:10,textAlign:'center'}}>
                        <div style={{fontWeight:700,color:'var(--pur)',marginBottom:4}}>éš±åŒ¿æ€§é«˜è¡€å£“</div>
                        <div style={{fontSize:12,color:'var(--txt2)'}}>è¨ºé–“ âœ“ æ­£å¸¸<br/>è¨ºé–“å¤– âœ— å‡é«˜</div>
                    </div>
                </div>
            </div>
            
            <div className="warn">
                <strong style={{color:'#B8860B'}}>âš ï¸ è‡¨åºŠé‡è¦æ€§</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                <strong>éš±åŒ¿æ€§é«˜è¡€å£“</strong>æœ€å±éšªï¼šæ‚£è€…è¢«èª¤èªç‚ºæ­£å¸¸ï¼Œæœªæ¥å—æ²»ç™‚ï¼Œä½†æœ‰ç›¸åŒçš„å¿ƒè¡€ç®¡é¢¨éšªï¼
                </span>
            </div>
        </div>
    );

    // Lesson 2: è¡€å£“æ¸¬é‡æ–¹æ³•æ¯”è¼ƒ
    const L2 = () => (
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pri2)',marginBottom:12}}>ğŸ“Š è¨ºæ–·æº–ç¢ºåº¦ç¸½è¦½</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æ¸¬é‡æ–¹æ³•</th>
                            <th>æ•æ„Ÿåº¦</th>
                            <th>ç‰¹ç•°åº¦</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{background:'#FFF5F5'}}>
                            <td style={{fontWeight:600,textAlign:'left'}}>å‚³çµ±è¨ºé–“è¡€å£“<br/><span style={{fontSize:10,color:'var(--txt2)'}}>BP â‰¥140/90</span></td>
                            <td style={{color:'var(--err)',fontWeight:600}}>51%</td>
                            <td style={{color:'var(--suc)',fontWeight:600}}>88%</td>
                        </tr>
                        <tr style={{background:'#F0FFF8'}}>
                            <td style={{fontWeight:600,textAlign:'left'}}>å±…å®¶è¡€å£“ HBPM<br/><span style={{fontSize:10,color:'var(--txt2)'}}>BP â‰¥135/85</span></td>
                            <td style={{color:'var(--acc)',fontWeight:600}}>75%</td>
                            <td style={{color:'var(--acc)',fontWeight:600}}>76%</td>
                        </tr>
                        <tr style={{background:'#F8F0FF'}}>
                            <td style={{fontWeight:600,textAlign:'left'}}>ç„¡äººå€¼å®ˆè‡ªå‹•è¨ºé–“<br/><span style={{fontSize:10,color:'var(--txt2)'}}>BP â‰¥135/85</span></td>
                            <td style={{color:'var(--err)',fontWeight:600}}>48-51%</td>
                            <td style={{color:'var(--suc)',fontWeight:600}}>80-91%</td>
                        </tr>
                        <tr style={{background:'#FFFBF0'}}>
                            <td style={{fontWeight:600,textAlign:'left'}}>æœ‰äººå€¼å®ˆè‡ªå‹•è¨ºé–“<br/><span style={{fontSize:10,color:'var(--txt2)'}}>BP â‰¥140/90</span></td>
                            <td style={{color:'var(--suc)',fontWeight:600}}>87.6%</td>
                            <td style={{color:'var(--err)',fontWeight:600}}>24.1%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--acc)',marginBottom:12}}>ğŸ  å±…å®¶è¡€å£“ç›£æ¸¬ HBPM</h3>
                <div className="good">
                    <strong style={{color:'var(--suc)'}}>âœ“ å„ªé»</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ è¼ƒå¹³è¡¡çš„æ•æ„Ÿåº¦(75%)å’Œç‰¹ç•°åº¦(76%)<br/>
                    â€¢ å¯åœ¨ç†Ÿæ‚‰ç’°å¢ƒä¸­æ¸¬é‡ï¼Œæ¸›å°‘ç™½è¢æ•ˆæ‡‰<br/>
                    â€¢ æˆæœ¬è¼ƒä½ï¼Œå®¹æ˜“åŸ·è¡Œ<br/>
                    â€¢ å¯ä»¥è¿½è¹¤è¡€å£“è®ŠåŒ–è¶¨å‹¢
                    </span>
                </div>
                <div className="tip">
                    <strong style={{color:'var(--pri2)'}}>ğŸ“‹ å»ºè­°æ¸¬é‡æ–¹å¼</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ æ—©æ™šå„æ¸¬é‡2æ¬¡ï¼Œé€£çºŒæ•¸å¤©<br/>
                    â€¢ å–å¹³å‡å€¼åˆ¤è®€<br/>
                    â€¢ é–¾å€¼ï¼šâ‰¥135/85 mmHg
                    </span>
                </div>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--blue)',marginBottom:12}}>â° 24å°æ™‚å‹•æ…‹è¡€å£“ ABPM</h3>
                <div className="info">
                    <strong style={{color:'var(--blue)'}}>ğŸ† åƒè€ƒæ¨™æº– Reference Standard</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    ABPM è¢«èªç‚ºæ˜¯è¡€å£“è©•ä¼°çš„é»ƒé‡‘æ¨™æº–ï¼Œå› ç‚ºï¼š<br/>
                    â€¢ æ’é™¤ç™½è¢æ•ˆæ‡‰<br/>
                    â€¢ åµæ¸¬éš±åŒ¿æ€§é«˜è¡€å£“<br/>
                    â€¢ è©•ä¼°å¤œé–“è¡€å£“<br/>
                    â€¢ èˆ‡å¿ƒè¡€ç®¡é å¾Œç›¸é—œæ€§æœ€å¼·
                    </span>
                </div>
                <table>
                    <thead><tr><th>ABPM å®šç¾©</th><th>é«˜è¡€å£“é–¾å€¼</th></tr></thead>
                    <tbody>
                        <tr><td>24å°æ™‚å¹³å‡</td><td style={{fontWeight:600,color:'var(--pri)'}}>â‰¥130/80 mmHg</td></tr>
                        <tr><td>æ¸…é†’æ™‚å¹³å‡</td><td style={{fontWeight:600,color:'var(--pri)'}}>â‰¥135/85 mmHg</td></tr>
                        <tr><td>ç¡çœ æ™‚å¹³å‡</td><td style={{fontWeight:600,color:'var(--pri)'}}>â‰¥120/70 mmHg</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    );

    // Lesson 3: è¨ºæ–·æº–ç¢ºåº¦åˆ†æ
    const L3 = () => (
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--acc)',marginBottom:12}}>ğŸ“ˆ ä¼¼ç„¶æ¯” Likelihood Ratios</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æ¸¬é‡æ–¹æ³•</th>
                            <th>LR+</th>
                            <th>LR-</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{fontWeight:600,textAlign:'left'}}>å‚³çµ±è¨ºé–“è¡€å£“</td>
                            <td><span style={{background:'#FFFBF0',padding:'4px 8px',borderRadius:6,fontWeight:600}}>4.2</span></td>
                            <td><span style={{background:'#FFF5F5',padding:'4px 8px',borderRadius:6,fontWeight:600}}>0.56</span></td>
                        </tr>
                        <tr>
                            <td style={{fontWeight:600,textAlign:'left'}}>å±…å®¶è¡€å£“ HBPM</td>
                            <td><span style={{background:'#FFFBF0',padding:'4px 8px',borderRadius:6,fontWeight:600}}>3.1</span></td>
                            <td><span style={{background:'#F0FFF8',padding:'4px 8px',borderRadius:6,fontWeight:600}}>0.33</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pri)',marginBottom:12}}>ğŸ¯ ä¼¼ç„¶æ¯”è§£è®€</h3>
                <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:12}}>
                    <div>
                        <h4 style={{fontSize:14,fontWeight:600,color:'var(--suc)',marginBottom:8}}>æ­£ä¼¼ç„¶æ¯” LR+</h4>
                        <table style={{fontSize:11}}>
                            <tbody>
                                <tr><td>&gt;10</td><td style={{color:'var(--suc)'}}>å¼·åŠ›ç¢ºè¨º</td></tr>
                                <tr><td>5-10</td><td style={{color:'var(--acc)'}}>ä¸­åº¦ç¢ºè¨º</td></tr>
                                <tr><td>2-5</td><td style={{color:'var(--warn)'}}>å¼±</td></tr>
                                <tr><td>1-2</td><td style={{color:'var(--txt2)'}}>ç„¡æ„ç¾©</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <h4 style={{fontSize:14,fontWeight:600,color:'var(--err)',marginBottom:8}}>è² ä¼¼ç„¶æ¯” LR-</h4>
                        <table style={{fontSize:11}}>
                            <tbody>
                                <tr><td>&lt;0.1</td><td style={{color:'var(--suc)'}}>å¼·åŠ›æ’é™¤</td></tr>
                                <tr><td>0.1-0.2</td><td style={{color:'var(--acc)'}}>ä¸­åº¦æ’é™¤</td></tr>
                                <tr><td>0.2-0.5</td><td style={{color:'var(--warn)'}}>å¼±</td></tr>
                                <tr><td>0.5-1</td><td style={{color:'var(--txt2)'}}>ç„¡æ„ç¾©</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div className="purple">
                <strong style={{color:'var(--pur)'}}>ğŸ“Š è‡¨åºŠæ„ç¾©è§£è®€</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                <strong>å‚³çµ±è¨ºé–“è¡€å£“ (LR+ 4.2, LR- 0.56)ï¼š</strong><br/>
                â€¢ LR+ 4.2 å±¬æ–¼å¼±åˆ°ä¸­ç­‰ â†’ é™½æ€§ä¸èƒ½ç¢ºè¨º<br/>
                â€¢ LR- 0.56 æ¥è¿‘ç„¡æ„ç¾© â†’ é™°æ€§ä¸èƒ½æ’é™¤<br/><br/>
                <strong>å±…å®¶è¡€å£“ (LR+ 3.1, LR- 0.33)ï¼š</strong><br/>
                â€¢ LR- 0.33 ç•¥å„ªæ–¼è¨ºé–“ â†’ è¼ƒèƒ½æ’é™¤é«˜è¡€å£“
                </span>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--blue)',marginBottom:12}}>ğŸ§® æ©Ÿç‡è¨ˆç®—ç¯„ä¾‹</h3>
                <div style={{background:'#F0F8FF',padding:16,borderRadius:12}}>
                    <p style={{fontSize:14,marginBottom:12}}><strong>æƒ…å¢ƒï¼š</strong>50æ­²ç”·æ€§ï¼Œç„¡ç—‡ç‹€ï¼Œè¨ºé–“è¡€å£“ 148/94 mmHg</p>
                    <p style={{fontSize:14,marginBottom:8}}>â€¢ å‰æ¸¬æ©Ÿç‡ï¼ˆä¼°è¨ˆï¼‰ï¼š30%</p>
                    <p style={{fontSize:14,marginBottom:8}}>â€¢ è¨ºé–“è¡€å£“é™½æ€§ï¼ŒLR+ = 4.2</p>
                    <div className="formula" style={{background:'#E8F4FD'}}>
                        <div style={{marginBottom:8}}>å‰æ¸¬å‹ç®— = 0.30/0.70 = 0.43</div>
                        <div style={{marginBottom:8}}>å¾Œæ¸¬å‹ç®— = 0.43 Ã— 4.2 = 1.80</div>
                        <div style={{color:'var(--pri)',fontWeight:700}}>å¾Œæ¸¬æ©Ÿç‡ = 1.80/2.80 = 64%</div>
                    </div>
                    <p style={{fontSize:13,color:'var(--txt2)'}}>
                        çµè«–ï¼šæ©Ÿç‡å¾30%ä¸Šå‡åˆ°64%ï¼Œä½†ä»æœ‰ç´„1/3æ©Ÿæœƒä¸æ˜¯é«˜è¡€å£“ï¼Œéœ€è¦é€²ä¸€æ­¥ç¢ºèªã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 4: ä¼¼ç„¶æ¯”èˆ‡è‡¨åºŠæ‡‰ç”¨
    const L4 = () => (
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pur)',marginBottom:12}}>ğŸ”¬ çµ„åˆæ¸¬è©¦ç­–ç•¥</h3>
                <p style={{fontSize:14,color:'var(--txt2)',marginBottom:16}}>
                    ç•¶è¨ºé–“è¡€å£“å’Œå±…å®¶è¡€å£“éƒ½æ¸¬é‡æ™‚ï¼Œå¯ä»¥ç²å¾—æ›´æº–ç¢ºçš„è¨ºæ–·ã€‚
                </p>
                <table>
                    <thead>
                        <tr>
                            <th>è¨ºé–“ BP</th>
                            <th>å±…å®¶ BP</th>
                            <th>è¨ºæ–·å‚¾å‘</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{background:'#FFF5F5'}}>
                            <td>â‰¥140/90 âœ—</td>
                            <td>â‰¥135/85 âœ—</td>
                            <td style={{fontWeight:600,color:'var(--pri)'}}>å¾ˆå¯èƒ½é«˜è¡€å£“</td>
                        </tr>
                        <tr style={{background:'#F0FFF8'}}>
                            <td>&lt;140/90 âœ“</td>
                            <td>&lt;135/85 âœ“</td>
                            <td style={{fontWeight:600,color:'var(--suc)'}}>å¾ˆå¯èƒ½æ­£å¸¸</td>
                        </tr>
                        <tr style={{background:'#FFFBF0'}}>
                            <td>â‰¥140/90 âœ—</td>
                            <td>&lt;135/85 âœ“</td>
                            <td style={{fontWeight:600,color:'var(--warn)'}}>ç™½è¢é«˜è¡€å£“ï¼Ÿ<br/><span style={{fontSize:11}}>éœ€ABPMç¢ºèª</span></td>
                        </tr>
                        <tr style={{background:'#F8F0FF'}}>
                            <td>&lt;140/90 âœ“</td>
                            <td>â‰¥135/85 âœ—</td>
                            <td style={{fontWeight:600,color:'var(--pur)'}}>éš±åŒ¿æ€§é«˜è¡€å£“ï¼Ÿ<br/><span style={{fontSize:11}}>éœ€ABPMç¢ºèª</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pri)',marginBottom:12}}>âš ï¸ ç™½è¢é«˜è¡€å£“çš„è™•ç†</h3>
                <div className="warn">
                    <strong style={{color:'#B8860B'}}>å®šç¾©</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    è¨ºé–“è¡€å£“ â‰¥140/90 mmHgï¼Œä½†<br/>
                    å±…å®¶æˆ–å‹•æ…‹è¡€å£“æ­£å¸¸
                    </span>
                </div>
                <div className="tip">
                    <strong style={{color:'var(--pri2)'}}>ğŸ“‹ è™•ç†å»ºè­°</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ ä¸éœ€ç«‹å³è—¥ç‰©æ²»ç™‚<br/>
                    â€¢ å®šæœŸè¿½è¹¤ï¼ˆ6-12å€‹æœˆï¼‰<br/>
                    â€¢ ç´„15-30%æœƒç™¼å±•ç‚ºæŒçºŒæ€§é«˜è¡€å£“<br/>
                    â€¢ ç”Ÿæ´»å‹æ…‹èª¿æ•´
                    </span>
                </div>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pur)',marginBottom:12}}>ğŸ”´ éš±åŒ¿æ€§é«˜è¡€å£“çš„è™•ç†</h3>
                <div className="purple">
                    <strong style={{color:'var(--pur)'}}>å®šç¾©</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    è¨ºé–“è¡€å£“ &lt;140/90 mmHgï¼Œä½†<br/>
                    å±…å®¶æˆ–å‹•æ…‹è¡€å£“å‡é«˜
                    </span>
                </div>
                <div style={{background:'#FFE8E8',borderLeft:'4px solid var(--err)',borderRadius:'0 12px 12px 0',padding:14,margin:'12px 0'}}>
                    <strong style={{color:'var(--err)'}}>âš ï¸ è‡¨åºŠé‡è¦æ€§</strong><br/>
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    â€¢ å¿ƒè¡€ç®¡é¢¨éšªèˆ‡æŒçºŒæ€§é«˜è¡€å£“ç›¸ç•¶<br/>
                    â€¢ å®¹æ˜“è¢«æ¼è¨º<br/>
                    â€¢ éœ€è¦ç©æ¥µæ²»ç™‚<br/>
                    â€¢ å»ºè­°é€²è¡ŒABPMç¢ºèª
                    </span>
                </div>
            </div>
        </div>
    );

    // Lesson 5: è‡¨åºŠæ±ºç­–æµç¨‹
    const L5 = () => (
        <div>
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--blue)',marginBottom:12}}>ğŸ“‹ è¨ºæ–·æµç¨‹å»ºè­°</h3>
                <div style={{position:'relative',padding:'20px 0'}}>
                    {[
                        {step:1, title:'åˆæ¬¡è¨ºé–“æ¸¬é‡', desc:'ç™¼ç¾è¡€å£“å‡é«˜ (â‰¥140/90)', color:'var(--pri)'},
                        {step:2, title:'é‡è¤‡è¨ºé–“æ¸¬é‡', desc:'åŒæ¬¡æˆ–ä¸åŒæ¬¡å°±è¨ºç¢ºèª', color:'var(--pri2)'},
                        {step:3, title:'å±…å®¶è¡€å£“ç›£æ¸¬', desc:'æ•¸å¤©å…§æ¸¬é‡å¹³å‡å€¼', color:'var(--acc)'},
                        {step:4, title:'è©•ä¼°ä¸€è‡´æ€§', desc:'æ¯”è¼ƒè¨ºé–“èˆ‡å±…å®¶çµæœ', color:'var(--pur)'},
                        {step:5, title:'å¿…è¦æ™‚ABPM', desc:'çµæœä¸ä¸€è‡´æˆ–æ¥è¿‘é–¾å€¼', color:'var(--blue)'}
                    ].map((item,i)=>(
                        <div key={i} style={{display:'flex',gap:12,marginBottom:16}}>
                            <div style={{width:36,height:36,borderRadius:'50%',background:item.color,color:'#fff',display:'flex',alignItems:'center',justifyContent:'center',fontWeight:700,flexShrink:0}}>{item.step}</div>
                            <div>
                                <div style={{fontWeight:600,marginBottom:2}}>{item.title}</div>
                                <div style={{fontSize:13,color:'var(--txt2)'}}>{item.desc}</div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
            
            <div className="card">
                <h3 style={{fontSize:18,fontWeight:700,color:'var(--pri)',marginBottom:12}}>ğŸ¯ ä½•æ™‚éœ€è¦ ABPMï¼Ÿ</h3>
                <div className="info">
                    <span style={{fontSize:14,color:'var(--txt2)'}}>
                    <strong>ä»¥ä¸‹æƒ…æ³å»ºè­°é€²è¡Œ24å°æ™‚å‹•æ…‹è¡€å£“ç›£æ¸¬ï¼š</strong><br/><br/>
                    âœ“ è¨ºé–“è¡€å£“èˆ‡å±…å®¶è¡€å£“ä¸ä¸€è‡´<br/>
                    âœ“ è¡€å£“å€¼æ¥è¿‘è¨ºæ–·é–¾å€¼<br/>
                    âœ“ æ‡·ç–‘ç™½è¢é«˜è¡€å£“<br/>
                    âœ“ æ‡·ç–‘éš±åŒ¿æ€§é«˜è¡€å£“<br/>
                    âœ“ è©•ä¼°æ²»ç™‚æŠµæŠ—æ€§é«˜è¡€å£“<br/>
                    âœ“ æ‡·ç–‘å¤œé–“é«˜è¡€å£“
                    </span>
                </div>
            </div>
            
            <div className="key-point">
                <h3 style={{fontSize:16,fontWeight:700,marginBottom:12}}>ğŸ“Œ JAMA ç ”ç©¶çµè«–æ‘˜è¦</h3>
                <div style={{fontSize:14,lineHeight:1.8}}>
                    <p><strong>1. è¨ºé–“è¡€å£“çš„é™åˆ¶</strong></p>
                    <p style={{marginBottom:12}}>å–®ç¨ä½¿ç”¨è¨ºé–“è¡€å£“å¯èƒ½ç„¡æ³•æº–ç¢ºç¢ºè¨ºæˆ–æ’é™¤é«˜è¡€å£“</p>
                    
                    <p><strong>2. å±…å®¶è¡€å£“çš„åƒ¹å€¼</strong></p>
                    <p style={{marginBottom:12}}>HBPMæœ‰åŠ©æ–¼ç¢ºèªè¨ºæ–·ï¼Œä¸”LR-å„ªæ–¼è¨ºé–“æ¸¬é‡</p>
                    
                    <p><strong>3. ABPMçš„è§’è‰²</strong></p>
                    <p>ç•¶è¨ºé–“èˆ‡å±…å®¶çµæœä¸ä¸€è‡´æˆ–æ¥è¿‘é–¾å€¼æ™‚ï¼Œæ‡‰è€ƒæ…®ABPMç¢ºç«‹è¨ºæ–·</p>
                </div>
            </div>
            
            <div className="good">
                <strong style={{color:'var(--suc)'}}>ğŸ’¡ è‡¨åºŠå¯¦å‹™å»ºè­°</strong><br/>
                <span style={{fontSize:14,color:'var(--txt2)'}}>
                è¨ºæ–·é«˜è¡€å£“ä¸æ‡‰åªä¾è³´å–®æ¬¡è¨ºé–“æ¸¬é‡ï¼Œæ‡‰çµåˆå¤šç¨®æ¸¬é‡æ–¹æ³•ï¼Œç‰¹åˆ¥æ˜¯è¨ºé–“å¤–è¡€å£“æ¸¬é‡ï¼Œä»¥åšå‡ºæ›´æº–ç¢ºçš„è¨ºæ–·æ±ºç­–ã€‚
                </span>
            </div>
        </div>
    );

    const Lesson = () => {
        const l = lessons.find(x=>x.id===lessonId);
        return(
            <div>
                <Header title={l.title}/>
                <div style={{background:`linear-gradient(135deg,${l.color},${l.color}88)`,padding:'20px',color:'#fff'}}>
                    <div style={{maxWidth:480,margin:'0 auto'}}>
                        <div style={{fontSize:12,opacity:0.9}}>Lesson {l.id} â€¢ {l.sub}</div>
                        <h1 style={{fontSize:24,fontWeight:700}}>{l.title}</h1>
                    </div>
                </div>
                <div style={{padding:'20px 16px'}}>
                    <div style={{maxWidth:480,margin:'0 auto'}}>
                        {lessonId===1 && <L1/>}
                        {lessonId===2 && <L2/>}
                        {lessonId===3 && <L3/>}
                        {lessonId===4 && <L4/>}
                        {lessonId===5 && <L5/>}
                        <div style={{display:'flex',gap:12,marginTop:24}}>
                            {lessonId>1 && (
                                <button className="btn" style={{flex:1,background:'#fff',border:'2px solid var(--pri)',color:'var(--pri)'}} onClick={()=>setLessonId(lessonId-1)}>
                                    â† ä¸Šä¸€èª²
                                </button>
                            )}
                            {lessonId<5 ? (
                                <button className="btn btn-pri" style={{flex:1}} onClick={()=>setLessonId(lessonId+1)}>
                                    ä¸‹ä¸€èª² â†’
                                </button>
                            ) : (
                                <button className="btn btn-acc" style={{flex:1}} onClick={()=>{setQIdx(0);setScore(0);setSel(null);setShow(false);setDone(false);setPage('quiz')}}>
                                    é–‹å§‹æ¸¬é©— ğŸ“
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    const Quiz = () => {
        const pick = (i) => {
            if(show) return;
            setSel(i);
            setShow(true);
            if(i===quiz[qIdx].c) setScore(score+1);
        };
        
        const next = () => {
            if(qIdx < quiz.length-1) {
                setQIdx(qIdx+1);
                setSel(null);
                setShow(false);
            } else {
                setDone(true);
            }
        };

        if(done) {
            const pct = Math.round((score/quiz.length)*100);
            return(
                <div>
                    <Header title="æ¸¬é©—çµæœ"/>
                    <div style={{padding:'40px 16px',textAlign:'center'}}>
                        <div style={{width:140,height:140,borderRadius:'50%',background:`conic-gradient(${pct>=80?'var(--suc)':pct>=60?'var(--warn)':'var(--err)'} ${pct*3.6}deg,#E5E5E5 0deg)`,display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 24px'}}>
                            <div style={{width:120,height:120,borderRadius:'50%',background:'#fff',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'}}>
                                <div style={{fontSize:36,fontWeight:700}}>{pct}%</div>
                                <div style={{fontSize:14,color:'var(--txt2)'}}>{score}/{quiz.length}</div>
                            </div>
                        </div>
                        <h2 style={{fontSize:24,fontWeight:700,marginBottom:8}}>
                            {pct>=80?'ğŸ‰ å¤ªæ£’äº†ï¼':pct>=60?'ğŸ‘ ä¸éŒ¯ï¼':'ğŸ’ª åŠ æ²¹ï¼'}
                        </h2>
                        <p style={{color:'var(--txt2)',marginBottom:32}}>
                            {pct>=80?'ä½ å°é«˜è¡€å£“è¨ºæ–·æœ‰å¾ˆå¥½çš„ç†è§£ï¼':pct>=60?'å†è¤‡ç¿’å¯ä»¥æ›´é€²æ­¥ï¼':'å»ºè­°é‡æ–°é–±è®€èª²ç¨‹å…§å®¹'}
                        </p>
                        <div style={{display:'flex',gap:12,justifyContent:'center',flexWrap:'wrap'}}>
                            <button className="btn btn-pri" onClick={()=>{setQIdx(0);setScore(0);setSel(null);setShow(false);setDone(false)}}>é‡æ–°æ¸¬é©—</button>
                            <button className="btn" style={{background:'#fff',border:'2px solid var(--pri)',color:'var(--pri)'}} onClick={()=>setPage('home')}>è¿”å›èª²ç¨‹</button>
                        </div>
                    </div>
                    <footer style={{background:'#FFF0F0',padding:'24px 16px',textAlign:'center',marginTop:40}}>
                        <p style={{fontSize:12,color:'var(--txt2)'}}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨ | è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
                    </footer>
                </div>
            );
        }

        const q = quiz[qIdx];
        return(
            <div>
                <Header title="è‡ªæˆ‘æ¸¬é©—"/>
                <div style={{padding:'20px 16px'}}>
                    <div style={{maxWidth:480,margin:'0 auto'}}>
                        <div style={{display:'flex',justifyContent:'space-between',marginBottom:8,fontSize:14}}>
                            <span style={{color:'var(--txt2)'}}>é€²åº¦</span>
                            <span style={{fontWeight:600,color:'var(--pri)'}}>{qIdx+1}/{quiz.length}</span>
                        </div>
                        <div className="progress-bar">
                            <div className="progress-fill" style={{width:`${((qIdx+1)/quiz.length)*100}%`,background:'linear-gradient(90deg,var(--pri),var(--pri2))'}}/>
                        </div>
                        <div className="card">
                            <h3 style={{fontSize:16,fontWeight:600,lineHeight:1.6,marginBottom:20}}>{q.q}</h3>
                            {q.o.map((opt,i)=>{
                                let bg='#fff', bd='#E5E5E5';
                                if(show){
                                    if(i===q.c){bg='#F0FFF8';bd='var(--suc)'}
                                    else if(i===sel){bg='#FFF5F5';bd='var(--err)'}
                                }else if(i===sel){bg='#FFF0F0';bd='var(--pri)'}
                                return(
                                    <button key={i} onClick={()=>pick(i)} disabled={show} style={{width:'100%',padding:'12px 14px',marginBottom:10,background:bg,border:`2px solid ${bd}`,borderRadius:12,textAlign:'left',fontSize:14,cursor:show?'default':'pointer',display:'flex',alignItems:'center',gap:12}}>
                                        <span style={{width:26,height:26,borderRadius:8,background:show&&i===q.c?'var(--suc)':show&&i===sel?'var(--err)':'#FFF0F0',color:show&&(i===q.c||i===sel)?'#fff':'var(--pri)',display:'flex',alignItems:'center',justifyContent:'center',fontWeight:700,fontSize:13,flexShrink:0}}>
                                            {show&&i===q.c?'âœ“':show&&i===sel&&i!==q.c?'âœ—':String.fromCharCode(65+i)}
                                        </span>
                                        <span style={{lineHeight:1.5}}>{opt}</span>
                                    </button>
                                );
                            })}
                        </div>
                        {show && (
                            <div className={sel===q.c?'good':'tip'}>
                                <strong style={{color:sel===q.c?'var(--suc)':'var(--pri2)'}}>{sel===q.c?'âœ“ æ­£ç¢ºï¼':'âœ— ç­”éŒ¯äº†'}</strong>
                                <p style={{fontSize:14,color:'var(--txt2)',marginTop:8,lineHeight:1.7}}>{q.e}</p>
                            </div>
                        )}
                        {show && (
                            <button className="btn btn-pri" style={{width:'100%',justifyContent:'center',marginTop:16}} onClick={next}>
                                {qIdx<quiz.length-1?'ä¸‹ä¸€é¡Œ â†’':'æŸ¥çœ‹çµæœ'}
                            </button>
                        )}
                    </div>
                </div>
            </div>
        );
    };

    const closeBadge = (id) => setNewBadges(prev => prev.filter(b => b !== id));

    return (
        <div style={{maxWidth:'100%',minHeight:'100vh',background:'var(--bg)'}}>
            <BadgeToast badges={newBadges} onClose={closeBadge} />
            {page==='home' ? <Home/> : page==='lesson' ? <Lesson/> : <Quiz/>}
        </div>
    );
};

ReactDOM.render(<App/>, document.getElementById('root'));
</script>
</body>
</html>
