<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è¼•å¾®é ­éƒ¨å‰µå‚·çš„é¡±å…§æå‚·è©•ä¼° | JAMA Rational Clinical Examination</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --pri: #1E88E5;
            --pri2: #42A5F5;
            --sec: #00897B;
            --sec2: #26A69A;
            --suc: #43A047;
            --warn: #FFA726;
            --danger: #E53935;
            --info: #5E35B1;
            --bg: #F5F7FA;
            --txt: #1A237E;
            --txt2: #546E7A;
            --card-shadow: 0 4px 20px rgba(30, 136, 229, 0.08);
        }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--bg);
            color: var(--txt);
            line-height: 1.8;
            -webkit-font-smoothing: antialiased;
        }
        .card {
            background: #fff;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(30, 136, 229, 0.08);
        }
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 14px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        .btn-pri { background: linear-gradient(135deg, var(--pri), var(--pri2)); color: #fff; }
        .btn-pri:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(30, 136, 229, 0.3); }
        .btn-sec { background: linear-gradient(135deg, var(--sec), var(--sec2)); color: #fff; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; margin: 12px 0; }
        th, td { padding: 12px 10px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); font-weight: 600; color: var(--pri); }
        .formula {
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            border: 2px solid var(--pri2);
            border-radius: 16px;
            padding: 18px;
            margin: 14px 0;
            text-align: center;
            font-family: 'Crimson Pro', serif;
            font-size: 18px;
            color: var(--txt);
            font-weight: 600;
        }
        .tip {
            background: linear-gradient(135deg, #FFF8E1, #FFECB3);
            border-left: 4px solid var(--warn);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .good {
            background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
            border-left: 4px solid var(--suc);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .danger {
            background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
            border-left: 4px solid var(--danger);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        .info {
            background: linear-gradient(135deg, #EDE7F6, #D1C4E9);
            border-left: 4px solid var(--info);
            border-radius: 0 14px 14px 0;
            padding: 16px;
            margin: 14px 0;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .pulse { animation: pulse 2s infinite; }
        .lr-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 6px;
        }
        .lr-high { background: #FFCDD2; color: #C62828; }
        .lr-mod { background: #FFF9C4; color: #F57F17; }
        .lr-low { background: #C8E6C9; color: #2E7D32; }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

const MODULE_ID='jama-head-trauma';

const ProgressTracker={
    STORAGE_KEY:'ebm-progress',
    getProgress:()=>{try{const d=localStorage.getItem(ProgressTracker.STORAGE_KEY);return d?JSON.parse(d):{version:1,modules:{},badges:[],totalTimeSpent:0}}catch{return{version:1,modules:{},badges:[],totalTimeSpent:0}}},
    saveQuizResult:(moduleId,score,total,timeSpent)=>{
        const progress=ProgressTracker.getProgress();
        const mod=progress.modules[moduleId]||{bestScore:0,totalAttempts:0,allAttempts:[],lessonsViewed:[],completed:false,firstCompleted:null};
        const attempt={date:new Date().toISOString(),score,timeSpent};
        mod.allAttempts.push(attempt);mod.totalAttempts++;
        if(score>mod.bestScore)mod.bestScore=score;
        const passingScore=Math.ceil(total*0.7);
        if(score>=passingScore&&!mod.completed){mod.completed=true;mod.firstCompleted=attempt.date}
        progress.modules[moduleId]=mod;progress.totalTimeSpent+=timeSpent;progress.lastUpdated=new Date().toISOString();
        ProgressTracker.checkBadges(progress,score,total,timeSpent);
        localStorage.setItem(ProgressTracker.STORAGE_KEY,JSON.stringify(progress));return progress;
    },
    checkBadges:(progress,score,total,timeSpent)=>{
        const badges=progress.badges||[];const ids=badges.map(b=>b.id);const now=new Date().toISOString();
        if(!ids.includes('first-quiz'))badges.push({id:'first-quiz',earnedAt:now});
        if(score===total&&!ids.includes('perfect-score'))badges.push({id:'perfect-score',earnedAt:now});
        if(timeSpent<120&&!ids.includes('speed-demon'))badges.push({id:'speed-demon',earnedAt:now});
        const completed=Object.values(progress.modules).filter(m=>m.completed).length;
        if(completed>=5&&!ids.includes('five-complete'))badges.push({id:'five-complete',earnedAt:now});
        if(completed>=10&&!ids.includes('ten-complete'))badges.push({id:'ten-complete',earnedAt:now});
        if(completed>=18&&!ids.includes('master'))badges.push({id:'master',earnedAt:now});
        const mod=progress.modules[MODULE_ID];
        if(mod&&mod.totalAttempts>=3&&!ids.includes('persistent'))badges.push({id:'persistent',earnedAt:now});
        progress.badges=badges;
    }
};

const lessons = [
    { id: 1, title: 'é ­éƒ¨å‰µå‚·æ¦‚è«–èˆ‡åˆ†ç´š', sub: 'Head Trauma Classification', color: '#1E88E5' },
    { id: 2, title: 'è‡¨åºŠç—…å²è©•ä¼°', sub: 'Clinical History Features', color: '#00897B' },
    { id: 3, title: 'ç†å­¸æª¢æŸ¥ç™¼ç¾', sub: 'Physical Examination Signs', color: '#5E35B1' },
    { id: 4, title: 'è‡¨åºŠæ±ºç­–è¦å‰‡', sub: 'Clinical Decision Rules', color: '#E53935' },
    { id: 5, title: 'è‡¨åºŠæ‡‰ç”¨æ•´åˆ', sub: 'Clinical Application', color: '#F57C00' }
];

const quiz = [
    {
        q: 'æ ¹æ“šJAMAç³»çµ±æ€§å›é¡§ï¼Œè¼•å¾®é ­éƒ¨å‰µå‚·æ‚£è€…ä¸­åš´é‡é¡±å…§æå‚·çš„ç››è¡Œç‡ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o: ['1-2%', '7.1%', '15-20%', '30%'],
        c: 1,
        e: 'åœ¨23,079åè¼•å¾®é ­éƒ¨å‰µå‚·æ‚£è€…ä¸­ï¼Œåš´é‡é¡±å…§æå‚·çš„ç››è¡Œç‡ç‚º7.1% (95% CI, 6.8%-7.4%)ã€‚éœ€è¦ç¥ç¶“å¤–ç§‘æ‰‹è¡“æˆ–å°è‡´æ­»äº¡çš„æå‚·ç´„0.9%ã€‚'
    },
    {
        q: 'ä¸‹åˆ—å“ªå€‹ç†å­¸æª¢æŸ¥ç™¼ç¾å°æ–¼é æ¸¬åš´é‡é¡±å…§æå‚·å…·æœ‰æœ€é«˜çš„é™½æ€§ä¼¼ç„¶æ¯”(LR+)ï¼Ÿ',
        o: ['é ­ç—›', 'æ„è­˜å–ªå¤±', 'ç–‘ä¼¼é¡±éª¨éª¨æŠ˜å¾µè±¡', 'å˜”åä¸€æ¬¡'],
        c: 2,
        e: 'ç–‘ä¼¼é¡±éª¨éª¨æŠ˜å¾µè±¡ (åŒ…æ‹¬Battle signã€æµ£ç†Šçœ¼ã€è…¦è„Šé«“æ¶²æ¼) çš„LR+ = 16 (95% CI, 3.1-59)ï¼Œæ˜¯æœ€å¼·çš„é æ¸¬æŒ‡æ¨™ã€‚'
    },
    {
        q: 'GCSåˆ†æ•¸ç‚º13åˆ†æ™‚ï¼Œå°æ–¼åš´é‡é¡±å…§æå‚·çš„è¨ºæ–·æ„ç¾©ç‚ºä½•ï¼Ÿ',
        o: ['å¯æ’é™¤åš´é‡æå‚·', 'LR+ = 4.9ï¼Œé¡¯è‘—å¢åŠ æå‚·å¯èƒ½æ€§', 'èˆ‡GCS 15åˆ†é¢¨éšªç›¸åŒ', 'éœ€è¦ç«‹å³æ‰‹è¡“'],
        c: 1,
        e: 'GCSåˆ†æ•¸13åˆ†çš„LR+ = 4.9 (95% CI, 2.8-8.5)ï¼Œä»¥7.1%çš„åŸºç·šç››è¡Œç‡è¨ˆç®—ï¼Œé¡±å…§æå‚·çš„æ©Ÿç‡æå‡è‡³18%-39%ã€‚'
    },
    {
        q: 'é—œæ–¼Canadian CT Head Ruleï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['åŒ…å«é ­ç—›ä½œç‚ºé¢¨éšªå› å­', 'é™°æ€§çµæœçš„LR- = 0.04', 'é©ç”¨æ–¼GCS < 13çš„æ‚£è€…', 'ä¸è€ƒæ…®å¹´é½¡å› ç´ '],
        c: 1,
        e: 'Canadian CT Head Ruleé™°æ€§çµæœçš„LR- = 0.04 (95% CI, 0-0.65)ï¼Œå¯å°‡åš´é‡é¡±å…§æå‚·æ©Ÿç‡é™è‡³0.31%ã€‚è¦å‰‡åŒ…å«å¹´é½¡â‰¥65æ­²ä½œç‚ºé¢¨éšªå› å­ã€‚'
    },
    {
        q: 'ä¸‹åˆ—å“ªå€‹ç—‡ç‹€å°æ–¼é æ¸¬åš´é‡é¡±å…§æå‚·æœ€æœ‰åƒ¹å€¼ï¼Ÿ',
        o: ['å–®æ¬¡å˜”å', 'é ­ç—›', 'å˜”åâ‰¥2æ¬¡', 'é ­æšˆ'],
        c: 2,
        e: 'å˜”åâ‰¥2æ¬¡çš„LR+ = 3.6 (95% CI, 3.1-4.1)ï¼Œè€Œå–®æ¬¡å˜”åçš„LR+åƒ…2.3ã€‚é‡è¤‡å˜”åæ˜¯æ›´å¯é çš„è­¦ç¤ºå¾µè±¡ã€‚'
    },
    {
        q: 'é—œæ–¼æ„è­˜å–ªå¤±å°é¡±å…§æå‚·çš„é æ¸¬åƒ¹å€¼ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ',
        o: ['ç„¡æ„è­˜å–ªå¤±å¯å®Œå…¨æ’é™¤æå‚·', 'LR+ = 1.6ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™', 'æ„è­˜å–ªå¤±æ˜¯æœ€é‡è¦çš„é æ¸¬å› å­', 'åªæœ‰æ„è­˜å–ªå¤±>30åˆ†é˜æ‰æœ‰æ„ç¾©'],
        c: 1,
        e: 'æ„è­˜å–ªå¤±çš„LR+ = 1.6 (95% CI, 1.1-2.1)ï¼Œç„¡æ„è­˜å–ªå¤±çš„LR- = 0.60ï¼Œå–®ç¨æ­¤ç—‡ç‹€ä¸è¶³ä»¥æ’é™¤æˆ–ç¢ºèªé¡±å…§æå‚·ã€‚'
    },
    {
        q: 'New Orleans CriteriaåŒ…å«ä¸‹åˆ—å“ªäº›é …ç›®ï¼Ÿ',
        o: ['å¹´é½¡â‰¥65æ­²ã€å±éšªæ©Ÿè½‰ã€é ­ç—›', 'å¹´é½¡>60æ­²ã€é†‰é…’ã€é ­ç—›ã€å˜”åã€ç™²ç™‡ã€å¤±æ†¶ã€é–éª¨ä»¥ä¸Šå‰µå‚·', 'GCS < 15æ–¼2å°æ™‚ã€ç–‘ä¼¼é¡±éª¨éª¨æŠ˜', 'å¹´é½¡ã€æ€§åˆ¥ã€è¡€å£“'],
        c: 1,
        e: 'New Orleans CriteriaåŒ…å«ï¼šå¹´é½¡>60æ­²ã€é†‰é…’ã€é ­ç—›ã€ä»»ä½•å˜”åã€ç™²ç™‡ã€å¤±æ†¶ã€é–éª¨ä»¥ä¸Šå¯è¦‹å‰µå‚·ã€‚é™°æ€§çµæœLR- = 0.08ã€‚'
    },
    {
        q: 'è¡Œäººè¢«è»Šè¼›æ’æ“Šå¾Œçš„é¡±å…§æå‚·é¢¨éšªç‚ºä½•ï¼Ÿ',
        o: ['èˆ‡å…¶ä»–æ©Ÿè½‰ç›¸åŒ', 'LR+ = 3.0-4.3ï¼Œé¡¯è‘—å¢åŠ é¢¨éšª', 'åƒ…éœ€è§€å¯Ÿç„¡éœ€CT', 'LR- < 0.1ï¼Œå¯æ’é™¤æå‚·'],
        c: 1,
        e: 'è¡Œäººè¢«è»Šè¼›æ’æ“Šçš„LR+ = 3.0-4.3ï¼Œä»¥7.1%åŸºç·šç››è¡Œç‡è¨ˆç®—ï¼Œé¡±å…§æå‚·é æ¸¬å€¼ç‚º19%-25%ï¼Œæ˜¯é‡è¦çš„å±éšªæ©Ÿè½‰ã€‚'
    },
    {
        q: 'ä¸‹åˆ—ä½•è€…æ˜¯é¡±åº•éª¨æŠ˜çš„å…¸å‹è‡¨åºŠå¾µè±¡ï¼Ÿ',
        o: ['å‰é¡è¡€è…«', 'Battle sign (ä¹³çªå€ç˜€æ–‘)ã€æµ£ç†Šçœ¼ã€è…¦è„Šé«“æ¶²è€³æ¼', 'ç³å­”å°å…‰åå°„æ­£å¸¸', 'é ¸éƒ¨åƒµç¡¬'],
        c: 1,
        e: 'é¡±åº•éª¨æŠ˜å¾µè±¡åŒ…æ‹¬ï¼šBattle sign (è€³å¾Œç˜€æ–‘)ã€æµ£ç†Šçœ¼ (çœ¶å‘¨ç˜€æ–‘)ã€è…¦è„Šé«“æ¶²è€³æ¼/é¼»æ¼ã€é¼“è†œç©è¡€ã€‚LR+ = 6.0ã€‚'
    },
    {
        q: 'ç•¶æ‚£è€…å®Œå…¨ä¸ç¬¦åˆCanadian CT Head Ruleä»»ä½•æ¢ä»¶æ™‚ï¼Œåš´é‡é¡±å…§æå‚·çš„æ©Ÿç‡ç´„ç‚ºå¤šå°‘ï¼Ÿ',
        o: ['5%', '2-3%', '0.31%', 'èˆ‡åŸºç·šç›¸åŒ(7.1%)'],
        c: 2,
        e: 'ç•¶Canadian CT Head Ruleå®Œå…¨é™°æ€§æ™‚ï¼ŒLR- = 0.04ï¼Œå°‡7.1%çš„åŸºç·šç››è¡Œç‡é™ä½è‡³0.31% (95% CI, 0%-4.7%)ï¼Œå¯å®‰å…¨å‡ºé™¢ã€‚'
    }
];

const App = () => {
    const [page, setPage] = useState('home');
    const [lessonId, setLessonId] = useState(1);
    const [qIdx, setQIdx] = useState(0);
    const [score, setScore] = useState(0);
    const [sel, setSel] = useState(null);
    const [show, setShow] = useState(false);
    const [done, setDone] = useState(false);
    const [quizStartTime, setQuizStartTime] = useState(null);

    useEffect(() => { if (page === 'quiz' && !done && !quizStartTime) setQuizStartTime(Date.now()) }, [page, done]);
    useEffect(() => { if (done && quizStartTime) { const t = Math.round((Date.now() - quizStartTime) / 1000); ProgressTracker.saveQuizResult(MODULE_ID, score, quiz.length, t) } }, [done]);

    const Header = ({ title }) => (
        <header style={{ 
            background: '#fff', 
            borderBottom: '1px solid rgba(30, 136, 229, 0.1)', 
            padding: '14px 16px', 
            position: 'sticky', 
            top: 0, 
            zIndex: 10,
            backdropFilter: 'blur(10px)'
        }}>
            <div style={{ maxWidth: 480, margin: '0 auto', display: 'flex', alignItems: 'center', gap: 12 }}>
                <button 
                    onClick={() => page === 'home' ? window.location.href = 'jama-rational-exam.html' : setPage('home')} 
                    style={{ 
                        background: 'linear-gradient(135deg, #E3F2FD, #BBDEFB)', 
                        border: 'none', 
                        borderRadius: 12, 
                        width: 42, 
                        height: 42, 
                        cursor: 'pointer', 
                        color: 'var(--pri)', 
                        display: 'flex', 
                        alignItems: 'center', 
                        justifyContent: 'center',
                        boxShadow: '0 2px 8px rgba(30, 136, 229, 0.1)'
                    }}
                >
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <span style={{ fontWeight: 700, color: 'var(--txt)', fontSize: 16 }}>{title}</span>
            </div>
        </header>
    );

    const Home = () => (
        <div className="fade-in">
            <Header title="è¼•å¾®é ­éƒ¨å‰µå‚·è©•ä¼°" />
            <div style={{ 
                background: 'linear-gradient(135deg, #1E88E5 0%, #42A5F5 50%, #00897B 100%)', 
                padding: '36px 20px 44px', 
                color: '#fff',
                position: 'relative',
                overflow: 'hidden'
            }}>
                <div style={{
                    position: 'absolute',
                    top: -30,
                    right: -30,
                    width: 150,
                    height: 150,
                    borderRadius: '50%',
                    background: 'rgba(255,255,255,0.1)'
                }} />
                <div style={{ maxWidth: 480, margin: '0 auto', position: 'relative', zIndex: 1 }}>
                    <div style={{ 
                        background: 'rgba(255,255,255,0.2)', 
                        display: 'inline-block', 
                        padding: '8px 16px', 
                        borderRadius: 50, 
                        fontSize: 12, 
                        fontWeight: 600, 
                        marginBottom: 16,
                        backdropFilter: 'blur(10px)'
                    }}>
                        ğŸ§  JAMA Rational Clinical Examination
                    </div>
                    <h1 style={{ fontSize: 24, fontWeight: 700, marginBottom: 12, lineHeight: 1.3 }}>
                        Minor Head Trauma & Intracranial Injury
                    </h1>
                    <p style={{ opacity: 0.95, fontSize: 14, lineHeight: 1.7 }}>
                        è¼•å¾®é ­éƒ¨å‰µå‚·çš„åš´é‡é¡±å…§æå‚·è©•ä¼° - ç¥ç¶“å½±åƒå­¸æ±ºç­–
                    </p>
                    <p style={{ opacity: 0.8, fontSize: 12, marginTop: 8 }}>
                        Easter JS, et al. JAMA. 2015;314(24):2672-2681
                    </p>
                    <a 
                        href="https://jamanetwork.com/journals/jama/fullarticle/2478532" 
                        target="_blank" 
                        rel="noopener noreferrer"
                        style={{
                            display:'inline-flex',
                            alignItems:'center',
                            gap:6,
                            background:'rgba(255,255,255,0.25)',
                            color:'#fff',
                            padding:'8px 16px',
                            borderRadius:25,
                            fontSize:13,
                            fontWeight:600,
                            textDecoration:'none',
                            backdropFilter:'blur(10px)',
                            marginTop: 12,
                            transition:'all 0.3s'
                        }}
                    >
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
                        é–±è®€åŸæ–‡ Read Full Article
                    </a>
                </div>
            </div>
            
            <div style={{ padding: '0 16px', marginTop: -24 }}>
                <div style={{ maxWidth: 480, margin: '0 auto' }}>
                    <div className="card">
                        <h3 style={{ fontSize: 17, fontWeight: 700, color: 'var(--pri)', marginBottom: 14, display: 'flex', alignItems: 'center', gap: 8 }}>
                            <span style={{ fontSize: 22 }}>ğŸ¯</span> å­¸ç¿’ç›®æ¨™
                        </h3>
                        {[
                            'äº†è§£è¼•å¾®é ­éƒ¨å‰µå‚·çš„å®šç¾©èˆ‡æµè¡Œç—…å­¸',
                            'è­˜åˆ¥é æ¸¬åš´é‡é¡±å…§æå‚·çš„è‡¨åºŠç‰¹å¾µ',
                            'ç†Ÿæ‚‰Canadian CT Head Ruleèˆ‡New Orleans Criteria',
                            'æŒæ¡ä½é¢¨éšªæ‚£è€…çš„å®‰å…¨å‡ºé™¢æ¨™æº–'
                        ].map((t, i) => (
                            <div key={i} style={{ display: 'flex', gap: 12, marginBottom: 10, fontSize: 14 }}>
                                <span style={{ 
                                    background: 'linear-gradient(135deg, var(--suc), #66BB6A)', 
                                    color: '#fff', 
                                    borderRadius: 8, 
                                    width: 26, 
                                    height: 26, 
                                    display: 'flex', 
                                    alignItems: 'center', 
                                    justifyContent: 'center', 
                                    fontSize: 13, 
                                    flexShrink: 0,
                                    fontWeight: 600
                                }}>{i + 1}</span>
                                <span style={{ color: 'var(--txt2)', lineHeight: 1.6 }}>{t}</span>
                            </div>
                        ))}
                    </div>

                    <div className="danger" style={{ marginBottom: 20 }}>
                        <strong style={{ color: 'var(--danger)', display: 'flex', alignItems: 'center', gap: 6 }}>
                            âš ï¸ è‡¨åºŠé‡è¦æ€§
                        </strong>
                        <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 8, lineHeight: 1.7 }}>
                            æ¯å¹´ç´„250è¬ç¾åœ‹äººå› é ­éƒ¨å‰µå‚·å°±é†«ã€‚è¼•å¾®é ­éƒ¨å‰µå‚·(GCS 13-15)ä½”æ‰€æœ‰é ­éƒ¨å‰µå‚·çš„89%ï¼Œä½†ä»æœ‰5-15%æ‚£è€…å­˜åœ¨é¡±å…§æå‚·ï¼Œç´„0.9%éœ€ç¥ç¶“å¤–ç§‘ä»‹å…¥æˆ–å°è‡´æ­»äº¡ã€‚
                        </p>
                    </div>

                    <h3 style={{ fontSize: 18, fontWeight: 700, marginBottom: 16, color: 'var(--txt)' }}>ğŸ“š èª²ç¨‹å…§å®¹</h3>
                    {lessons.map(l => (
                        <div 
                            key={l.id} 
                            className="card" 
                            onClick={() => { setLessonId(l.id); setPage('lesson'); }} 
                            style={{ cursor: 'pointer', transition: 'all 0.3s ease' }}
                        >
                            <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>
                                <div style={{ 
                                    width: 52, 
                                    height: 52, 
                                    borderRadius: 14, 
                                    background: `linear-gradient(135deg, ${l.color}, ${l.color}99)`, 
                                    display: 'flex', 
                                    alignItems: 'center', 
                                    justifyContent: 'center', 
                                    color: '#fff', 
                                    fontWeight: 700,
                                    fontSize: 18,
                                    boxShadow: `0 4px 12px ${l.color}33`
                                }}>{l.id}</div>
                                <div style={{ flex: 1 }}>
                                    <div style={{ fontSize: 11, color: l.color, fontWeight: 600, marginBottom: 2 }}>Lesson {l.id}</div>
                                    <div style={{ fontSize: 16, fontWeight: 700, color: 'var(--txt)' }}>{l.title}</div>
                                    <div style={{ fontSize: 13, color: 'var(--txt2)' }}>{l.sub}</div>
                                </div>
                                <svg viewBox="0 0 24 24" fill={l.color} width="22" height="22">
                                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/>
                                </svg>
                            </div>
                        </div>
                    ))}
                    
                    <button 
                        className="btn btn-pri" 
                        onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); setPage('quiz'); }} 
                        style={{ width: '100%', justifyContent: 'center', marginTop: 24, marginBottom: 16, padding: '16px 24px' }}
                    >
                        ğŸ“ é–‹å§‹æ¸¬é©— (10é¡Œ)
                    </button>

                    <a 
                        href="https://jamanetwork.com/journals/jama/fullarticle/2478532"
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            gap: 8,
                            padding: '14px 20px',
                            background: 'linear-gradient(135deg, #F8F9FA, #E9ECEF)',
                            borderRadius: 14,
                            textDecoration: 'none',
                            color: 'var(--sec)',
                            fontSize: 14,
                            fontWeight: 600,
                            marginBottom: 32,
                            border: '1px solid rgba(0, 137, 123, 0.2)'
                        }}
                    >
                        ğŸ“„ é–±è®€åŸæ–‡ (JAMA 2015)
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                            <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            <footer style={{ background: 'linear-gradient(135deg, #E3F2FD, #BBDEFB)', padding: '28px 16px', textAlign: 'center' }}>
                <p style={{ fontSize: 13, color: 'var(--txt2)', fontWeight: 600 }}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨</p>
                <p style={{ fontSize: 12, color: 'var(--txt2)', marginTop: 4 }}>è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
            </footer>
        </div>
    );

    // Lesson 1: é ­éƒ¨å‰µå‚·æ¦‚è«–èˆ‡åˆ†ç´š
    const L1 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ§  é ­éƒ¨å‰µå‚·çš„å®šç¾©èˆ‡åˆ†é¡</h3>
                <div className="formula">
                    Glasgow Coma Scale (GCS) è©•åˆ†æ˜¯é ­éƒ¨å‰µå‚·åˆ†é¡çš„åŸºç¤
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>åš´é‡åº¦</th>
                            <th>GCSåˆ†æ•¸</th>
                            <th>è™•ç½®å»ºè­°</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--danger)' }}>é‡åº¦</td>
                            <td>â‰¤ 8</td>
                            <td>ç«‹å³CT + ç¥ç¶“å¤–ç§‘æœƒè¨º</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--warn)' }}>ä¸­åº¦</td>
                            <td>9-12</td>
                            <td>ç·Šæ€¥CTæª¢æŸ¥</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--suc)' }}>è¼•åº¦</td>
                            <td>13-15</td>
                            <td>ä¾è‡¨åºŠæ±ºç­–è¦å‰‡è©•ä¼°</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ“Š Glasgow Coma Scale è¨ˆç®—</h3>
                <table>
                    <thead>
                        <tr>
                            <th>åæ‡‰é¡å‹</th>
                            <th>åæ‡‰å…§å®¹</th>
                            <th>åˆ†æ•¸</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td rowSpan="4" style={{ fontWeight: 600, color: 'var(--pri)' }}>çœ¼ç›åæ‡‰<br/>(E, 1-4åˆ†)</td><td>è‡ªç™¼æ€§å¼µçœ¼</td><td>4</td></tr>
                        <tr><td>å°è²éŸ³å¼µçœ¼</td><td>3</td></tr>
                        <tr><td>å°ç–¼ç—›å¼µçœ¼</td><td>2</td></tr>
                        <tr><td>ç„¡åæ‡‰</td><td>1</td></tr>
                        <tr><td rowSpan="5" style={{ fontWeight: 600, color: 'var(--sec)' }}>èªè¨€åæ‡‰<br/>(V, 1-5åˆ†)</td><td>å®šå‘åŠ›æ­£å¸¸</td><td>5</td></tr>
                        <tr><td>æ··äº‚äº¤è«‡</td><td>4</td></tr>
                        <tr><td>ä¸é©ç•¶è¨€èª</td><td>3</td></tr>
                        <tr><td>é›£ä»¥ç†è§£çš„è²éŸ³</td><td>2</td></tr>
                        <tr><td>ç„¡åæ‡‰</td><td>1</td></tr>
                        <tr><td rowSpan="6" style={{ fontWeight: 600, color: 'var(--info)' }}>é‹å‹•åæ‡‰<br/>(M, 1-6åˆ†)</td><td>éµå¾æŒ‡ä»¤</td><td>6</td></tr>
                        <tr><td>å®šä½ç–¼ç—›</td><td>5</td></tr>
                        <tr><td>é€€ç¸®ç–¼ç—›</td><td>4</td></tr>
                        <tr><td>ç•°å¸¸å±ˆæ›²</td><td>3</td></tr>
                        <tr><td>ä¼¸å±•åæ‡‰</td><td>2</td></tr>
                        <tr><td>ç„¡åæ‡‰</td><td>1</td></tr>
                    </tbody>
                </table>
                <div className="formula">
                    GCS ç¸½åˆ† = E + V + M (ç¯„åœ 3-15åˆ†)
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“ˆ æµè¡Œç—…å­¸æ•¸æ“š</h3>
                <div className="danger">
                    <strong>é—œéµæ•¸æ“š</strong>
                    <ul style={{ marginTop: 8, marginLeft: 16, color: 'var(--txt2)', fontSize: 14 }}>
                        <li>æ¯å¹´ç´„250è¬ç¾åœ‹äººå› é ­éƒ¨å‰µå‚·å°±é†«</li>
                        <li>è¼•å¾®é ­éƒ¨å‰µå‚· (GCS 13-15) ä½”æ‰€æœ‰é ­éƒ¨å‰µå‚·çš„ <strong>89%</strong></li>
                        <li>åš´é‡é¡±å…§æå‚·ç››è¡Œç‡ï¼š<strong>7.1%</strong> (95% CI, 6.8%-7.4%)</li>
                        <li>éœ€ç¥ç¶“å¤–ç§‘ä»‹å…¥æˆ–æ­»äº¡ï¼š<strong>0.9%</strong> (95% CI, 0.78%-1.0%)</li>
                    </ul>
                </div>
                <div className="tip">
                    <strong>ğŸ’¡ è‡¨åºŠæ„æ¶µ</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é›–ç„¶è¼•å¾®å‰µå‚·çš„åš´é‡æå‚·æ¯”ä¾‹è¼ƒä½ï¼Œä½†å› çµ•å°ç—…æ‚£æ•¸é‡é¾å¤§ï¼Œéœ€è¦ç©æ¥µä»‹å…¥çš„æ‚£è€…äººæ•¸å¯¦éš›ä¸Šæ¯”ä¸­é‡åº¦å‰µå‚·æ›´å¤šã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>ğŸš¨ åš´é‡é¡±å…§æå‚·çš„å®šç¾©</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12, lineHeight: 1.8 }}>
                    éœ€è¦ç·Šæ€¥ä»‹å…¥è™•ç½®çš„æå‚·é¡å‹ï¼š
                </p>
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 10 }}>
                    {['ç¡¬è…¦è†œä¸‹è¡€è…«', 'ç¡¬è…¦è†œå¤–è¡€è…«', 'è…¦å®¤å…§å‡ºè¡€', 'å¯¦è³ªè¡€è…«', 'è››ç¶²è†œä¸‹è…”å‡ºè¡€', 'è…¦ç–', 'å‡¹é™·æ€§é¡±éª¨éª¨æŠ˜'].map((item, i) => (
                        <div key={i} style={{ 
                            background: 'linear-gradient(135deg, #FFEBEE, #FFCDD2)', 
                            padding: '10px 14px', 
                            borderRadius: 10,
                            fontSize: 13,
                            fontWeight: 500,
                            color: 'var(--danger)'
                        }}>
                            {item}
                        </div>
                    ))}
                </div>
                <div className="good" style={{ marginTop: 14 }}>
                    <strong>âœ“ ä¸åˆ—å…¥åš´é‡æå‚·</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é–‰åˆæ€§ã€éå‡¹é™·æ€§ç·šæ€§é¡±éª¨éª¨æŠ˜ä¸éœ€ç·Šæ€¥ä»‹å…¥ï¼Œä¸åˆ—å…¥åš´é‡æå‚·ã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 2: è‡¨åºŠç—…å²è©•ä¼°
    const L2 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ“‹ å±éšªå› å­èˆ‡å—å‚·æ©Ÿè½‰</h3>
                <table>
                    <thead>
                        <tr>
                            <th>å±éšªå› å­</th>
                            <th>LR+ (95% CI)</th>
                            <th>è‡¨åºŠè§£è®€</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>è¡Œäººè¢«è»Šæ’æ“Š</td>
                            <td><span className="lr-badge lr-high">3.0-4.3</span></td>
                            <td>æå‚·æ©Ÿç‡19-25%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å¹´é½¡ â‰¥65æ­²</td>
                            <td><span className="lr-badge lr-mod">2.3</span></td>
                            <td>æå‚·æ©Ÿç‡15%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å¹´é½¡ &gt;60æ­²</td>
                            <td><span className="lr-badge lr-mod">2.2</span></td>
                            <td>æå‚·æ©Ÿç‡14%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å‡è¡€åŠŸèƒ½ç•°å¸¸</td>
                            <td><span className="lr-badge lr-mod">2.2</span></td>
                            <td>æå‚·æ©Ÿç‡14%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å±éšªæ©Ÿè½‰*</td>
                            <td><span className="lr-badge lr-mod">2.1</span></td>
                            <td>æå‚·æ©Ÿç‡14%</td>
                        </tr>
                    </tbody>
                </table>
                <div className="info">
                    <strong>*å±éšªæ©Ÿè½‰å®šç¾©</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        è¡Œäººè¢«è»Šæ’æ“Šã€è»Šè¼›ä¹˜å®¢è¢«æ‹‹å‡ºã€å¾è¶…é1å…¬å°ºæˆ–5éšæ¨“æ¢¯é«˜åº¦å¢œè½
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ¤• ç—‡ç‹€è©•ä¼°</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç—‡ç‹€</th>
                            <th>LR+ (95% CI)</th>
                            <th>LR- (95% CI)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600, color: 'var(--danger)' }}>å˜”å â‰¥2æ¬¡</td>
                            <td><span className="lr-badge lr-high">3.6 (3.1-4.1)</span></td>
                            <td>0.76</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å‰µå‚·å¾Œç™²ç™‡</td>
                            <td><span className="lr-badge lr-mod">2.5 (1.3-4.3)</span></td>
                            <td>0.98</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ä»»ä½•å˜”å</td>
                            <td><span className="lr-badge lr-mod">2.3 (1.8-2.8)</span></td>
                            <td>0.89</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é †è¡Œæ€§å¤±æ†¶</td>
                            <td><span className="lr-badge lr-mod">2.2 (1.6-3.1)</span></td>
                            <td>0.75</td>
                        </tr>
                        <tr>
                            <td>æ„è­˜å–ªå¤±</td>
                            <td>1.6 (1.1-2.1)</td>
                            <td>0.60</td>
                        </tr>
                        <tr>
                            <td>ä»»ä½•å¤±æ†¶</td>
                            <td>1.5 (0.81-2.8)</td>
                            <td>0.55</td>
                        </tr>
                        <tr>
                            <td>é ­ç—›</td>
                            <td>1.2 (1.0-1.5)</td>
                            <td>0.84</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>ğŸ”´ é«˜å±éšªç—‡ç‹€</h3>
                <div className="danger">
                    <strong>å˜”å â‰¥2æ¬¡</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        LR+ = 3.6ï¼Œä»¥7.1%åŸºç·šç››è¡Œç‡è¨ˆç®—ï¼Œé¡±å…§æå‚·é æ¸¬å€¼é” <strong>19-24%</strong>
                    </p>
                </div>
                <div className="tip">
                    <strong>ğŸ’¡ è‡¨åºŠè¦é»</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é‡è¤‡å˜”åæ¯”å–®æ¬¡å˜”åå…·æœ‰æ›´é«˜çš„é æ¸¬åƒ¹å€¼ã€‚æ‡‰è©¢å•å‰µå‚·å¾Œå˜”åçš„æ¬¡æ•¸å’Œæ™‚é–“ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>âš ï¸ æ„è­˜å–ªå¤±çš„è§£è®€</h3>
                <div className="formula">
                    æ„è­˜å–ªå¤± LR+ = 1.6 | ç„¡æ„è­˜å–ªå¤± LR- = 0.60
                </div>
                <div className="info">
                    <strong>é‡è¦è§€å¿µ</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        æ„è­˜å–ªå¤±å’Œå¤±æ†¶é›–å¸¸è®“æ‚£è€…å’Œé†«å¸«æ“”æ†‚ï¼Œä½†ä½œç‚ºå–®ç¨ç™¼ç¾ï¼Œå…¶è¨ºæ–·åƒ¹å€¼æœ‰é™ã€‚
                        <br/><br/>
                        â€¢ ç„¡æ„è­˜å–ªå¤±<strong>ä¸èƒ½</strong>å®Œå…¨æ’é™¤é¡±å…§æå‚· (LR- = 0.60)
                        <br/>
                        â€¢ æœ‰æ„è­˜å–ªå¤±ä¹Ÿä¸ä»£è¡¨å¿…æœ‰æå‚· (LR+ åƒ… 1.6)
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 3: ç†å­¸æª¢æŸ¥ç™¼ç¾
    const L3 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ” ç†å­¸æª¢æŸ¥ç™¼ç¾</h3>
                <table>
                    <thead>
                        <tr>
                            <th>å¾µè±¡</th>
                            <th>LR+ (95% CI)</th>
                            <th>ç‰¹ç•°åº¦</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#FFEBEE' }}>
                            <td style={{ fontWeight: 700, color: 'var(--danger)' }}>ç–‘ä¼¼é¡±éª¨éª¨æŠ˜*</td>
                            <td><span className="lr-badge lr-high">16 (3.1-59)</span></td>
                            <td>99%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é¡±åº•éª¨æŠ˜å¾µè±¡</td>
                            <td><span className="lr-badge lr-high">6.0 (3.9-8.0)</span></td>
                            <td>97%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é–‹æ”¾æ€§éª¨æŠ˜</td>
                            <td><span className="lr-badge lr-high">4.6-5.0</span></td>
                            <td>97%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>å±€ç¶æ€§ç¥ç¶“å­¸ç¼ºæ</td>
                            <td>1.9-7.0</td>
                            <td>91-99%</td>
                        </tr>
                        <tr>
                            <td>é–éª¨ä»¥ä¸Šå‰µå‚·</td>
                            <td>1.3 (1.1-1.5)</td>
                            <td>74%</td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>*ç–‘ä¼¼é¡±éª¨éª¨æŠ˜å¾µè±¡</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        åŒ…æ‹¬ï¼šå¯è¦‹çš„é–‹æ”¾æ€§éª¨æŠ˜ã€å¯è§¸åŠçš„å‡¹é™·æ€§éª¨æŠ˜ã€é¡±åº•éª¨æŠ˜å¾µè±¡
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>ğŸ’€ é¡±åº•éª¨æŠ˜çš„è‡¨åºŠå¾µè±¡</h3>
                <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: 12 }}>
                    <div style={{ 
                        background: 'linear-gradient(135deg, #E3F2FD, #BBDEFB)', 
                        padding: 16, 
                        borderRadius: 12,
                        border: '2px solid var(--pri)'
                    }}>
                        <h4 style={{ color: 'var(--pri)', marginBottom: 8, fontSize: 15 }}>ğŸ¦¡ Battle Sign (Battleå¾µè±¡)</h4>
                        <p style={{ fontSize: 13, color: 'var(--txt2)' }}>ä¹³çªå€ (è€³å¾Œ) ç˜€æ–‘ï¼Œæç¤ºå²©éª¨æˆ–é¡³éª¨éª¨æŠ˜</p>
                    </div>
                    <div style={{ 
                        background: 'linear-gradient(135deg, #EDE7F6, #D1C4E9)', 
                        padding: 16, 
                        borderRadius: 12,
                        border: '2px solid var(--info)'
                    }}>
                        <h4 style={{ color: 'var(--info)', marginBottom: 8, fontSize: 15 }}>ğŸ¦ Raccoon Eyes (æµ£ç†Šçœ¼)</h4>
                        <p style={{ fontSize: 13, color: 'var(--txt2)' }}>çœ¶å‘¨é›™å´ç˜€æ–‘ï¼Œæç¤ºå‰é¡±åº•éª¨æŠ˜</p>
                    </div>
                    <div style={{ 
                        background: 'linear-gradient(135deg, #E8F5E9, #C8E6C9)', 
                        padding: 16, 
                        borderRadius: 12,
                        border: '2px solid var(--suc)'
                    }}>
                        <h4 style={{ color: 'var(--suc)', marginBottom: 8, fontSize: 15 }}>ğŸ‘‚ Hemotympanum (é¼“è†œç©è¡€)</h4>
                        <p style={{ fontSize: 13, color: 'var(--txt2)' }}>é¼“è†œå¾Œæ–¹è¡€æ¶²ç©èšï¼Œéœ€è€³é¡æª¢æŸ¥</p>
                    </div>
                    <div style={{ 
                        background: 'linear-gradient(135deg, #FFF8E1, #FFECB3)', 
                        padding: 16, 
                        borderRadius: 12,
                        border: '2px solid var(--warn)'
                    }}>
                        <h4 style={{ color: '#F57C00', marginBottom: 8, fontSize: 15 }}>ğŸ’§ CSFæ¼ (è…¦è„Šé«“æ¶²è€³æ¼/é¼»æ¼)</h4>
                        <p style={{ fontSize: 13, color: 'var(--txt2)' }}>æ¸…æ¾ˆæ¶²é«”è‡ªè€³é“æˆ–é¼»è…”æµå‡ºï¼Œå¯ç”¨è‘¡è„ç³–è©¦ç´™ç¢ºèª</p>
                    </div>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ“‰ GCSè®ŠåŒ–çš„æ„ç¾©</h3>
                <table>
                    <thead>
                        <tr>
                            <th>GCSç‹€æ…‹</th>
                            <th>LR+ (95% CI)</th>
                            <th>æå‚·æ©Ÿç‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style={{ background: '#FFEBEE' }}>
                            <td style={{ fontWeight: 700, color: 'var(--danger)' }}>GCSä»»ä½•ä¸‹é™</td>
                            <td><span className="lr-badge lr-high">3.4-16</span></td>
                            <td>21-55%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>GCS = 13</td>
                            <td><span className="lr-badge lr-high">4.9 (2.8-8.5)</span></td>
                            <td>27%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>GCS = 14</td>
                            <td><span className="lr-badge lr-high">4.2 (0.85-7.6)</span></td>
                            <td>24%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>2å°æ™‚å¾ŒGCS &lt;15</td>
                            <td><span className="lr-badge lr-high">3.4 (1.4-8.4)</span></td>
                            <td>18%</td>
                        </tr>
                    </tbody>
                </table>
                <div className="danger">
                    <strong>ğŸš¨ é‡è¦è­¦ç¤º</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        GCS = 13é›–è¢«æ­¸é¡ç‚ºã€Œè¼•å¾®ã€é ­éƒ¨å‰µå‚·ï¼Œä½†LR+ = 4.9ï¼Œæå‚·é¢¨éšªé¡¯è‘—å¢åŠ ã€‚
                        å¾æ±ºç­–è§’åº¦ï¼Œé€™é¡æ‚£è€…æ›´é©åˆè¦–ç‚ºã€Œä¸­åº¦ã€é ­éƒ¨å‰µå‚·è™•ç½®ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ§  å±€ç¶æ€§ç¥ç¶“å­¸ç¼ºæ</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12, lineHeight: 1.8 }}>
                    å¯å®šä½è‡³ç‰¹å®šè…¦éƒ¨è§£å‰–ä½ç½®çš„æ–°ç™¼ç•°å¸¸ï¼š
                </p>
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 10 }}>
                    {['ç³å­”ä¸ç­‰å¤§', 'è¦–è¦ºæ”¹è®Š', 'å¤±èªç—‡', 'å±€ç¶é‹å‹•ç¼ºæ', 'å±€ç¶æ„Ÿè¦ºç¼ºæ', 'å…±æ¿Ÿå¤±èª¿', 'æ­¥æ…‹ç•°å¸¸'].map((item, i) => (
                        <div key={i} style={{ 
                            background: 'linear-gradient(135deg, #EDE7F6, #D1C4E9)', 
                            padding: '10px 14px', 
                            borderRadius: 10,
                            fontSize: 13,
                            fontWeight: 500,
                            color: 'var(--info)'
                        }}>
                            {item}
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );

    // Lesson 4: è‡¨åºŠæ±ºç­–è¦å‰‡
    const L4 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>ğŸ‡¨ğŸ‡¦ Canadian CT Head Rule</h3>
                <div className="formula">
                    é©ç”¨å°è±¡ï¼šGCS 13-15 ä¸”æœ‰æ„è­˜å–ªå¤±ã€å¤±æ†¶æˆ–å®šå‘åŠ›éšœç¤™
                </div>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12 }}>
                    <strong>ä»»ä¸€æ¢ä»¶é™½æ€§å³å»ºè­°CTï¼š</strong>
                </p>
                <div style={{ display: 'grid', gap: 10 }}>
                    {[
                        { item: 'å¹´é½¡ â‰¥65æ­²', risk: 'é«˜é¢¨éšª' },
                        { item: 'å±éšªæ©Ÿè½‰ (è¡Œäººè¢«æ’ã€è¢«æ‹‹å‡ºè»Šå¤–ã€å¢œè½>1å…¬å°º)', risk: 'é«˜é¢¨éšª' },
                        { item: 'å˜”åè¶…é1æ¬¡', risk: 'é«˜é¢¨éšª' },
                        { item: 'å¤±æ†¶è¶…é30åˆ†é˜', risk: 'é«˜é¢¨éšª' },
                        { item: '2å°æ™‚å¾ŒGCSä»<15', risk: 'ä¸­é¢¨éšª' },
                        { item: 'ç–‘ä¼¼é–‹æ”¾æ€§ã€å‡¹é™·æ€§æˆ–é¡±åº•éª¨æŠ˜', risk: 'ä¸­é¢¨éšª' }
                    ].map((x, i) => (
                        <div key={i} style={{ 
                            background: x.risk === 'é«˜é¢¨éšª' ? 'linear-gradient(135deg, #FFEBEE, #FFCDD2)' : 'linear-gradient(135deg, #FFF8E1, #FFECB3)',
                            padding: '12px 16px', 
                            borderRadius: 12,
                            display: 'flex',
                            alignItems: 'center',
                            gap: 12
                        }}>
                            <span style={{ 
                                background: x.risk === 'é«˜é¢¨éšª' ? 'var(--danger)' : 'var(--warn)',
                                color: '#fff',
                                padding: '4px 8px',
                                borderRadius: 6,
                                fontSize: 11,
                                fontWeight: 600
                            }}>{x.risk}</span>
                            <span style={{ fontSize: 14, color: 'var(--txt)' }}>{x.item}</span>
                        </div>
                    ))}
                </div>
                <div className="good" style={{ marginTop: 14 }}>
                    <strong>âœ“ è¦å‰‡è¡¨ç¾</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        â€¢ æ•æ„Ÿåº¦ï¼š99% (95% CI, 78-100%)<br/>
                        â€¢ é™°æ€§LRï¼š<strong>0.04</strong> (95% CI, 0-0.65)<br/>
                        â€¢ å®Œå…¨é™°æ€§æ™‚æå‚·æ©Ÿç‡ï¼š<strong>0.31%</strong>
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ‡ºğŸ‡¸ New Orleans Criteria</h3>
                <div className="formula">
                    é©ç”¨å°è±¡ï¼šGCS 15 ä¸”æœ‰æ„è­˜å–ªå¤±æˆ–å¤±æ†¶
                </div>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12 }}>
                    <strong>ä»»ä¸€æ¢ä»¶é™½æ€§å³å»ºè­°CTï¼š</strong>
                </p>
                <div style={{ display: 'grid', gap: 10 }}>
                    {[
                        'å¹´é½¡ >60æ­²',
                        'é†‰é…’ (Intoxication)',
                        'é ­ç—›',
                        'ä»»ä½•å˜”å',
                        'ç™²ç™‡ç™¼ä½œ',
                        'å¤±æ†¶',
                        'é–éª¨ä»¥ä¸Šå¯è¦‹å‰µå‚·'
                    ].map((item, i) => (
                        <div key={i} style={{ 
                            background: 'linear-gradient(135deg, #E0F2F1, #B2DFDB)',
                            padding: '12px 16px', 
                            borderRadius: 12,
                            fontSize: 14,
                            color: 'var(--sec)'
                        }}>
                            {i + 1}. {item}
                        </div>
                    ))}
                </div>
                <div className="good" style={{ marginTop: 14 }}>
                    <strong>âœ“ è¦å‰‡è¡¨ç¾</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        â€¢ æ•æ„Ÿåº¦ï¼š99% (95% CI, 90-100%)<br/>
                        â€¢ é™°æ€§LRï¼š<strong>0.08</strong> (95% CI, 0.01-0.84)<br/>
                        â€¢ å®Œå…¨é™°æ€§æ™‚æå‚·æ©Ÿç‡ï¼š<strong>0.61%</strong>
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“Š å…©è¦å‰‡æ¯”è¼ƒ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>Canadian CT Head Rule</th>
                            <th>New Orleans Criteria</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é©ç”¨GCS</td>
                            <td>13-15</td>
                            <td>15</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>æ•æ„Ÿåº¦</td>
                            <td>99%</td>
                            <td>99%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>ç‰¹ç•°åº¦</td>
                            <td>40%</td>
                            <td>13%</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>é™°æ€§LR</td>
                            <td>0.04</td>
                            <td>0.08</td>
                        </tr>
                        <tr>
                            <td style={{ fontWeight: 600 }}>CTæ¸›å°‘ç‡</td>
                            <td>è¼ƒé«˜</td>
                            <td>è¼ƒä½</td>
                        </tr>
                    </tbody>
                </table>
                <div className="tip">
                    <strong>ğŸ’¡ é¸æ“‡å»ºè­°</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        Canadian CT Head Ruleå…·æœ‰è¼ƒé«˜ç‰¹ç•°åº¦ï¼Œå¯æ¸›å°‘ä¸å¿…è¦çš„CTæª¢æŸ¥ã€‚
                        åœ¨å¤§å¤šæ•¸æ¯”è¼ƒç ”ç©¶ä¸­ï¼Œå…¶è­˜åˆ¥é¡±å…§æå‚·çš„æº–ç¢ºåº¦å„ªæ–¼New Orleans Criteriaã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--warn)', marginBottom: 14 }}>âš ï¸ è¦å‰‡ä½¿ç”¨æ³¨æ„äº‹é …</h3>
                <div className="danger">
                    <strong>è¦å‰‡é™åˆ¶</strong>
                    <ul style={{ marginTop: 8, marginLeft: 16, color: 'var(--txt2)', fontSize: 14 }}>
                        <li>ä¸é©ç”¨æ–¼åš´é‡å‡è¡€åŠŸèƒ½éšœç¤™æ‚£è€…</li>
                        <li>ä¸é©ç”¨æ–¼åš´é‡é†‰é…’è€…</li>
                        <li>ä¸é©ç”¨æ–¼å¹´é½¡>75æ­²çš„æ—ç¾¤ (é©—è­‰ä¸è¶³)</li>
                        <li>ä¸é©ç”¨æ–¼å—å‚·>24å°æ™‚å¾Œå°±è¨ºè€…</li>
                    </ul>
                </div>
                <div className="info" style={{ marginTop: 14 }}>
                    <strong>æ­£ç¢ºè§£è®€</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é€™äº›è¦å‰‡æ˜¯ç”¨ä¾†è­˜åˆ¥<strong>ä½é¢¨éšª</strong>æ‚£è€…å¯å®‰å…¨å‡ºé™¢ï¼Œè€Œéè¦å®šæœ‰ä¸€é …é™½æ€§å°±å¿…é ˆåšCTã€‚
                        æœ‰ä¸€é …æˆ–å¤šé …é™½æ€§æ™‚ï¼Œä»éœ€çµåˆè‡¨åºŠåˆ¤æ–·ã€æ‚£è€…åå¥½ã€é™½æ€§é …ç›®æ•¸é‡å’Œå…·é«”ç‰¹å¾µåšæ±ºç­–ã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    // Lesson 5: è‡¨åºŠæ‡‰ç”¨æ•´åˆ
    const L5 = () => (
        <div className="fade-in">
            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--pri)', marginBottom: 14 }}>ğŸ¥ Case 1ï¼š67æ­²å¥³æ€§è·Œå€’</h3>
                <div className="info">
                    <strong>ç—…å²</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        67æ­²å¥³æ€§åœ¨å†°ä¸Šæ»‘å€’æ’åˆ°é ­éƒ¨ã€‚ç„¡æ„è­˜å–ªå¤±ï¼Œå®Œæ•´è¨˜å¾—äº‹ä»¶ç¶“éã€‚
                        è·Œå€’å¾Œç«‹å³å˜”åä¸€æ¬¡ï¼Œ3å°æ™‚å¾Œåˆ°æ€¥è¨ºå†å˜”åä¸€æ¬¡ã€‚
                        å‰é¡æœ‰0.5cmæ“¦å‚·ï¼ŒGCS 15åˆ†ï¼Œç¥ç¶“å­¸æª¢æŸ¥æ­£å¸¸ã€‚
                    </p>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: 'var(--sec)', marginBottom: 10 }}>ğŸ“‹ é¢¨éšªè©•ä¼°</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td style={{ fontWeight: 600 }}>å¹´é½¡ â‰¥65æ­²</td>
                                <td><span className="lr-badge lr-high">âœ“ é™½æ€§</span></td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>å˜”å â‰¥2æ¬¡</td>
                                <td><span className="lr-badge lr-high">âœ“ é™½æ€§</span></td>
                            </tr>
                            <tr>
                                <td style={{ fontWeight: 600 }}>Canadian Ruleç‹€æ…‹</td>
                                <td><span className="lr-badge lr-high">é«˜é¢¨éšª</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div className="danger" style={{ marginTop: 14 }}>
                    <strong>å¾Œæ¸¬æ©Ÿç‡è¨ˆç®—</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ä»¥6.8%åŸºç·šç››è¡Œç‡ï¼Œå˜”åâ‰¥2æ¬¡ (LR+ = 3.6) â†’<br/>
                        å¾Œæ¸¬æ©Ÿç‡ = <strong>21%</strong> é¡±å…§æå‚·
                    </p>
                </div>
                <div className="good" style={{ marginTop: 14 }}>
                    <strong>âœ“ çµæœ</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        é ­éƒ¨CTé¡¯ç¤ºç¡¬è…¦è†œä¸‹è¡€è…«ã€‚ä½é™¢è§€å¯Ÿ48å°æ™‚å¾Œï¼Œç—‡ç‹€æ”¹å–„ï¼Œç¥ç¶“å­¸æª¢æŸ¥æ­£å¸¸ï¼Œ
                        å‡ºé™¢ä¸¦å®‰æ’2é€±å¾Œç¥ç¶“å¤–ç§‘é–€è¨ºè¿½è¹¤ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--sec)', marginBottom: 14 }}>ğŸ€ Case 2ï¼š20æ­²ç”·æ€§é‹å‹•å‚·å®³</h3>
                <div className="info">
                    <strong>ç—…å²</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        20æ­²ç”·æ€§æ‰“ç±ƒçƒè¢«æ’å€’ï¼Œæ„è­˜å–ªå¤±ç´„5ç§’å¾Œæ¢å¾©ä¸¦ç¹¼çºŒæ¯”è³½ã€‚
                        å—å‚·4å°æ™‚å¾Œåˆ°æ€¥è¨ºï¼Œå·¦å´ä¸­åº¦é ­ç—›ï¼Œå·¦é ‚éƒ¨é ­çš®è¡€è…«ã€‚
                        ç„¡å…¶ä»–ç•°å¸¸ç™¼ç¾ï¼ŒGCS 15åˆ†ã€‚
                    </p>
                </div>
                <div style={{ marginTop: 14 }}>
                    <h4 style={{ color: 'var(--sec)', marginBottom: 10 }}>ğŸ“‹ Canadian CT Head Ruleè©•ä¼°</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td>å¹´é½¡ â‰¥65æ­²</td>
                                <td><span className="lr-badge lr-low">âœ— é™°æ€§</span></td>
                            </tr>
                            <tr>
                                <td>å±éšªæ©Ÿè½‰</td>
                                <td><span className="lr-badge lr-low">âœ— é™°æ€§</span></td>
                            </tr>
                            <tr>
                                <td>å˜”å >1æ¬¡</td>
                                <td><span className="lr-badge lr-low">âœ— é™°æ€§</span></td>
                            </tr>
                            <tr>
                                <td>å¤±æ†¶ >30åˆ†é˜</td>
                                <td><span className="lr-badge lr-low">âœ— é™°æ€§</span></td>
                            </tr>
                            <tr>
                                <td>2å°æ™‚å¾ŒGCS &lt;15</td>
                                <td><span className="lr-badge lr-low">âœ— é™°æ€§</span></td>
                            </tr>
                            <tr>
                                <td>ç–‘ä¼¼é¡±éª¨éª¨æŠ˜</td>
                                <td><span className="lr-badge lr-low">âœ— é™°æ€§</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div className="good" style={{ marginTop: 14 }}>
                    <strong>å¾Œæ¸¬æ©Ÿç‡è¨ˆç®—</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        ä»¥7.4%åŸºç·šç››è¡Œç‡ï¼ŒCanadian Ruleå®Œå…¨é™°æ€§ (LR- = 0.04) â†’<br/>
                        å¾Œæ¸¬æ©Ÿç‡ = <strong>0.32%</strong> é¡±å…§æå‚·
                    </p>
                </div>
                <div className="tip" style={{ marginTop: 14 }}>
                    <strong>ğŸ’¡ è™•ç½®</strong>
                    <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 6 }}>
                        å„˜ç®¡æœ‰æ„è­˜å–ªå¤±å’Œé ­ç—› (New Orleans Criteriaé …ç›®)ï¼Œä½†ä¸ç¬¦åˆCanadian Ruleä»»ä½•æ¢ä»¶ã€‚
                        çµåˆè‡¨åºŠåˆ¤æ–·ï¼Œçµ¦äºˆåš´æ ¼è¡›æ•™å¾Œå‡ºé™¢ï¼Œ1é€±å¾Œè¿½è¹¤å®Œå…¨æ¢å¾©ã€‚
                    </p>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--danger)', marginBottom: 14 }}>ğŸš¨ å‡ºé™¢è¡›æ•™è¦é»</h3>
                <p style={{ fontSize: 14, color: 'var(--txt2)', marginBottom: 12 }}>
                    æ‰€æœ‰å‡ºé™¢æ‚£è€…æ‡‰æœ‰æˆäººé™ªä¼´ï¼Œä¸¦å‘ŠçŸ¥ä»¥ä¸‹è­¦ç¤ºç—‡ç‹€éœ€ç«‹å³å›è¨ºï¼š
                </p>
                <div style={{ display: 'grid', gap: 10 }}>
                    {[
                        { icon: 'ğŸ¤®', text: 'å¤šæ¬¡å˜”å' },
                        { icon: 'ğŸ¤•', text: 'åŠ‡çƒˆæˆ–æƒ¡åŒ–çš„é ­ç—›' },
                        { icon: 'âš¡', text: 'ç™²ç™‡ç™¼ä½œ' },
                        { icon: 'ğŸ˜µ', text: 'æ„è­˜ç‹€æ…‹æƒ¡åŒ–' },
                        { icon: 'ğŸ’ª', text: 'è‚¢é«”ç„¡åŠ›æˆ–æ„Ÿè¦ºç•°å¸¸' },
                        { icon: 'ğŸ‘ï¸', text: 'è¦–åŠ›æ”¹è®Š' }
                    ].map((x, i) => (
                        <div key={i} style={{ 
                            background: 'linear-gradient(135deg, #FFEBEE, #FFCDD2)',
                            padding: '12px 16px', 
                            borderRadius: 12,
                            display: 'flex',
                            alignItems: 'center',
                            gap: 12,
                            fontSize: 14
                        }}>
                            <span style={{ fontSize: 20 }}>{x.icon}</span>
                            <span style={{ color: 'var(--danger)' }}>{x.text}</span>
                        </div>
                    ))}
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--info)', marginBottom: 14 }}>ğŸ“Š è‡¨åºŠæ±ºç­–æµç¨‹</h3>
                <div style={{ 
                    background: 'linear-gradient(135deg, #E3F2FD, #BBDEFB)', 
                    padding: 20, 
                    borderRadius: 16,
                    textAlign: 'center'
                }}>
                    <div style={{ marginBottom: 16 }}>
                        <div style={{ 
                            background: 'var(--pri)', 
                            color: '#fff', 
                            padding: '10px 20px', 
                            borderRadius: 10,
                            display: 'inline-block',
                            fontWeight: 600
                        }}>
                            æˆäººè¼•å¾®é ­éƒ¨å‰µå‚· (GCS 13-15)
                        </div>
                    </div>
                    <div style={{ fontSize: 24, marginBottom: 16 }}>â†“</div>
                    <div style={{ marginBottom: 16 }}>
                        <div style={{ 
                            background: 'var(--danger)', 
                            color: '#fff', 
                            padding: '10px 20px', 
                            borderRadius: 10,
                            display: 'inline-block',
                            fontWeight: 600
                        }}>
                            GCS â‰¤13 æˆ– æ„è­˜æ”¹è®Š?
                        </div>
                    </div>
                    <div style={{ display: 'flex', justifyContent: 'center', gap: 40 }}>
                        <div>
                            <div style={{ fontSize: 14, color: 'var(--danger)', fontWeight: 600 }}>æ˜¯</div>
                            <div style={{ fontSize: 20 }}>â†“</div>
                            <div style={{ 
                                background: 'var(--danger)', 
                                color: '#fff', 
                                padding: '8px 16px', 
                                borderRadius: 8,
                                fontSize: 13
                            }}>
                                ç«‹å³CT + æœƒè¨º
                            </div>
                        </div>
                        <div>
                            <div style={{ fontSize: 14, color: 'var(--suc)', fontWeight: 600 }}>å¦</div>
                            <div style={{ fontSize: 20 }}>â†“</div>
                            <div style={{ 
                                background: 'var(--sec)', 
                                color: '#fff', 
                                padding: '8px 16px', 
                                borderRadius: 8,
                                fontSize: 13
                            }}>
                                æ‡‰ç”¨è‡¨åºŠæ±ºç­–è¦å‰‡
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div className="card">
                <h3 style={{ fontSize: 18, fontWeight: 700, color: 'var(--suc)', marginBottom: 14 }}>âœ… æ ¸å¿ƒé‡é»ç¸½çµ</h3>
                <div style={{ display: 'grid', gap: 12 }}>
                    {[
                        'è¼•å¾®é ­éƒ¨å‰µå‚·åš´é‡é¡±å…§æå‚·ç››è¡Œç‡7.1%',
                        'ç–‘ä¼¼é¡±éª¨éª¨æŠ˜å¾µè±¡LR+ = 16ï¼Œæ˜¯æœ€å¼·é æ¸¬æŒ‡æ¨™',
                        'å˜”åâ‰¥2æ¬¡ã€GCS 13ã€GCSä¸‹é™éƒ½æ˜¯é«˜é¢¨éšªç‰¹å¾µ',
                        'æ„è­˜å–ªå¤±å–®ç¨ä¸è¶³ä»¥æ’é™¤æˆ–ç¢ºèªæå‚·',
                        'Canadian Ruleé™°æ€§å¯å°‡æå‚·æ©Ÿç‡é™è‡³0.31%',
                        'è¦å‰‡æ˜¯è¼”åŠ©å·¥å…·ï¼Œä¸èƒ½å–ä»£è‡¨åºŠåˆ¤æ–·'
                    ].map((item, i) => (
                        <div key={i} style={{ 
                            background: 'linear-gradient(135deg, #E8F5E9, #C8E6C9)',
                            padding: '12px 16px', 
                            borderRadius: 12,
                            display: 'flex',
                            alignItems: 'center',
                            gap: 12
                        }}>
                            <span style={{ 
                                background: 'var(--suc)',
                                color: '#fff',
                                borderRadius: '50%',
                                width: 24,
                                height: 24,
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: 12,
                                fontWeight: 700,
                                flexShrink: 0
                            }}>âœ“</span>
                            <span style={{ fontSize: 14, color: 'var(--txt)' }}>{item}</span>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );

    const Lesson = () => {
        const l = lessons.find(x => x.id === lessonId);
        return (
            <div className="fade-in">
                <Header title={l.title} />
                <div style={{ background: `linear-gradient(135deg, ${l.color}, ${l.color}88)`, padding: '20px', color: '#fff' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        <div style={{ fontSize: 12, opacity: 0.9 }}>Lesson {l.id} â€¢ {l.sub}</div>
                        <h1 style={{ fontSize: 24, fontWeight: 700 }}>{l.title}</h1>
                    </div>
                </div>
                <div style={{ padding: '20px 16px' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        {lessonId === 1 && <L1 />}
                        {lessonId === 2 && <L2 />}
                        {lessonId === 3 && <L3 />}
                        {lessonId === 4 && <L4 />}
                        {lessonId === 5 && <L5 />}
                        <div style={{ display: 'flex', gap: 12, marginTop: 24 }}>
                            {lessonId > 1 && (
                                <button className="btn" style={{ flex: 1, background: '#fff', border: '2px solid var(--pri)', color: 'var(--pri)' }} onClick={() => setLessonId(lessonId - 1)}>
                                    â† ä¸Šä¸€èª²
                                </button>
                            )}
                            {lessonId < 5 ? (
                                <button className="btn btn-pri" style={{ flex: 1 }} onClick={() => setLessonId(lessonId + 1)}>
                                    ä¸‹ä¸€èª² â†’
                                </button>
                            ) : (
                                <button className="btn btn-sec" style={{ flex: 1 }} onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); setPage('quiz'); }}>
                                    é–‹å§‹æ¸¬é©— ğŸ“
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    const Quiz = () => {
        const pick = (i) => { if (show) return; setSel(i); setShow(true); if (i === quiz[qIdx].c) setScore(score + 1); };
        const next = () => { if (qIdx < quiz.length - 1) { setQIdx(qIdx + 1); setSel(null); setShow(false); } else setDone(true); };

        if (done) {
            const pct = Math.round((score / quiz.length) * 100);
            return (
                <div className="fade-in">
                    <Header title="æ¸¬é©—çµæœ" />
                    <div style={{ padding: '48px 16px', textAlign: 'center' }}>
                        <div style={{ 
                            width: 150, 
                            height: 150, 
                            borderRadius: '50%', 
                            background: `conic-gradient(${pct >= 80 ? 'var(--suc)' : pct >= 60 ? 'var(--warn)' : 'var(--danger)'} ${pct * 3.6}deg, #E5E5E5 0deg)`, 
                            display: 'flex', 
                            alignItems: 'center', 
                            justifyContent: 'center', 
                            margin: '0 auto 28px',
                            boxShadow: '0 8px 32px rgba(0,0,0,0.1)'
                        }}>
                            <div style={{ 
                                width: 126, 
                                height: 126, 
                                borderRadius: '50%', 
                                background: '#fff', 
                                display: 'flex', 
                                flexDirection: 'column', 
                                alignItems: 'center', 
                                justifyContent: 'center' 
                            }}>
                                <div style={{ fontSize: 40, fontWeight: 700, color: 'var(--txt)' }}>{pct}%</div>
                                <div style={{ fontSize: 15, color: 'var(--txt2)' }}>{score}/{quiz.length}</div>
                            </div>
                        </div>
                        <h2 style={{ fontSize: 26, fontWeight: 700, marginBottom: 10 }}>
                            {pct >= 80 ? 'ğŸ‰ å„ªç§€ï¼' : pct >= 60 ? 'ğŸ‘ ä¸éŒ¯ï¼' : 'ğŸ’ª åŠ æ²¹ï¼'}
                        </h2>
                        <p style={{ color: 'var(--txt2)', marginBottom: 36, fontSize: 15 }}>
                            {pct >= 80 ? 'ä½ å°è¼•å¾®é ­éƒ¨å‰µå‚·è©•ä¼°æŒæ¡è‰¯å¥½ï¼' : pct >= 60 ? 'å†è¤‡ç¿’å¯ä»¥æ›´é€²æ­¥ï¼' : 'å»ºè­°é‡æ–°é–±è®€èª²ç¨‹å…§å®¹'}
                        </p>
                        <div style={{ display: 'flex', gap: 14, justifyContent: 'center', flexWrap: 'wrap' }}>
                            <button className="btn btn-pri" onClick={() => { setQIdx(0); setScore(0); setSel(null); setShow(false); setDone(false); }}>
                                é‡æ–°æ¸¬é©—
                            </button>
                            <button className="btn" style={{ background: '#fff', border: '2px solid var(--pri)', color: 'var(--pri)' }} onClick={() => setPage('home')}>
                                è¿”å›èª²ç¨‹
                            </button>
                        </div>
                    </div>
                    <footer style={{ background: 'linear-gradient(135deg, #E3F2FD, #BBDEFB)', padding: '28px 16px', textAlign: 'center', marginTop: 48 }}>
                        <p style={{ fontSize: 12, color: 'var(--txt2)' }}>æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨ | è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
                    </footer>
                </div>
            );
        }

        const q = quiz[qIdx];
        return (
            <div className="fade-in">
                <Header title="è‡ªæˆ‘æ¸¬é©—" />
                <div style={{ padding: '20px 16px' }}>
                    <div style={{ maxWidth: 480, margin: '0 auto' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 10, fontSize: 14 }}>
                            <span style={{ color: 'var(--txt2)' }}>é€²åº¦</span>
                            <span style={{ fontWeight: 600, color: 'var(--pri)' }}>{qIdx + 1}/{quiz.length}</span>
                        </div>
                        <div style={{ height: 10, background: '#E5E5E5', borderRadius: 5, marginBottom: 24, overflow: 'hidden' }}>
                            <div style={{ 
                                height: '100%', 
                                width: `${((qIdx + 1) / quiz.length) * 100}%`, 
                                background: 'linear-gradient(90deg, var(--pri), var(--pri2))', 
                                borderRadius: 5, 
                                transition: 'width 0.4s ease' 
                            }} />
                        </div>
                        <div className="card">
                            <h3 style={{ fontSize: 16, fontWeight: 600, lineHeight: 1.7, marginBottom: 22, color: 'var(--txt)' }}>{q.q}</h3>
                            {q.o.map((opt, i) => {
                                let bg = '#fff', bd = '#E5E5E5';
                                if (show) {
                                    if (i === q.c) { bg = '#E8F5E9'; bd = 'var(--suc)'; }
                                    else if (i === sel) { bg = '#FFEBEE'; bd = 'var(--danger)'; }
                                } else if (i === sel) { bg = '#E3F2FD'; bd = 'var(--pri)'; }
                                return (
                                    <button 
                                        key={i} 
                                        onClick={() => pick(i)} 
                                        disabled={show} 
                                        style={{ 
                                            width: '100%', 
                                            padding: '14px 16px', 
                                            marginBottom: 12, 
                                            background: bg, 
                                            border: `2px solid ${bd}`, 
                                            borderRadius: 14, 
                                            textAlign: 'left', 
                                            fontSize: 14, 
                                            cursor: show ? 'default' : 'pointer', 
                                            display: 'flex', 
                                            alignItems: 'center', 
                                            gap: 14,
                                            transition: 'all 0.2s ease'
                                        }}
                                    >
                                        <span style={{ 
                                            width: 30, 
                                            height: 30, 
                                            borderRadius: 10, 
                                            background: show && i === q.c ? 'var(--suc)' : show && i === sel ? 'var(--danger)' : 'linear-gradient(135deg, #E3F2FD, #BBDEFB)', 
                                            color: show && (i === q.c || i === sel) ? '#fff' : 'var(--pri)', 
                                            display: 'flex', 
                                            alignItems: 'center', 
                                            justifyContent: 'center', 
                                            fontWeight: 700, 
                                            fontSize: 14, 
                                            flexShrink: 0 
                                        }}>
                                            {show && i === q.c ? 'âœ“' : show && i === sel && i !== q.c ? 'âœ—' : String.fromCharCode(65 + i)}
                                        </span>
                                        <span style={{ lineHeight: 1.6, color: 'var(--txt)' }}>{opt}</span>
                                    </button>
                                );
                            })}
                        </div>
                        {show && (
                            <div className={sel === q.c ? 'good' : 'tip'}>
                                <strong style={{ color: sel === q.c ? 'var(--suc)' : '#F57C00' }}>
                                    {sel === q.c ? 'âœ“ æ­£ç¢ºï¼' : 'âœ— ç­”éŒ¯äº†'}
                                </strong>
                                <p style={{ fontSize: 14, color: 'var(--txt2)', marginTop: 10, lineHeight: 1.8 }}>{q.e}</p>
                            </div>
                        )}
                        {show && (
                            <button className="btn btn-pri" style={{ width: '100%', justifyContent: 'center', marginTop: 20 }} onClick={next}>
                                {qIdx < quiz.length - 1 ? 'ä¸‹ä¸€é¡Œ â†’' : 'æŸ¥çœ‹çµæœ'}
                            </button>
                        )}
                    </div>
                </div>
            </div>
        );
    };

    return (
        <div style={{ maxWidth: '100%', minHeight: '100vh', background: 'var(--bg)' }}>
            {page === 'home' ? <Home /> : page === 'lesson' ? <Lesson /> : <Quiz />}
        </div>
    );
};

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
