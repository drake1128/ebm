<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«–é—œç¯€éª¨é—œç¯€ç‚è¨ºæ–· | JAMA Rational Clinical Examination</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--pri:#6D4C41;--pri2:#8D6E63;--acc:#FF8F00;--suc:#26A69A;--warn:#FFC107;--err:#EF5350;--pur:#7E57C2;--blue:#42A5F5;--pink:#EC407A;--teal:#00897B;--bg:#FAF9F7;--txt:#3E2723;--txt2:#6B7280}
        body{font-family:'Noto Sans TC',sans-serif;background:var(--bg);color:var(--txt);line-height:1.7}
        .container{max-width:480px;margin:0 auto}
        .card{background:#fff;border-radius:16px;padding:20px;margin-bottom:16px;box-shadow:0 2px 12px rgba(109,76,65,0.1)}
        .btn{padding:14px 24px;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:8px;transition:all 0.3s;width:100%}
        .btn-pri{background:linear-gradient(135deg,var(--pri),var(--pri2));color:#fff}
        .btn-acc{background:linear-gradient(135deg,var(--acc),#FFCA28);color:#333}
        .btn-out{background:#fff;border:2px solid var(--pri);color:var(--pri)}
        table{width:100%;border-collapse:collapse;font-size:13px;margin:12px 0}
        th,td{padding:10px;text-align:center;border-bottom:1px solid #eee}
        th{background:#EFEBE9;font-weight:600;color:var(--pri)}
        .formula{background:linear-gradient(135deg,#EFEBE9,#D7CCC8);border:2px solid var(--pri);border-radius:12px;padding:16px;margin:12px 0;text-align:center;font-size:17px;color:#4E342E}
        .tip{background:#FFF8E1;border-left:4px solid var(--acc);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .good{background:#E0F2F1;border-left:4px solid var(--suc);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .info{background:#E3F2FD;border-left:4px solid var(--blue);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .warn{background:#FFF3E0;border-left:4px solid var(--warn);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .purple{background:#EDE7F6;border-left:4px solid var(--pur);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .pink{background:#FCE4EC;border-left:4px solid var(--pink);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .brown{background:#EFEBE9;border-left:4px solid var(--pri);border-radius:0 12px 12px 0;padding:14px;margin:12px 0}
        .key-point{background:linear-gradient(135deg,#6D4C41,#8D6E63);color:#fff;border-radius:12px;padding:16px;margin:16px 0}
        .lr-high{background:#C8E6C9;color:#2E7D32;padding:2px 8px;border-radius:4px;font-weight:600}
        .lr-mod{background:#FFF9C4;color:#F57F17;padding:2px 8px;border-radius:4px;font-weight:600}
        .lr-low{background:#FFCDD2;color:#C62828;padding:2px 8px;border-radius:4px;font-weight:600}
        .lr-exclude{background:#BBDEFB;color:#1565C0;padding:2px 8px;border-radius:4px;font-weight:600}
        header{background:#fff;border-bottom:1px solid #eee;padding:12px 16px;position:sticky;top:0;z-index:10}
        .header-inner{max-width:480px;margin:0 auto;display:flex;align-items:center;gap:12px}
        .back-btn{background:#EFEBE9;border:none;border-radius:10px;width:40px;height:40px;cursor:pointer;color:var(--pri);display:flex;align-items:center;justify-content:center}
        .hero{background:linear-gradient(135deg,#6D4C41,#8D6E63);padding:32px 20px;color:#fff}
        .tag{background:rgba(255,255,255,0.2);display:inline-block;padding:6px 14px;border-radius:50px;font-size:12px;font-weight:600;margin-bottom:16px}
        .badge-row{display:flex;gap:10px;flex-wrap:wrap}
        .badge{background:rgba(255,255,255,0.2);padding:6px 12px;border-radius:20px;font-size:11px}
        .content{padding:0 16px;margin-top:-20px}
        .lesson-item{display:flex;align-items:center;gap:12px;padding:14px;margin-bottom:8px;background:#FAF5F2;border-radius:12px;cursor:pointer;border:2px solid transparent;transition:border-color 0.2s}
        .lesson-item:hover{border-color:var(--pri)}
        .lesson-num{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
        .goal-item{display:flex;gap:10px;margin-bottom:8px;font-size:14px}
        .goal-num{background:var(--suc);color:#fff;border-radius:6px;width:22px;height:22px;display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0}
        footer{background:#EFEBE9;padding:24px 16px;border-radius:16px;text-align:center;margin:20px 0 40px}
        .page{display:none}
        .page.active{display:block}
        .lesson-header{padding:20px;color:#fff}
        .lesson-content{padding:20px 16px}
        .nav-buttons{display:flex;gap:12px;margin-top:24px}
        .nav-buttons .btn{flex:1}
        .progress-bar{height:8px;background:#E5E5E5;border-radius:4px;margin-bottom:20px}
        .progress-fill{height:100%;background:linear-gradient(90deg,var(--pri),var(--pri2));border-radius:4px;transition:width 0.3s}
        .quiz-option{width:100%;padding:12px 14px;margin-bottom:10px;background:#fff;border:2px solid #E5E5E5;border-radius:12px;text-align:left;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:12px}
        .quiz-option:hover{border-color:var(--pri)}
        .quiz-option.selected{background:#EFEBE9;border-color:var(--pri)}
        .quiz-option.correct{background:#E8F5E9;border-color:var(--suc)}
        .quiz-option.wrong{background:#FFEBEE;border-color:var(--err)}
        .quiz-option.disabled{cursor:default}
        .option-label{width:26px;height:26px;border-radius:8px;background:#EFEBE9;color:var(--pri);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:13px;flex-shrink:0}
        .option-label.correct{background:var(--suc);color:#fff}
        .option-label.wrong{background:var(--err);color:#fff}
        .result-circle{width:140px;height:140px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 24px}
        .result-inner{width:120px;height:120px;border-radius:50%;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center}
        .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
        .stat-box{border-radius:12px;padding:16px;text-align:center}
        .stat-box .label{font-size:11px;color:var(--txt2)}
        .stat-box .value{font-size:20px;font-weight:700}
    </style>
</head>
<body>
    <!-- é¦–é  -->
    <div id="home" class="page active">
        <header>
            <div class="header-inner">
                <button class="back-btn" onclick="location.href='jama-rational-exam.html'">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                </button>
                <span style="font-weight:700;color:#4E342E">é«–é—œç¯€éª¨é—œç¯€ç‚</span>
            </div>
        </header>
        <div class="hero">
            <div class="container">
                <div class="tag">ğŸ¦´ JAMA Rational Clinical Examination</div>
                <h1 style="font-size:22px;font-weight:700;margin-bottom:8px">Does This Patient Have Hip Osteoarthritis?</h1>
                <h2 style="font-size:15px;font-weight:500;margin-bottom:12px;opacity:0.95">é«–é—œç¯€éª¨é—œç¯€ç‚çš„è‡¨åºŠè¨ºæ–·</h2>
                <a href="https://jamanetwork.com/journals/jama/article-abstract/2757584" target="_blank" style="display:inline-block;background:rgba(255,255,255,0.25);padding:8px 16px;border-radius:8px;color:#fff;text-decoration:none;font-size:13px;margin-bottom:16px;transition:background 0.2s" onmouseover="this.style.background='rgba(255,255,255,0.4)'" onmouseout="this.style.background='rgba(255,255,255,0.25)'">ğŸ“„ JAMA 2019;322(23):2323-2333 â†—</a>
                <div class="badge-row">
                    <div class="badge">ğŸ“Š N=1,110 æ‚£è€…</div>
                    <div class="badge">ğŸ¦´ 1,324 é«–é—œç¯€</div>
                    <div class="badge">ğŸ¯ LR Analysis</div>
                </div>
            </div>
        </div>
        <div class="content">
            <div class="container">
                <div class="card">
                    <h3 style="font-size:16px;font-weight:700;color:var(--pri);margin-bottom:12px">ğŸ¯ å­¸ç¿’ç›®æ¨™</h3>
                    <div class="goal-item"><span class="goal-num">1</span><span style="color:var(--txt2)">äº†è§£é«–é—œç¯€éª¨é—œç¯€ç‚çš„è‡¨åºŠè¡¨ç¾</span></div>
                    <div class="goal-item"><span class="goal-num">2</span><span style="color:var(--txt2)">æŒæ¡ç—…å²è©¢å•çš„è¨ºæ–·åƒ¹å€¼</span></div>
                    <div class="goal-item"><span class="goal-num">3</span><span style="color:var(--txt2)">å­¸æœƒé—œç¯€æ´»å‹•åº¦æª¢æŸ¥æŠ€å·§</span></div>
                    <div class="goal-item"><span class="goal-num">4</span><span style="color:var(--txt2)">é‹ç”¨èª˜ç™¼ç–¼ç—›è©¦é©—é€²è¡Œè¨ºæ–·</span></div>
                    <div class="goal-item"><span class="goal-num">5</span><span style="color:var(--txt2)">æ•´åˆè‡¨åºŠç™¼ç¾åˆ¤æ–· OA å¯èƒ½æ€§</span></div>
                </div>
                <div class="card">
                    <h3 style="font-size:16px;font-weight:700;color:var(--pri);margin-bottom:12px">ğŸ“– èª²ç¨‹å–®å…ƒ</h3>
                    <div class="lesson-item" onclick="showLesson(1)">
                        <div class="lesson-num" style="background:linear-gradient(135deg,#6D4C41,#6D4C4188)">1</div>
                        <div style="flex:1"><div style="font-weight:600;font-size:15px">é«–é—œç¯€ OA æ¦‚è«–</div><div style="font-size:12px;color:var(--txt2)">Hip OA Basics</div></div>
                        <svg viewBox="0 0 24 24" fill="#6D4C41" width="20" height="20"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
                    </div>
                    <div class="lesson-item" onclick="showLesson(2)">
                        <div class="lesson-num" style="background:linear-gradient(135deg,#8D6E63,#8D6E6388)">2</div>
                        <div style="flex:1"><div style="font-weight:600;font-size:15px">ç—…å²è©¢å•</div><div style="font-size:12px;color:var(--txt2)">Clinical History</div></div>
                        <svg viewBox="0 0 24 24" fill="#8D6E63" width="20" height="20"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
                    </div>
                    <div class="lesson-item" onclick="showLesson(3)">
                        <div class="lesson-num" style="background:linear-gradient(135deg,#26A69A,#26A69A88)">3</div>
                        <div style="flex:1"><div style="font-weight:600;font-size:15px">é—œç¯€æ´»å‹•åº¦æª¢æŸ¥</div><div style="font-size:12px;color:var(--txt2)">Range of Motion Tests</div></div>
                        <svg viewBox="0 0 24 24" fill="#26A69A" width="20" height="20"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
                    </div>
                    <div class="lesson-item" onclick="showLesson(4)">
                        <div class="lesson-num" style="background:linear-gradient(135deg,#7E57C2,#7E57C288)">4</div>
                        <div style="flex:1"><div style="font-weight:600;font-size:15px">èª˜ç™¼ç–¼ç—›è©¦é©—</div><div style="font-size:12px;color:var(--txt2)">Provocative Pain Tests</div></div>
                        <svg viewBox="0 0 24 24" fill="#7E57C2" width="20" height="20"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
                    </div>
                    <div class="lesson-item" onclick="showLesson(5)">
                        <div class="lesson-num" style="background:linear-gradient(135deg,#FFB300,#FFB30088)">5</div>
                        <div style="flex:1"><div style="font-weight:600;font-size:15px">è‡¨åºŠç¶œåˆåˆ¤æ–·</div><div style="font-size:12px;color:var(--txt2)">Clinical Integration</div></div>
                        <svg viewBox="0 0 24 24" fill="#FFB300" width="20" height="20"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
                    </div>
                </div>
                <button class="btn btn-acc" onclick="startQuiz()">ğŸ“ é–‹å§‹è‡ªæˆ‘æ¸¬é©—</button>
                <div class="card" style="background:linear-gradient(135deg,#EFEBE9,#D7CCC8);margin-top:16px">
                    <h3 style="font-size:14px;font-weight:700;color:var(--pri);margin-bottom:8px">ğŸ“Œ è‡¨åºŠè¦é»</h3>
                    <p style="font-size:13px;color:var(--txt2);line-height:1.8">è¹²ä¸‹æ™‚å¾Œæ–¹ç–¼ç—› (LR+ 6.1) å’Œè¢«å‹•å¤–å±•/å…§æ”¶æ™‚é¼ è¹Šéƒ¨ç–¼ç—› (LR+ 5.7) æ˜¯é æ¸¬é«–é—œç¯€ OA æœ€æœ‰åƒ¹å€¼çš„æª¢æŸ¥ã€‚æ­£å¸¸çš„è¢«å‹•é«–é—œç¯€å…§æ”¶å¯æœ‰æ•ˆæ’é™¤ OA (LR- 0.25)ã€‚</p>
                </div>
                <footer>
                    <p style="font-size:12px;color:var(--txt2);margin-bottom:8px">æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨</p>
                    <p style="font-size:11px;color:var(--txt2)">è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
                    <p style="font-size:10px;color:var(--txt2);margin-top:8px">è³‡æ–™ä¾†æº: JAMA 2019;322(23):2323-2333</p>
                </footer>
            </div>
        </div>
    </div>

    <!-- èª²ç¨‹é  -->
    <div id="lesson" class="page">
        <header>
            <div class="header-inner">
                <button class="back-btn" onclick="showHome()">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                </button>
                <span id="lesson-title" style="font-weight:700;color:#4E342E"></span>
            </div>
        </header>
        <div id="lesson-header" class="lesson-header"></div>
        <div class="lesson-content">
            <div class="container">
                <div id="lesson-body"></div>
                <div class="nav-buttons">
                    <button id="prev-btn" class="btn btn-out" onclick="prevLesson()">â† ä¸Šä¸€èª²</button>
                    <button id="next-btn" class="btn btn-pri" onclick="nextLesson()">ä¸‹ä¸€èª² â†’</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¸¬é©—é  -->
    <div id="quiz" class="page">
        <header>
            <div class="header-inner">
                <button class="back-btn" onclick="showHome()">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                </button>
                <span style="font-weight:700;color:#4E342E">è‡ªæˆ‘æ¸¬é©—</span>
            </div>
        </header>
        <div style="padding:20px 16px">
            <div class="container">
                <div style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px">
                    <span style="color:var(--txt2)">é€²åº¦</span>
                    <span id="quiz-progress" style="font-weight:600;color:var(--pri)"></span>
                </div>
                <div class="progress-bar">
                    <div id="quiz-progress-bar" class="progress-fill"></div>
                </div>
                <div id="quiz-content" class="card"></div>
                <div id="quiz-feedback"></div>
                <button id="quiz-next" class="btn btn-pri" onclick="nextQuestion()" style="display:none;margin-top:16px">ä¸‹ä¸€é¡Œ â†’</button>
            </div>
        </div>
    </div>

    <!-- çµæœé  -->
    <div id="result" class="page">
        <header>
            <div class="header-inner">
                <button class="back-btn" onclick="showHome()">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                </button>
                <span style="font-weight:700;color:#4E342E">æ¸¬é©—çµæœ</span>
            </div>
        </header>
        <div style="padding:40px 16px;text-align:center">
            <div class="container">
                <div id="result-circle" class="result-circle">
                    <div class="result-inner">
                        <div id="result-pct" style="font-size:36px;font-weight:700;color:var(--pri)"></div>
                        <div id="result-score" style="font-size:14px;color:var(--txt2)"></div>
                    </div>
                </div>
                <h2 id="result-title" style="font-size:24px;font-weight:700;margin-bottom:8px"></h2>
                <p id="result-msg" style="color:var(--txt2);margin-bottom:32px"></p>
                <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
                    <button class="btn btn-pri" onclick="startQuiz()">é‡æ–°æ¸¬é©—</button>
                    <button class="btn btn-out" onclick="showHome()">è¿”å›èª²ç¨‹</button>
                </div>
            </div>
        </div>
        <footer style="margin-top:40px">
            <p style="font-size:12px;color:var(--txt2)">æ–°ç«¹å°å¤§åˆ†é™¢æ•™å­¸éƒ¨ | è¬æ…•æš MD, PhD, FESC | é»ƒæ²›éŠ“ MD | é»ƒåœ‹è‰¯</p>
        </footer>
    </div>

<script>
const lessons = [
    {id:1, title:'é«–é—œç¯€ OA æ¦‚è«–', sub:'Hip OA Basics', color:'#6D4C41'},
    {id:2, title:'ç—…å²è©¢å•', sub:'Clinical History', color:'#8D6E63'},
    {id:3, title:'é—œç¯€æ´»å‹•åº¦æª¢æŸ¥', sub:'Range of Motion Tests', color:'#26A69A'},
    {id:4, title:'èª˜ç™¼ç–¼ç—›è©¦é©—', sub:'Provocative Pain Tests', color:'#7E57C2'},
    {id:5, title:'è‡¨åºŠç¶œåˆåˆ¤æ–·', sub:'Clinical Integration', color:'#FFB300'}
];

const lessonContent = {
    1: `<div class="key-point"><h4 style="font-size:14px;margin-bottom:8px">ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ</h4><p style="font-size:13px">é«–é—œç¯€éª¨é—œç¯€ç‚ (Hip OA) æ˜¯å°è‡´é«–éƒ¨ç–¼ç—›å’Œå¤±èƒ½çš„å¸¸è¦‹åŸå› ï¼Œç°¡å–®çš„é—œç¯€æ´»å‹•åº¦æ¸¬è©¦å¯ä»¥å¹«åŠ©è­˜åˆ¥æœ€å¯èƒ½æœ‰ OA çš„æ‚£è€…ã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ¦´ ç‚ºä»€éº¼é‡è¦ï¼Ÿ</h4>
    <div class="info"><strong>ğŸ“Š è‡¨åºŠèƒŒæ™¯</strong><p style="font-size:13px;margin-top:6px">é«–é—œç¯€ OA æ˜¯é€ æˆæˆäººé—œç¯€ç–¼ç—›å’Œæ´»å‹•å—é™çš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œæ—©æœŸè­˜åˆ¥æœ‰åŠ©æ–¼é©ç•¶æ²»ç™‚è¨ˆç•«çš„åˆ¶å®šï¼ŒåŒ…æ‹¬ç‰©ç†æ²»ç™‚ã€è—¥ç‰©æ²»ç™‚æˆ–æ‰‹è¡“è©•ä¼°ã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“Š ç ”ç©¶æ¦‚æ³</h4>
    <div class="stat-box" style="background:#EFEBE9;margin-bottom:16px">
        <div class="grid-2" style="grid-template-columns:1fr 1fr 1fr;gap:10px;text-align:center">
            <div><div class="label">ç ”ç©¶æ•¸é‡</div><div class="value" style="color:var(--pri)">6</div></div>
            <div><div class="label">æ‚£è€…æ•¸</div><div class="value" style="color:var(--pri)">1,110</div></div>
            <div><div class="label">é«–é—œç¯€æ•¸</div><div class="value" style="color:var(--pri)">1,324</div></div>
        </div>
    </div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“ˆ ç››è¡Œç‡</h4>
    <div class="formula">é«–æˆ–é¼ è¹Šéƒ¨ç–¼ç—›æ‚£è€…ä¸­ï¼ŒXå…‰è­‰å¯¦ OA çš„æ¯”ä¾‹ = 34%</div>
    <div class="warn"><strong>âš ï¸ è‡¨åºŠæ„ç¾©</strong><p style="font-size:13px;margin-top:6px">åœ¨ä¸»è¨´é«–éƒ¨æˆ–é¼ è¹Šéƒ¨ç–¼ç—›åˆ°åŸºå±¤é†«ç™‚å°±è¨ºçš„æ‚£è€…ä¸­ï¼Œç´„æœ‰ <strong>34%</strong> çš„é«–é—œç¯€æœƒåœ¨ X å…‰ä¸Šé¡¯ç¤º OA è­‰æ“šã€‚<br><br>é€™ä»£è¡¨å‰æ¸¬æ©Ÿç‡ç´„ç‚º <strong>1/3</strong>ï¼Œæˆ‘å€‘éœ€è¦æœ‰æ•ˆçš„è‡¨åºŠæª¢æŸ¥ä¾†æé«˜æˆ–é™ä½é€™å€‹æ©Ÿç‡ã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ¯ è¨ºæ–·æ¨™æº–</h4>
    <div class="good"><strong>âœ” åƒè€ƒæ¨™æº–</strong><p style="font-size:13px;margin-top:6px">æœ¬ç ”ç©¶ä½¿ç”¨<strong>å¹³é¢ X å…‰</strong>ä½œç‚ºè¨ºæ–·é«–é—œç¯€ OA çš„åƒè€ƒæ¨™æº–ï¼Œè©•ä¼°ï¼š<br>â€¢ é—œç¯€é–“éš™ç‹¹çª„<br>â€¢ éª¨è´…å½¢æˆ<br>â€¢ è»Ÿéª¨ä¸‹ç¡¬åŒ–<br>â€¢ è»Ÿéª¨ä¸‹å›Šè…«</p></div>`,
    
    2: `<div class="key-point"><h4 style="font-size:14px;margin-bottom:8px">ğŸ”‘ ç—…å²è©¢å•</h4><p style="font-size:13px">ç—…å²ä¸­çš„å±éšªå› å­å’Œç—‡ç‹€ç‰¹å¾µå¯ä»¥æä¾›ä¸­ç­‰ç¨‹åº¦çš„è¨ºæ–·åƒ¹å€¼ï¼Œä½†å–®ç¨ä½¿ç”¨ä¸è¶³ä»¥ç¢ºè¨ºæˆ–æ’é™¤ OAã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“‹ é‡è¦ç—…å²é …ç›®</h4>
    <table><thead><tr><th>ç—…å²é …ç›®</th><th>æ•æ„Ÿåº¦</th><th>ç‰¹ç•°åº¦</th><th>LR+</th></tr></thead>
    <tbody>
    <tr><td style="text-align:left;font-weight:600">OA å®¶æ—å²</td><td>33%</td><td>84%</td><td><span class="lr-mod">2.1</span></td></tr>
    <tr><td style="text-align:left;font-weight:600">è†é—œç¯€ OA ç—…å²</td><td>40%</td><td>81%</td><td><span class="lr-mod">2.1</span></td></tr>
    <tr><td style="text-align:left;font-weight:600">çˆ¬æ¨“æ¢¯ç–¼ç—›</td><td>68%</td><td>68%</td><td><span class="lr-mod">2.1</span></td></tr>
    <tr><td style="text-align:left;font-weight:600">ä¸Šå¡è¡Œèµ°ç–¼ç—›</td><td>57%</td><td>73%</td><td><span class="lr-mod">2.1</span></td></tr>
    </tbody></table>
    <div class="info" style="margin-top:16px"><strong>ğŸ’¡ è§£è®€</strong><p style="font-size:13px;margin-top:6px">ä»¥ä¸Šæ‰€æœ‰ç—…å²é …ç›®çš„ LR+ éƒ½æ˜¯ <strong>2.1</strong>ï¼Œä»£è¡¨åªèƒ½è¼•åº¦å¢åŠ  OA çš„å¯èƒ½æ€§ã€‚<br><br>95% CI ç¯„åœç‚º 1.1-3.8ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™ã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ” è©¢å•é‡é»</h4>
    <div class="brown"><strong>ğŸ“ å»ºè­°è©¢å•çš„å•é¡Œ</strong>
    <p style="font-size:13px;margin-top:8px">
    1. <strong>å®¶æ—å²</strong>ï¼šã€Œæ‚¨çš„çˆ¶æ¯æˆ–å…„å¼Ÿå§å¦¹æœ‰éª¨é—œç¯€ç‚å—ï¼Ÿã€<br><br>
    2. <strong>è†é—œç¯€ OA</strong>ï¼šã€Œæ‚¨æœ‰è†è“‹é—œç¯€ç‚çš„ç—…å²å—ï¼Ÿã€<br><br>
    3. <strong>æ´»å‹•èª˜ç™¼ç–¼ç—›</strong>ï¼šã€Œçˆ¬æ¨“æ¢¯æˆ–ä¸Šå¡æ™‚æœƒåŠ é‡ç–¼ç—›å—ï¼Ÿã€
    </p></div>
    <div class="warn" style="margin-top:16px"><strong>âš ï¸ é™åˆ¶</strong><p style="font-size:13px;margin-top:6px">â€¢ ç—…å²çš„ LR+ åƒ…ç´„ 2ï¼Œè¨ºæ–·æ•ˆåŠ›æœ‰é™<br>â€¢ æ²’æœ‰ä»»ä½•ç—…å²é …ç›®çš„ LR- è¶³å¤ ä½åˆ°å¯ä»¥æ’é™¤ OA<br>â€¢ éœ€è¦çµåˆèº«é«”æª¢æŸ¥ä¾†æé«˜è¨ºæ–·æº–ç¢ºåº¦</p></div>`,
    
    3: `<div class="key-point"><h4 style="font-size:14px;margin-bottom:8px">ğŸ”‘ é—œç¯€æ´»å‹•åº¦æª¢æŸ¥</h4><p style="font-size:13px">è¢«å‹•é«–é—œç¯€å…§æ”¶ (Adduction) å’Œå…§æ—‹ (Internal Rotation) å—é™æ˜¯è¨ºæ–·é«–é—œç¯€ OA æœ€æœ‰åƒ¹å€¼çš„æ´»å‹•åº¦æŒ‡æ¨™ã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“ æª¢æŸ¥æ–¹æ³•</h4>
    <div class="info"><strong>ğŸ’¡ æ¨™æº–æ“ä½œ</strong><p style="font-size:13px;margin-top:6px">1. æ‚£è€…ä»°è‡¥<br>2. ä½¿ç”¨é‡è§’å™¨æ¸¬é‡ï¼Œæˆ–èˆ‡å°å´è‚¢é«”æ¯”è¼ƒ<br>3. è¢«å‹•ç§»å‹•é«–é—œç¯€è‡³å„æ–¹å‘çš„çµ‚æœ«ç¯„åœ<br>4. è¨˜éŒ„æ´»å‹•åº¦å—é™çš„æ–¹å‘</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“Š é«–é—œç¯€å…§æ”¶å—é™ (Decreased Adduction)</h4>
    <div class="stat-box" style="background:#E0F2F1;margin-bottom:16px">
        <div style="font-weight:700;color:var(--teal);margin-bottom:10px">è¢«å‹•é«–é—œç¯€å…§æ”¶å—é™</div>
        <div class="grid-2" style="grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;text-align:center">
            <div><div class="label">æ•æ„Ÿåº¦</div><div class="value" style="color:var(--teal)">80%</div></div>
            <div><div class="label">ç‰¹ç•°åº¦</div><div class="value" style="color:var(--teal)">81%</div></div>
            <div><div class="label">LR+</div><div class="value" style="color:var(--suc)">4.2</div></div>
            <div><div class="label">LR-</div><div class="value" style="color:var(--blue)">0.25</div></div>
        </div>
        <div style="font-size:11px;color:var(--txt2);margin-top:8px">LR+ 95% CI: 3.0-6.0 | LR- 95% CI: 0.11-0.54</div>
    </div>
    <div class="good"><strong>âœ” æœ€ä½³æ’é™¤æŒ‡æ¨™ï¼</strong><p style="font-size:13px;margin-top:6px"><strong>LR- = 0.25</strong> æ˜¯æœ¬ç ”ç©¶ä¸­æœ€ä½çš„ LR-ï¼<br>â€¢ æ­£å¸¸çš„è¢«å‹•é«–é—œç¯€å…§æ”¶å¯æœ‰æ•ˆ<strong>æ’é™¤</strong> OA<br>â€¢ å‰æ¸¬æ©Ÿç‡ 34% â†’ å¾Œæ¸¬æ©Ÿç‡ç´„ <strong>11%</strong></p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“Š é«–é—œç¯€å…§æ—‹å—é™ (Decreased Internal Rotation)</h4>
    <div class="stat-box" style="background:#EDE7F6;margin-bottom:16px">
        <div style="font-weight:700;color:var(--pur);margin-bottom:10px">è¢«å‹•é«–é—œç¯€å…§æ—‹å—é™</div>
        <div class="grid-2" style="grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;text-align:center">
            <div><div class="label">æ•æ„Ÿåº¦</div><div class="value" style="color:var(--pur)">66%</div></div>
            <div><div class="label">ç‰¹ç•°åº¦</div><div class="value" style="color:var(--pur)">79%</div></div>
            <div><div class="label">LR+</div><div class="value" style="color:var(--suc)">3.2</div></div>
            <div><div class="label">LR-</div><div class="value" style="color:var(--warn)">0.43</div></div>
        </div>
        <div style="font-size:11px;color:var(--txt2);margin-top:8px">LR+ 95% CI: 1.7-6.0</div>
    </div>
    <div class="tip"><strong>ğŸ” è‡¨åºŠæŠ€å·§</strong><p style="font-size:13px;margin-top:6px">â€¢ å…§æ—‹æª¢æŸ¥ï¼šé«–è†å±ˆæ›² 90Â°ï¼Œå°‡å°è…¿å‘å¤–æ—‹è½‰<br>â€¢ å…§æ”¶æª¢æŸ¥ï¼šé«–ä¼¸ç›´ï¼Œå°‡è‚¢é«”å‘å°å´ç§»å‹•<br>â€¢ èˆ‡å°å´æ¯”è¼ƒå¯æé«˜æº–ç¢ºåº¦</p></div>`,
    
    4: `<div class="key-point"><h4 style="font-size:14px;margin-bottom:8px">ğŸ”‘ èª˜ç™¼ç–¼ç—›è©¦é©—</h4><p style="font-size:13px">ç‰¹å®šå‹•ä½œèª˜ç™¼çš„ç–¼ç—›åæ‡‰å…·æœ‰æœ€é«˜çš„è¨ºæ–·åƒ¹å€¼ï¼Œè¹²ä¸‹å¾Œæ–¹ç–¼ç—›å’Œè¢«å‹•æ´»å‹•æ™‚é¼ è¹Šéƒ¨ç–¼ç—›æ˜¯æœ€ä½³é æ¸¬æŒ‡æ¨™ã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ† æœ€ä½³é æ¸¬æŒ‡æ¨™ï¼šè¹²ä¸‹å¾Œæ–¹ç–¼ç—›</h4>
    <div class="stat-box" style="background:#EFEBE9;margin-bottom:16px">
        <div style="font-weight:700;color:var(--pri);margin-bottom:10px">Squat Causing Posterior Pain</div>
        <div class="grid-2" style="grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;text-align:center">
            <div><div class="label">æ•æ„Ÿåº¦</div><div class="value" style="color:var(--pri)">24%</div></div>
            <div><div class="label">ç‰¹ç•°åº¦</div><div class="value" style="color:var(--pri)">96%</div></div>
            <div><div class="label">LR+</div><div class="value" style="color:var(--suc)">6.1</div></div>
            <div><div class="label">LR-</div><div class="value" style="color:var(--warn)">0.79</div></div>
        </div>
        <div style="font-size:11px;color:var(--txt2);margin-top:8px">LR+ 95% CI: 1.3-29ï¼ˆæœ€é«˜ LR+ï¼‰</div>
    </div>
    <div class="info"><strong>ğŸ’¡ æ“ä½œæ–¹æ³•</strong><p style="font-size:13px;margin-top:6px">è«‹æ‚£è€…åšæ·±è¹²å‹•ä½œï¼Œè©¢å•æ˜¯å¦åœ¨é«–é—œç¯€<strong>å¾Œæ–¹</strong>ç”¢ç”Ÿç–¼ç—›ã€‚é™½æ€§åæ‡‰å¼·çƒˆæç¤ºé«–é—œç¯€ OAã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ”¥ è¢«å‹•å¤–å±•/å…§æ”¶æ™‚é¼ è¹Šéƒ¨ç–¼ç—›</h4>
    <div class="stat-box" style="background:#EDE7F6;margin-bottom:16px">
        <div style="font-weight:700;color:var(--pur);margin-bottom:10px">Groin Pain on Passive Abduction/Adduction</div>
        <div class="grid-2" style="grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;text-align:center">
            <div><div class="label">æ•æ„Ÿåº¦</div><div class="value" style="color:var(--pur)">33%</div></div>
            <div><div class="label">ç‰¹ç•°åº¦</div><div class="value" style="color:var(--pur)">94%</div></div>
            <div><div class="label">LR+</div><div class="value" style="color:var(--suc)">5.7</div></div>
            <div><div class="label">LR-</div><div class="value" style="color:var(--warn)">0.71</div></div>
        </div>
        <div style="font-size:11px;color:var(--txt2);margin-top:8px">LR+ 95% CI: 1.6-20</div>
    </div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ’ª å¤–å±•è‚Œç„¡åŠ› (Abductor Weakness)</h4>
    <div class="stat-box" style="background:#FFF8E1;margin-bottom:16px">
        <div style="font-weight:700;color:var(--acc);margin-bottom:10px">Hip Abductor Weakness</div>
        <div class="grid-2" style="grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;text-align:center">
            <div><div class="label">æ•æ„Ÿåº¦</div><div class="value" style="color:var(--acc)">44%</div></div>
            <div><div class="label">ç‰¹ç•°åº¦</div><div class="value" style="color:var(--acc)">90%</div></div>
            <div><div class="label">LR+</div><div class="value" style="color:var(--suc)">4.5</div></div>
            <div><div class="label">LR-</div><div class="value" style="color:var(--warn)">0.62</div></div>
        </div>
        <div style="font-size:11px;color:var(--txt2);margin-top:8px">LR+ 95% CI: 2.4-8.4</div>
    </div>
    <div class="tip"><strong>ğŸ” å¤–å±•è‚ŒåŠ›æ¸¬è©¦</strong><p style="font-size:13px;margin-top:6px">â€¢ æ‚£è€…å´è‡¥ï¼Œæª¢æŸ¥è€…æ–½åŠ é˜»åŠ›<br>â€¢ æ¯”è¼ƒé›™å´è‚ŒåŠ›å·®ç•°<br>â€¢ æ³¨æ„ Trendelenburg å¾µè±¡</p></div>`,
    
    5: `<div class="key-point"><h4 style="font-size:14px;margin-bottom:8px">ğŸ”‘ è‡¨åºŠç¶œåˆåˆ¤æ–·</h4><p style="font-size:13px">çµåˆå¤šé …æª¢æŸ¥ç™¼ç¾å¯ä»¥æ›´æœ‰æ•ˆåœ°è¨ºæ–·æˆ–æ’é™¤é«–é—œç¯€ OAï¼Œä½†æ²’æœ‰å–®ä¸€æª¢æŸ¥è¶³ä»¥ç¨ç«‹ç¢ºè¨ºã€‚</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“Š æ‰€æœ‰æª¢æŸ¥æŒ‡æ¨™æ’å</h4>
    <table><thead><tr><th>æª¢æŸ¥é …ç›®</th><th>LR+</th><th>LR-</th><th>åƒ¹å€¼</th></tr></thead>
    <tbody>
    <tr style="background:#EFEBE9"><td style="text-align:left;font-weight:600">è¹²ä¸‹å¾Œæ–¹ç–¼ç—›</td><td><span class="lr-high">6.1</span></td><td>0.79</td><td>â­ æœ€ä½³ç¢ºè¨º</td></tr>
    <tr><td style="text-align:left;font-weight:600">è¢«å‹•æ´»å‹•é¼ è¹Šç—›</td><td><span class="lr-high">5.7</span></td><td>0.71</td><td>â­ ç¢ºè¨º</td></tr>
    <tr><td style="text-align:left;font-weight:600">å¤–å±•è‚Œç„¡åŠ›</td><td><span class="lr-high">4.5</span></td><td>0.62</td><td>ç¢ºè¨º</td></tr>
    <tr style="background:#E3F2FD"><td style="text-align:left;font-weight:600">å…§æ”¶å—é™</td><td><span class="lr-mod">4.2</span></td><td><span class="lr-exclude">0.25</span></td><td>â­ æœ€ä½³æ’é™¤</td></tr>
    <tr><td style="text-align:left;font-weight:600">å…§æ—‹å—é™</td><td><span class="lr-mod">3.2</span></td><td>0.43</td><td>æ’é™¤</td></tr>
    <tr><td style="text-align:left;font-weight:600">ç—…å²é …ç›®</td><td><span class="lr-mod">2.1</span></td><td>~0.8</td><td>åƒè€ƒ</td></tr>
    </tbody></table>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ¯ è‡¨åºŠæ±ºç­–æµç¨‹</h4>
    <div class="good"><strong>âœ” ç¢ºè¨º OA çš„æœ€ä½³æ–¹æ³•</strong><p style="font-size:13px;margin-top:6px">ä»¥ä¸‹ç™¼ç¾å¼·çƒˆæç¤ºé«–é—œç¯€ OAï¼š<br>â€¢ è¹²ä¸‹æ™‚å¾Œæ–¹ç–¼ç—› (LR+ 6.1)<br>â€¢ è¢«å‹•å¤–å±•/å…§æ”¶æ™‚é¼ è¹Šéƒ¨ç–¼ç—› (LR+ 5.7)<br>â€¢ é«–å¤–å±•è‚Œç„¡åŠ› (LR+ 4.5)</p></div>
    <div class="info" style="margin-top:16px"><strong>ğŸ’¡ æ’é™¤ OA çš„æœ€ä½³æ–¹æ³•</strong><p style="font-size:13px;margin-top:6px"><strong>æ­£å¸¸çš„è¢«å‹•é«–é—œç¯€å…§æ”¶</strong>æ˜¯æœ€æœ‰æ•ˆçš„æ’é™¤æŒ‡æ¨™ï¼<br>â€¢ LR- = 0.25<br>â€¢ å‰æ¸¬æ©Ÿç‡ 34% â†’ å¾Œæ¸¬æ©Ÿç‡ ~11%<br>â€¢ å…§æ”¶æ­£å¸¸æ™‚ï¼ŒOA å¯èƒ½æ€§å¤§å¹…é™ä½</p></div>
    <h4 style="font-weight:700;margin-top:20px;margin-bottom:12px;color:var(--pri)">ğŸ“ å¯¦å‹™å»ºè­°</h4>
    <div class="brown"><strong>ğŸ“‹ å»ºè­°æª¢æŸ¥é †åº</strong>
    <p style="font-size:13px;margin-top:8px">
    <strong>Step 1ï¼šæ’é™¤</strong><br>
    â€¢ æ¸¬è©¦è¢«å‹•é«–é—œç¯€å…§æ”¶<br>
    â€¢ è‹¥æ­£å¸¸ â†’ OA å¯èƒ½æ€§ä½<br><br>
    <strong>Step 2ï¼šç¢ºè¨º</strong><br>
    â€¢ è¹²ä¸‹è©¦é©—ï¼ˆè§€å¯Ÿå¾Œæ–¹ç–¼ç—›ï¼‰<br>
    â€¢ è¢«å‹•å¤–å±•/å…§æ”¶ï¼ˆè§€å¯Ÿé¼ è¹Šç—›ï¼‰<br>
    â€¢ é«–å¤–å±•è‚ŒåŠ›æ¸¬è©¦<br><br>
    <strong>Step 3ï¼šå½±åƒç¢ºèª</strong><br>
    â€¢ è‡¨åºŠé«˜åº¦æ‡·ç–‘ â†’ X å…‰æª¢æŸ¥
    </p></div>
    <div class="warn" style="margin-top:16px"><strong>âš ï¸ é‡è¦æé†’</strong><p style="font-size:13px;margin-top:6px">â€¢ æ²’æœ‰å–®ä¸€æª¢æŸ¥è¶³ä»¥ç¨ç«‹ç¢ºè¨º OA<br>â€¢ ç¶œåˆå¤šé …ç™¼ç¾å¯æé«˜è¨ºæ–·æº–ç¢ºåº¦<br>â€¢ X å…‰ä»æ˜¯ç¢ºè¨ºçš„åƒè€ƒæ¨™æº–<br>â€¢ è‡¨åºŠç—‡ç‹€èˆ‡ X å…‰åš´é‡åº¦ä¸ä¸€å®šç›¸é—œ</p></div>`
};

const quiz = [
    {q:'æ ¹æ“šç ”ç©¶ï¼Œä¸»è¨´é«–éƒ¨æˆ–é¼ è¹Šéƒ¨ç–¼ç—›çš„åŸºå±¤é†«ç™‚æ‚£è€…ä¸­ï¼ŒX å…‰è­‰å¯¦ OA çš„æ¯”ä¾‹ç´„ç‚ºå¤šå°‘ï¼Ÿ',o:['ç´„ 15%','ç´„ 34%','ç´„ 50%','ç´„ 70%'],c:1,e:'åœ¨ä¸»è¨´é«–éƒ¨æˆ–é¼ è¹Šéƒ¨ç–¼ç—›åˆ°åŸºå±¤é†«ç™‚å°±è¨ºçš„æ‚£è€…ä¸­ï¼Œç´„æœ‰ 34% çš„é«–é—œç¯€æœƒåœ¨ X å…‰ä¸Šé¡¯ç¤º OA è­‰æ“šã€‚'},
    {q:'ä»¥ä¸‹å“ªé …æª¢æŸ¥çš„ LR+ æœ€é«˜ï¼Œæ˜¯é æ¸¬é«–é—œç¯€ OA çš„æœ€ä½³æŒ‡æ¨™ï¼Ÿ',o:['è¢«å‹•é«–é—œç¯€å…§æ”¶å—é™','å¤–å±•è‚Œç„¡åŠ›','è¹²ä¸‹æ™‚å¾Œæ–¹ç–¼ç—›','è¢«å‹•é«–é—œç¯€å…§æ—‹å—é™'],c:2,e:'è¹²ä¸‹æ™‚å¾Œæ–¹ç–¼ç—›çš„ LR+ = 6.1 (95% CI: 1.3-29)ï¼Œæ˜¯æ‰€æœ‰æª¢æŸ¥ä¸­æœ€é«˜çš„ã€‚'},
    {q:'è¢«å‹•å¤–å±•/å…§æ”¶æ™‚é¼ è¹Šéƒ¨ç–¼ç—›çš„ LR+ ç´„ç‚ºå¤šå°‘ï¼Ÿ',o:['2.1','3.2','4.5','5.7'],c:3,e:'è¢«å‹•å¤–å±•/å…§æ”¶æ™‚é¼ è¹Šéƒ¨ç–¼ç—›çš„ LR+ = 5.7 (95% CI: 1.6-20)ã€‚'},
    {q:'ä»¥ä¸‹å“ªé …æª¢æŸ¥æœ€é©åˆç”¨ä¾†ã€Œæ’é™¤ã€é«–é—œç¯€ OAï¼Ÿ',o:['è¹²ä¸‹è©¦é©—','å¤–å±•è‚ŒåŠ›æ¸¬è©¦','è¢«å‹•é«–é—œç¯€å…§æ”¶','è¢«å‹•é«–é—œç¯€å…§æ—‹'],c:2,e:'æ­£å¸¸çš„è¢«å‹•é«–é—œç¯€å…§æ”¶çš„ LR- = 0.25ï¼Œæ˜¯æœ€æœ‰æ•ˆçš„æ’é™¤æŒ‡æ¨™ã€‚'},
    {q:'æ­£å¸¸çš„è¢«å‹•é«–é—œç¯€å…§æ”¶ï¼Œå…¶ LR- ç´„ç‚ºå¤šå°‘ï¼Ÿ',o:['0.11','0.25','0.43','0.71'],c:1,e:'æ­£å¸¸çš„è¢«å‹•é«–é—œç¯€å…§æ”¶çš„ LR- = 0.25 (95% CI: 0.11-0.54)ã€‚'},
    {q:'é—œæ–¼ç—…å²è©¢å•åœ¨é«–é—œç¯€ OA è¨ºæ–·çš„åƒ¹å€¼ï¼Œä»¥ä¸‹ä½•è€…æ­£ç¢ºï¼Ÿ',o:['OA å®¶æ—å²çš„ LR+ ç´„ç‚º 5','è†é—œç¯€ OA ç—…å²å¯æœ‰æ•ˆæ’é™¤é«–é—œç¯€ OA','ç—…å²é …ç›®çš„ LR+ éƒ½ç´„ç‚º 2.1ï¼Œè¨ºæ–·åƒ¹å€¼æœ‰é™','çˆ¬æ¨“æ¢¯ç–¼ç—›æ˜¯æœ€æº–ç¢ºçš„ç—…å²é …ç›®'],c:2,e:'OA å®¶æ—å²ã€è†é—œç¯€ OA ç—…å²ã€çˆ¬æ¨“æ¢¯ç–¼ç—›ç­‰ç—…å²é …ç›®çš„ LR+ éƒ½ç´„ç‚º 2.1ï¼Œåªèƒ½è¼•åº¦å¢åŠ  OA å¯èƒ½æ€§ã€‚'},
    {q:'é«–å¤–å±•è‚Œç„¡åŠ›çš„æ•æ„Ÿåº¦å’Œç‰¹ç•°åº¦åˆ†åˆ¥ç´„ç‚ºå¤šå°‘ï¼Ÿ',o:['24% / 96%','33% / 94%','44% / 90%','80% / 81%'],c:2,e:'é«–å¤–å±•è‚Œç„¡åŠ›çš„æ•æ„Ÿåº¦ç‚º 44%ï¼Œç‰¹ç•°åº¦ç‚º 90%ï¼ŒLR+ = 4.5ã€‚'},
    {q:'è¢«å‹•é«–é—œç¯€å…§æ”¶å—é™çš„æ•æ„Ÿåº¦ç´„ç‚ºå¤šå°‘ï¼Ÿ',o:['24%','44%','66%','80%'],c:3,e:'è¢«å‹•é«–é—œç¯€å…§æ”¶å—é™çš„æ•æ„Ÿåº¦ç‚º 80%ï¼Œæ˜¯æ‰€æœ‰æª¢æŸ¥ä¸­æœ€é«˜çš„ã€‚'},
    {q:'ä»¥ä¸‹ä½•è€…çš„ LR- æœ€ä½ï¼Œæ’é™¤æ•ˆåŠ›æœ€å¥½ï¼Ÿ',o:['è¹²ä¸‹å¾Œæ–¹ç–¼ç—› (0.79)','è¢«å‹•æ´»å‹•é¼ è¹Šç—› (0.71)','é«–å…§æ—‹å—é™ (0.43)','é«–å…§æ”¶å—é™ (0.25)'],c:3,e:'é«–å…§æ”¶å—é™çš„ LR- = 0.25 æ˜¯æœ€ä½çš„ï¼Œæ­£å¸¸çš„é«–å…§æ”¶å¯æœ‰æ•ˆæ’é™¤ OAã€‚'},
    {q:'é—œæ–¼é«–é—œç¯€ OA çš„è‡¨åºŠè¨ºæ–·ï¼Œä»¥ä¸‹ä½•è€…æ­£ç¢ºï¼Ÿ',o:['å–®ä¸€æª¢æŸ¥å³å¯ç¢ºè¨º OA','è¹²ä¸‹è©¦é©—é™°æ€§å¯æ’é™¤ OA','ç¶œåˆå¤šé …ç™¼ç¾å¯æé«˜è¨ºæ–·æº–ç¢ºåº¦','ç—…å²æ¯”èº«é«”æª¢æŸ¥æ›´é‡è¦'],c:2,e:'æ²’æœ‰å–®ä¸€æª¢æŸ¥è¶³ä»¥ç¨ç«‹ç¢ºè¨º OAï¼Œç¶œåˆå¤šé …ç™¼ç¾å¯æé«˜è¨ºæ–·æº–ç¢ºåº¦ã€‚X å…‰ä»æ˜¯ç¢ºè¨ºçš„åƒè€ƒæ¨™æº–ã€‚'}
];

const MODULE_ID = 'jama-hip-oa';

// Badge definitions for notifications
const badgeDefs = {
    'first-quiz': { name: 'åˆè©¦å•¼è²', icon: 'ğŸ¯' },
    'perfect-score': { name: 'æ»¿åˆ†é”äºº', icon: 'ğŸ’¯' },
    'five-complete': { name: 'å°æœ‰æˆå°±', icon: 'â­' },
    'ten-complete': { name: 'å­¸æœ‰å°ˆç²¾', icon: 'ğŸŒŸ' },
    'master': { name: 'EBMå¤§å¸«', icon: 'ğŸ‘‘' },
    'speed-demon': { name: 'ç¥é€Ÿç­”é¡Œ', icon: 'âš¡' },
    'persistent': { name: 'å …æŒä¸æ‡ˆ', icon: 'ğŸ’ª' },
    'three-streak': { name: 'é€£å‹ä¸‰å ´', icon: 'ğŸ”¥' },
    'five-streak': { name: 'äº”é€£å‹', icon: 'ğŸ†' },
    'triple-perfect': { name: 'ä¸‰å† ç‹', icon: 'ğŸ‘‘' },
    'early-bird': { name: 'æ—©èµ·çš„é³¥', icon: 'ğŸ¦' },
    'night-owl': { name: 'å¤œè²“å­', icon: 'ğŸ¦‰' },
    'weekend-warrior': { name: 'å‡æ—¥æˆ°å£«', icon: 'ğŸ“…' },
    'comeback-kid': { name: 'é€†è½‰å‹', icon: 'ğŸš€' },
    'quick-learner': { name: 'ä¸€é»å°±é€š', icon: 'ğŸ’¡' },
    'improvement-king': { name: 'é€²æ­¥ç‹', icon: 'ğŸ“ˆ' },
    'marathon-runner': { name: 'é¦¬æ‹‰æ¾å­¸ç¿’è€…', icon: 'ğŸƒ' },
    'reviewer': { name: 'æº«æ•…çŸ¥æ–°', icon: 'ğŸ“–' },
    'almost-there': { name: 'å·®ä¸€é»é»', icon: 'ğŸ˜…' },
    'generous-guesser': { name: 'ä½›ç³»ç­”é¡Œ', icon: 'ğŸ™' },
    'learning-worm': { name: 'å­¸è¡“èš¯èš“', icon: 'ğŸª±' },
    'eternal-student': { name: 'æ°¸æ†çš„å­¸ç”Ÿ', icon: 'â™¾ï¸' },
    'speed-fail': { name: 'å…‰é€Ÿé™£äº¡', icon: 'ğŸ’«' },
    'slow-and-wrong': { name: 'æƒ³å¾ˆä¹…é‚„æ˜¯éŒ¯', icon: 'ğŸ¤”' },
    'zero-hero': { name: 'é›¶åˆ†è‹±é›„', icon: 'ğŸ’€' },
    'procrastinator': { name: 'æœ€å¾Œä¸€ç§’', icon: 'â°' },
    'deja-vu': { name: 'æ—¢è¦–æ„Ÿ', icon: 'ğŸ‘€' },
    'coffee-needed': { name: 'éœ€è¦å’–å•¡', icon: 'â˜•' },
    'wanderer': { name: 'æ¼«éŠè€…', icon: 'ğŸ§­' },
    'consistent-output': { name: 'ç©©å®šè¼¸å‡º', icon: 'ğŸ¯' },
    'heart-expert': { name: 'å¿ƒè‡Ÿé”äºº', icon: 'â¤ï¸' },
    'critical-master': { name: 'æ€¥é‡ç—‡å°ˆå®¶', icon: 'ğŸš¨' },
    'neuro-ninja': { name: 'ç¥ç¶“å¿è€…', icon: 'ğŸ§ ' },
    'pulm-pro': { name: 'èƒ¸è…”é«˜æ‰‹', icon: 'ğŸ«' },
    'ebm-foundation': { name: 'EBMåŸºçŸ³', icon: 'ğŸ›ï¸' },
    'jama-collector': { name: 'JAMAæ”¶è—å®¶', icon: 'ğŸ“š' },
    'achievement-hunter': { name: 'æˆå°±çµäºº', icon: 'ğŸ…' },
    'lucky-seven': { name: 'å¹¸é‹ä¸ƒ', icon: 'ğŸ€' },
    'completionist': { name: 'å…¨æˆå°±é”æˆ', icon: 'ğŸ–ï¸' }
};

const categoryModules = {
    cardio: ['jama-chest-pain-acs', 'jama-syncope', 'jama-hypertension'],
    critical: ['jama-bacteremia', 'jama-gi-bleed', 'jama-fluid-responsiveness', 'jama-difficult-intubation', 'jama-cirrhosis', 'jama-wound-infection'],
    neuro: ['jama-head-trauma', 'jama-delirium', 'jama-decision-capacity'],
    pulm: ['jama-pleural-effusion', 'jama-osa'],
    core: ['critical-appraisal', 'diagnostic-study', 'prognosis-study', 'rct-appraisal', 'systematic-review', 'literature-search']
};

const ProgressTracker={
    STORAGE_KEY:'ebm-progress',
    newBadges: [],
    getProgress:()=>{try{const d=localStorage.getItem(ProgressTracker.STORAGE_KEY);return d?JSON.parse(d):{version:1,modules:{},badges:[],totalTimeSpent:0,streakData:{currentPassStreak:0,currentPerfectStreak:0},lastActivityDate:null}}catch{return{version:1,modules:{},badges:[],totalTimeSpent:0,streakData:{currentPassStreak:0,currentPerfectStreak:0},lastActivityDate:null}}},
    saveQuizResult:(moduleId,score,total,timeSpent)=>{
        ProgressTracker.newBadges = [];
        const progress=ProgressTracker.getProgress();
        const mod=progress.modules[moduleId]||{bestScore:0,totalAttempts:0,allAttempts:[],lessonsViewed:[],completed:false,firstCompleted:null};
        const attempt={date:new Date().toISOString(),score,timeSpent};
        mod.allAttempts.push(attempt);mod.totalAttempts++;
        if(score>mod.bestScore)mod.bestScore=score;
        const passingScore=Math.ceil(total*0.7);
        if(score>=passingScore&&!mod.completed){mod.completed=true;mod.firstCompleted=attempt.date}
        progress.modules[moduleId]=mod;progress.totalTimeSpent+=timeSpent;progress.lastUpdated=new Date().toISOString();
        ProgressTracker.checkBadges(progress,moduleId,score,total,timeSpent);
        localStorage.setItem(ProgressTracker.STORAGE_KEY,JSON.stringify(progress));return progress;
    },
    checkBadges:(progress,moduleId,score,total,timeSpent)=>{
        const badges=progress.badges||[];const ids=badges.map(b=>b.id);const now=new Date();const nowStr=now.toISOString();
        const hour=now.getHours();const day=now.getDay();
        const passed=score>=Math.ceil(total*0.7);const perfect=score===total;
        const addBadge=(id)=>{if(!ids.includes(id)){badges.push({id,earnedAt:nowStr});ids.push(id);ProgressTracker.newBadges.push(id);return true}return false};

        addBadge('first-quiz');
        if(perfect)addBadge('perfect-score');
        if(timeSpent<120&&passed)addBadge('speed-demon');
        const completed=Object.values(progress.modules).filter(m=>m.completed).length;
        if(completed>=5)addBadge('five-complete');
        if(completed>=10)addBadge('ten-complete');
        if(completed>=18)addBadge('master');
        const mod=progress.modules[moduleId];
        if(mod&&mod.totalAttempts>=3)addBadge('persistent');

        if(hour<6)addBadge('early-bird');
        if(hour>=0&&hour<5)addBadge('night-owl');
        if(day===0||day===6)addBadge('weekend-warrior');
        if(hour>=2&&hour<5&&!passed)addBadge('coffee-needed');

        const streakData=progress.streakData||{currentPassStreak:0,currentPerfectStreak:0};
        if(passed){streakData.currentPassStreak++;if(perfect)streakData.currentPerfectStreak++;else streakData.currentPerfectStreak=0}
        else{streakData.currentPassStreak=0;streakData.currentPerfectStreak=0}
        if(streakData.currentPassStreak>=3)addBadge('three-streak');
        if(streakData.currentPassStreak>=5)addBadge('five-streak');
        if(streakData.currentPerfectStreak>=3)addBadge('triple-perfect');
        progress.streakData=streakData;

        if(mod){
            if(mod.totalAttempts===1&&perfect)addBadge('quick-learner');
            if(mod.totalAttempts===1&&score===7)addBadge('lucky-seven');
            if(mod.allAttempts&&mod.allAttempts.length>1){
                const firstScore=mod.allAttempts[0].score;
                if(firstScore<7&&perfect)addBadge('comeback-kid');
                if(score-firstScore>=5)addBadge('improvement-king');
                const lastThree=mod.allAttempts.slice(-3);
                if(lastThree.length===3&&lastThree[0].score===lastThree[1].score&&lastThree[1].score===lastThree[2].score)addBadge('deja-vu');
                if(lastThree.length===3&&lastThree.every(a=>a.score===score))addBadge('consistent-output');
            }
            if(mod.totalAttempts>=10)addBadge('learning-worm');
            if(mod.completed&&mod.totalAttempts>1&&passed)addBadge('reviewer');
        }

        if(score===6)addBadge('almost-there');
        if(score===0)addBadge('zero-hero');
        if(score>=2&&score<=3)addBadge('generous-guesser');
        if(timeSpent<30&&!passed)addBadge('speed-fail');
        if(timeSpent>600&&!passed)addBadge('slow-and-wrong');

        const totalAttempts=Object.values(progress.modules).reduce((sum,m)=>sum+(m.totalAttempts||0),0);
        if(totalAttempts>=50&&completed<18)addBadge('eternal-student');
        const startedNotCompleted=Object.values(progress.modules).filter(m=>m.totalAttempts>0&&!m.completed).length;
        if(startedNotCompleted>=5&&completed===0)addBadge('wanderer');

        if(progress.lastActivityDate){
            const lastActivity=new Date(progress.lastActivityDate);
            const daysSince=(now-lastActivity)/(1000*60*60*24);
            if(daysSince>=7)addBadge('procrastinator');
        }
        progress.lastActivityDate=nowStr;

        const checkCat=(cat,badgeId)=>{const mods=categoryModules[cat]||[];if(mods.length>0&&mods.every(id=>progress.modules[id]?.completed))addBadge(badgeId)};
        checkCat('cardio','heart-expert');
        checkCat('critical','critical-master');
        checkCat('neuro','neuro-ninja');
        checkCat('pulm','pulm-pro');
        checkCat('core','ebm-foundation');
        const jamaComplete=Object.keys(progress.modules).filter(k=>k.startsWith('jama-')&&progress.modules[k]?.completed).length;
        if(jamaComplete>=12)addBadge('jama-collector');

        if(badges.length>=10)addBadge('achievement-hunter');
        if(badges.length>=39)addBadge('completionist');

        progress.badges=badges;
    }
};

// Badge notification toast component
function showBadgeToast(badges) {
    if (!badges || badges.length === 0) return;

    // Remove existing toast container if any
    const existingToast = document.getElementById('badge-toast-container');
    if (existingToast) existingToast.remove();

    const container = document.createElement('div');
    container.id = 'badge-toast-container';
    container.style.cssText = 'position:fixed;top:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px';

    badges.forEach((badgeId, i) => {
        const badge = badgeDefs[badgeId];
        if (!badge) return;

        const toast = document.createElement('div');
        toast.id = `badge-toast-${badgeId}`;
        toast.style.cssText = 'background:linear-gradient(135deg, #FFD700, #FFA500);padding:16px 20px;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.2);display:flex;align-items:center;gap:12px;animation:slideIn 0.5s ease-out;min-width:240px';
        toast.innerHTML = `
            <span style="font-size:36px">${badge.icon}</span>
            <div style="flex:1">
                <div style="font-size:12px;font-weight:600;color:#5D4037">æ–°æˆå°±è§£é–!</div>
                <div style="font-size:16px;font-weight:700;color:#3E2723">${badge.name}</div>
            </div>
            <button onclick="closeBadgeToast('${badgeId}')" style="background:rgba(0,0,0,0.1);border:none;border-radius:8px;width:28px;height:28px;cursor:pointer;font-size:14px">âœ•</button>
        `;
        container.appendChild(toast);
    });

    // Add animation style if not exists
    if (!document.getElementById('badge-toast-style')) {
        const style = document.createElement('style');
        style.id = 'badge-toast-style';
        style.textContent = '@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}';
        document.head.appendChild(style);
    }

    document.body.appendChild(container);

    // Auto-hide after 5 seconds
    setTimeout(() => {
        const toastContainer = document.getElementById('badge-toast-container');
        if (toastContainer) toastContainer.remove();
    }, 5000);
}

function closeBadgeToast(badgeId) {
    const toast = document.getElementById(`badge-toast-${badgeId}`);
    if (toast) toast.remove();
    const container = document.getElementById('badge-toast-container');
    if (container && container.children.length === 0) container.remove();
}

let currentLesson = 1;
let currentQ = 0;
let score = 0;
let answered = false;
let quizStartTime = null;

function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo(0, 0);
}

function showHome() { showPage('home'); }

function showLesson(id) {
    currentLesson = id;
    const l = lessons[id-1];
    document.getElementById('lesson-title').textContent = l.title;
    document.getElementById('lesson-header').style.background = `linear-gradient(135deg,${l.color},${l.color}88)`;
    document.getElementById('lesson-header').innerHTML = `<div class="container"><div style="font-size:12px;opacity:0.9">Lesson ${l.id} â€¢ ${l.sub}</div><h1 style="font-size:22px;font-weight:700">${l.title}</h1></div>`;
    document.getElementById('lesson-body').innerHTML = lessonContent[id];
    document.getElementById('prev-btn').style.display = id > 1 ? 'block' : 'none';
    document.getElementById('next-btn').textContent = id < 5 ? 'ä¸‹ä¸€èª² â†’' : 'é–‹å§‹æ¸¬é©— ğŸ“';
    document.getElementById('next-btn').onclick = id < 5 ? nextLesson : startQuiz;
    showPage('lesson');
}

function prevLesson() { if (currentLesson > 1) showLesson(currentLesson - 1); }
function nextLesson() { if (currentLesson < 5) showLesson(currentLesson + 1); }

function startQuiz() {
    currentQ = 0; score = 0; answered = false;
    quizStartTime = Date.now();
    renderQuestion();
    showPage('quiz');
}

function renderQuestion() {
    const q = quiz[currentQ];
    document.getElementById('quiz-progress').textContent = `${currentQ+1}/${quiz.length}`;
    document.getElementById('quiz-progress-bar').style.width = `${((currentQ+1)/quiz.length)*100}%`;
    
    let html = `<h3 style="font-size:15px;font-weight:600;line-height:1.7;margin-bottom:20px">${q.q}</h3>`;
    q.o.forEach((opt, i) => {
        html += `<button class="quiz-option" onclick="selectAnswer(${i})" id="opt${i}">
            <span class="option-label" id="lbl${i}">${String.fromCharCode(65+i)}</span>
            <span style="line-height:1.5">${opt}</span>
        </button>`;
    });
    document.getElementById('quiz-content').innerHTML = html;
    document.getElementById('quiz-feedback').innerHTML = '';
    document.getElementById('quiz-next').style.display = 'none';
    answered = false;
}

function selectAnswer(i) {
    if (answered) return;
    answered = true;
    const q = quiz[currentQ];
    
    document.querySelectorAll('.quiz-option').forEach((btn, idx) => {
        btn.classList.add('disabled');
        if (idx === q.c) {
            btn.classList.add('correct');
            document.getElementById('lbl'+idx).classList.add('correct');
            document.getElementById('lbl'+idx).textContent = 'âœ”';
        } else if (idx === i && i !== q.c) {
            btn.classList.add('wrong');
            document.getElementById('lbl'+idx).classList.add('wrong');
            document.getElementById('lbl'+idx).textContent = 'âœ—';
        }
    });
    
    if (i === q.c) score++;
    
    const feedbackClass = i === q.c ? 'good' : 'tip';
    const feedbackTitle = i === q.c ? 'âœ” æ­£ç¢ºï¼' : 'âœ— ç­”éŒ¯äº†';
    const feedbackColor = i === q.c ? 'var(--suc)' : 'var(--acc)';
    document.getElementById('quiz-feedback').innerHTML = `<div class="${feedbackClass}"><strong style="color:${feedbackColor}">${feedbackTitle}</strong><p style="font-size:13px;color:var(--txt2);margin-top:8px;line-height:1.7">${q.e}</p></div>`;
    
    document.getElementById('quiz-next').style.display = 'block';
    document.getElementById('quiz-next').textContent = currentQ < quiz.length - 1 ? 'ä¸‹ä¸€é¡Œ â†’' : 'æŸ¥çœ‹çµæœ';
}

function nextQuestion() {
    if (currentQ < quiz.length - 1) {
        currentQ++;
        renderQuestion();
    } else {
        showResult();
    }
}

function showResult() {
    const pct = Math.round((score / quiz.length) * 100);
    const color = pct >= 80 ? 'var(--suc)' : pct >= 60 ? 'var(--warn)' : 'var(--err)';
    document.getElementById('result-circle').style.background = `conic-gradient(${color} ${pct*3.6}deg, #E5E5E5 0deg)`;
    document.getElementById('result-pct').textContent = pct + '%';
    document.getElementById('result-score').textContent = `${score}/${quiz.length}`;
    document.getElementById('result-title').textContent = pct >= 80 ? 'ğŸ‰ å¤ªæ£’äº†ï¼' : pct >= 60 ? 'ğŸ‘ ä¸éŒ¯ï¼' : 'ğŸ’ª åŠ æ²¹ï¼';
    document.getElementById('result-msg').textContent = pct >= 80 ? 'ä½ å·²ç¶“æŒæ¡é«–é—œç¯€ OA è¨ºæ–·ï¼' : pct >= 60 ? 'å†è¤‡ç¿’å¯ä»¥æ›´é€²æ­¥ï¼' : 'å»ºè­°é‡æ–°é–±è®€èª²ç¨‹';

    // Save progress
    if (quizStartTime) {
        const timeSpent = Math.round((Date.now() - quizStartTime) / 1000);
        ProgressTracker.saveQuizResult(MODULE_ID, score, quiz.length, timeSpent);
        if (ProgressTracker.newBadges.length > 0) {
            showBadgeToast(ProgressTracker.newBadges);
        }
    }

    showPage('result');
}
</script>
</body>
</html>
